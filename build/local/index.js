"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/*! ****************************************************************************
Copyright (c) 2017-2018 Pedro José Batista
MIT License

See the LICENSE file for more information.
***************************************************************************** */
/** [[include:index.md]] */ /** */
const decimal_js_1 = require("decimal.js");
const localization_1 = require("./localization");
const localization = require("./localization");
exports.localization = localization;
const utils = require("./utils");
exports.utils = utils;
// One hundred significant digits seem to be enough to handle more extreme time units
decimal_js_1.Decimal.set({ precision: 100 });
//#region Non-exported Functions
function filterEmpty(target) {
    return target.filter(value => {
        return typeof (value) !== "undefined" && value !== "";
    });
}
// Merges the immediate properties of all given objects
function merge(...objects) {
    let merged = {};
    for (const object of objects) {
        merged = Object.assign(merged, object || {});
    }
    return merged;
}
// Replaces the last occurrence of a string, within a string
// Thanks to https://stackoverflow.com/a/5497365
function replaceLast(str, search, replacement) {
    const index = str.lastIndexOf(search);
    if (index === -1) {
        return str;
    }
    return str.substr(0, index) + replacement + str.substr(index + 1);
}
// Gets a named time unit object from a time unit parameter, using the TIME_UNITS database
function timeUnitFromSource(parameter) {
    const assign = (name, timeUnit) => Object.assign({ name }, timeUnit);
    // tslint:disable:curly
    if (typeof (parameter) === "object") {
        // Return condition 1: The object already is named
        if (parameter.hasOwnProperty("name")) {
            return parameter;
        }
        // Return condition 2: Find the corresponding object and name it
        for (const timeUnitName in exports.TimeUnits)
            if (exports.TimeUnits.hasOwnProperty(timeUnitName)) {
                if (exports.TimeUnits[timeUnitName] === parameter) {
                    return assign(timeUnitName, exports.TimeUnits[timeUnitName]);
                }
            }
    }
    if (typeof (parameter) === "string") {
        // Return condition 3: Unit name matches object name exactly (TS will enforce this, but JS won't)
        if (exports.TimeUnits.hasOwnProperty(parameter)) {
            return assign(parameter, exports.TimeUnits[parameter]);
        }
        const target = parameter.toLowerCase();
        // Return condition 4: Unit name is a case variation or plural
        for (const timeUnitName in exports.TimeUnits)
            if (exports.TimeUnits.hasOwnProperty(timeUnitName)) {
                const customPlural = exports.TimeUnits[timeUnitName].customPlural;
                // Sub-conditions (if target is equal to any of these, we found a variation)
                const condition1 = timeUnitName.toLowerCase();
                const condition2 = condition1 + "s";
                const condition3 = timeUnitName.replace(/([a-z])([A-Z])/g, "$1 $2").toLowerCase();
                const condition4 = typeof (customPlural) === "string"
                    ? customPlural.toLowerCase()
                    : condition3 + "s";
                if (target === condition1 || target === condition2 || target === condition3 || target === condition4) {
                    return assign(timeUnitName, exports.TimeUnits[timeUnitName]);
                }
            }
    }
    // tslint:enable:curly
    // No condition met, unit is invalid
    throw new Error("Invalid time unit");
}
//#endregion
//#region Non-exported Variables
const defaultSettings = {
    decimalSeparator: ".",
    hideTimeUnit: false,
    hideZeroSegments: true,
    numericNotation: "decimal",
    roundingMode: 4,
    segmentSeparator: ", ",
    significantDigits: 10,
    symbolApproximately: "≈",
    symbolInfinite: "∞",
    symbolNaN: "NaN",
    termApproximately: "approximately",
    termInfinite: "infinite",
    termNaN: "invalid number of",
    timeUnitSeparator: " ",
    verbose: false,
};
// Gets the decimal separator from a locale string
const localeDecimalSeparator = (() => {
    const value = 1.1;
    const separator = value.toLocaleString().substring(1, 2);
    return separator;
})();
// List of roman numerals from greater to lesser
const romanNumerals = [
    [1000, "M"], [900, "CM"], [500, "D"], [400, "CD"],
    [100, "C"], [90, "XC"], [50, "L"], [40, "XL"],
    [10, "X"], [9, "IX"], [5, "V"], [4, "IV"], [1, "I"],
];
const romanNumeralsBig = [
    [1000000, `M̅`], [900000, `C̅M̅`], [500000, `D̅`], [400000, `C̅D̅`],
    [100000, `C̅`], [90000, `X̅C̅`], [50000, `L̅`], [40000, `X̅L̅`],
    [10000, `X̅`], [9000, `I̅X̅`], [5000, `V̅`], [4000, `I̅V̅`], [1000, `I̅`],
].concat(romanNumerals.slice(1));
// List of roman fractions in no specific order
const romanFractions = [
    [1 / 12, "•"], [2 / 12, ":"], [3 / 12, "∴"], [4 / 12, "::"], [5 / 12, ":·:"], [6 / 12, "S"],
    [7 / 12, "S•"], [8 / 12, "S:"], [9 / 12, "S∴"], [10 / 12, "S::"], [11 / 12, "S:·:"],
    [1 / 36, "ƧƧ"], [1 / 48, "Ɔ"], [1 / 72, "Ƨ"], [1 / 288, "℈"],
];
//#endregion
//#region Exported Functions
/**
 * Writes a numeric value using numerals from the _Ancient Rome_.
 *
 * @param value
 *   A number or [big decimal](https://mikemcl.github.io/decimal.js) to be converted to roman.
 * @param fractions
 *   Whether to include [common fractions](https://en.wikipedia.org/wiki/Roman_numerals#Fractions) or not.
 * @return
 *   A string with the roman representation of the given number.
 */
function writeRoman(value, fractions = false) {
    if (typeof (value) === "number") {
        value = new decimal_js_1.Decimal(value);
    }
    const fixedValue = value.trunc();
    const numerals = value.comparedTo(5000) > 0 ? romanNumeralsBig : romanNumerals;
    let amountLeft = fixedValue;
    let result = "";
    while (amountLeft.comparedTo(0) > 0) {
        // The order of romanNumerals is important here: they are written from large to lesser
        for (const entry of numerals) {
            // So, if value is 1111, this accounts for M (1000) first, then C (100), then X (10), then I (1)
            if (amountLeft.comparedTo(entry[0]) >= 0) {
                amountLeft = amountLeft.minus(entry[0]);
                result += entry[1];
                break;
            }
        }
    }
    if (fractions && value.comparedTo(fixedValue) > 0) {
        result += writeRomanFractions(value.minus(fixedValue));
    }
    return result.length > 0 ? result : "nulla";
}
exports.writeRoman = writeRoman;
/**
 * Writes the fraction part of a numeric value using common fractions from the _Ancient Rome_.
 *
 * @param value
 *   A number that will have its decimal part extracted and written in roman.
 * @return
 *   A string with the roman representation of the given fraction.
 */
function writeRomanFractions(value) {
    if (typeof (value) === "number") {
        value = new decimal_js_1.Decimal(value);
    }
    value = value.minus(value.trunc());
    if (value.comparedTo(0) === 0) {
        return "";
    }
    let smallestDifference = new decimal_js_1.Decimal(1);
    let smallestIndex = -1;
    // Not much to explain: compares all romanFractions with the given fraction and returns the one with the
    // smallest difference (only faster if the difference is exactly zero)
    for (let i = 0; i < romanFractions.length; i += 1) {
        const romanFraction = romanFractions[i];
        const difference = value.minus(romanFraction[0]).abs();
        if (difference.comparedTo(0) === 0) {
            return romanFraction[1];
        }
        if (difference.comparedTo(smallestDifference) < 0) {
            smallestDifference = difference;
            smallestIndex = i;
        }
    }
    return romanFractions[smallestIndex][1];
}
exports.writeRomanFractions = writeRomanFractions;
//#endregion
//#region Exported Constants
/**
 * Objects pertaining to this constant can be used as a parameter value for the
 * [countdown](../classes/_index_.timewriter.html#countdown) method of time writers.
 *
 * These constants contains groups of [time units](../classes/_index_.timeunitdatabase.html) that are related.
 */
exports.TimeSegments = {
    /** All base ten [SI](https://en.wikipedia.org/wiki/International_System_of_Units) time units. */
    baseTen: ["yottasecond", "zettasecond", "exasecond", "petasecond", "terasecond", "gigasecond", "megasecond",
        "kilosecond", "second", "milisecond", "microsecond", "nanosecond", "picosecond", "femtosecond", "attosecond",
        "zeptosecond", "yoctosecond"],
    /** All base two binary time units. */
    binary: ["yobisecond", "zebisecond", "exbisecond", "pebisecond", "tebisecond", "gibisecond", "mebisecond",
        "kibisecond", "second"],
    /** Common time unit segmentation: year, month, day, hour, minute and second. */
    common: ["year", "month", "day", "hour", "minute", "second"],
    /** Extremes and the middle-point of timecount units: Planck time, nanosecond and yobisecond. */
    extremes: ["planckTime", "nanosecond", "yobisecond"],
    /** Contains all units of a [sidereal time](https://en.wikipedia.org/wiki/Sidereal_time). */
    sidereal: ["siderealYear", "siderealMonth", "siderealDay", "siderealHour", "siderealMinute", "siderealSecond"],
};
/**
 * A database of [time units](../interfaces/_index_.timeunit.html), used to qualify and describe lengths of time.
 *
 * Each property of this object enumerates the linguistic and mathematical features of the time unit it represents.
 *
 * ---
 *
 * See [TimeUnitDatabase](../interfaces/_index_.timeunitdatabase.html) for more information about time units.
 */
exports.TimeUnits = {
    anomalisticMonth: { factor: new decimal_js_1.Decimal("2.38071312e+15"), approximated: true },
    anomalisticYear: { factor: new decimal_js_1.Decimal("3.15584325504e+16"), approximated: true },
    attosecond: { factor: new decimal_js_1.Decimal("1e-9"), symbol: "as" },
    biennium: { factor: new decimal_js_1.Decimal("6.3113904e+16"), customPlural: "biennia" },
    century: { factor: new decimal_js_1.Decimal("3.1536e+18"), customPlural: "centuries" },
    cosmicYear: { factor: new decimal_js_1.Decimal("7.4898e+24"), approximated: true },
    day: { factor: new decimal_js_1.Decimal("8.64e+13"), symbol: "d" },
    decade: { factor: new decimal_js_1.Decimal("3.1556952e+17") },
    draconicMonth: { factor: new decimal_js_1.Decimal("2.351135808e+15"), approximated: true },
    draconicYear: { factor: new decimal_js_1.Decimal("2.994797455629e+16"), approximated: true },
    eclipticYear: { factor: new decimal_js_1.Decimal("2.994797455629e+16"), approximated: true },
    exasecond: { factor: new decimal_js_1.Decimal("1e+27"), symbol: "Es" },
    exbisecond: { factor: new decimal_js_1.Decimal("1.152921504606846976e+27"), symbol: "Eis" },
    femtosecond: { factor: new decimal_js_1.Decimal("1e-6"), symbol: "fs" },
    fortnight: { factor: new decimal_js_1.Decimal("1.2096e+15") },
    galacticYear: { factor: new decimal_js_1.Decimal("7.4898e+24"), approximated: true },
    gibisecond: { factor: new decimal_js_1.Decimal("1.073741824e+18"), symbol: "Gis" },
    gigasecond: { factor: new decimal_js_1.Decimal("1e+18"), symbol: "Gs" },
    gregorianYear: { factor: new decimal_js_1.Decimal("3.1556952e+16"), readableName: "Gregorian year" },
    hour: { factor: new decimal_js_1.Decimal("3.6e+12"), symbol: "h" },
    jiffy: { factor: new decimal_js_1.Decimal("3e-15"), customPlural: "jiffies" },
    julianYear: { factor: new decimal_js_1.Decimal("3.15576e+16"), readableName: "Julian year" },
    kibisecond: { factor: new decimal_js_1.Decimal("1.024e+12"), symbol: "Kis" },
    kilosecond: { factor: new decimal_js_1.Decimal("1e+12"), symbol: "Ks" },
    kiloyear: { factor: new decimal_js_1.Decimal("3.1536e+19"), symbol: "ky" },
    leapYear: { factor: new decimal_js_1.Decimal("3.16224e+16") },
    lustrum: { factor: new decimal_js_1.Decimal("1.5778476e+17"), customPlural: "lustra" },
    mebisecond: { factor: new decimal_js_1.Decimal("1.048576e+15"), symbol: "Mis" },
    megasecond: { factor: new decimal_js_1.Decimal("1e+15"), symbol: "Ms" },
    microsecond: { factor: new decimal_js_1.Decimal("1e+3"), symbol: "µs" },
    milisecond: { factor: new decimal_js_1.Decimal("1e+6"), symbol: "ms" },
    millenium: { factor: new decimal_js_1.Decimal("3.1556952e+19"), customPlural: "millennia" },
    minute: { factor: new decimal_js_1.Decimal("6e+10"), symbol: "min" },
    month: { factor: new decimal_js_1.Decimal("2.628e+15"), symbol: "m" },
    nanosecond: { factor: new decimal_js_1.Decimal("1"), symbol: "ns" },
    nodicalMonth: { factor: new decimal_js_1.Decimal("2.351135808e+15"), approximated: true },
    nonLeapYear: { factor: new decimal_js_1.Decimal("3.1536e+16"), readableName: "non-leap year" },
    novennium: { factor: new decimal_js_1.Decimal("2.84012568e+17"), customPlural: "novennia" },
    octennium: { factor: new decimal_js_1.Decimal("2.52455616e+17"), customPlural: "octennia" },
    pebisecond: { factor: new decimal_js_1.Decimal("1.125899906842624e+24"), symbol: "Pis" },
    petasecond: { factor: new decimal_js_1.Decimal("1e+24"), symbol: "Ps" },
    picosecond: { factor: new decimal_js_1.Decimal("1e-3"), symbol: "ps" },
    planckTime: { factor: new decimal_js_1.Decimal("5.39056e-35"), symbol: "tₚ", readableName: "Planck time" },
    quadrennium: { factor: new decimal_js_1.Decimal("1.26227808e+17"), customPlural: "quadrennia" },
    quindecennium: { factor: new decimal_js_1.Decimal("4.7335428e+17"), customPlural: "quindecennia" },
    quinquennium: { factor: new decimal_js_1.Decimal("1.5778476e+17"), customPlural: "quinquennia" },
    second: { factor: new decimal_js_1.Decimal("1e+9"), symbol: "s" },
    septennium: { factor: new decimal_js_1.Decimal("2.20752e+17"), customPlural: "septennia" },
    shake: { factor: new decimal_js_1.Decimal("10") },
    siderealDay: { factor: new decimal_js_1.Decimal("8.616409e+13"), approximated: true },
    siderealHour: { factor: new decimal_js_1.Decimal("3.590170416667e+12"), approximated: true },
    siderealMinute: { factor: new decimal_js_1.Decimal("5.983617361111e+10"), approximated: true },
    siderealMonth: { factor: new decimal_js_1.Decimal("2.360591424e+15"), approximated: true },
    siderealSecond: { factor: new decimal_js_1.Decimal("9.972695601852e+8"), approximated: true },
    siderealYear: { factor: new decimal_js_1.Decimal("3.155814954e+16"), approximated: true },
    solarDay: { factor: new decimal_js_1.Decimal("8.64e+13") },
    solarYear: { factor: new decimal_js_1.Decimal("3.155693e+16"), approximated: true },
    svedberg: { factor: new decimal_js_1.Decimal("1e-4"), symbol: "Sv" },
    synodicMonth: { factor: new decimal_js_1.Decimal("2.55144384e+15"), approximated: true },
    tebisecond: { factor: new decimal_js_1.Decimal("1.099511627776e+21"), symbol: "Tis" },
    terasecond: { factor: new decimal_js_1.Decimal("1e+21"), symbol: "Ts" },
    timeUnit: { factor: new decimal_js_1.Decimal("1.024e+6"), symbol: "TU" },
    tropicalYear: { factor: new decimal_js_1.Decimal("3.155693e+16"), approximated: true },
    week: { factor: new decimal_js_1.Decimal("6.048e+14"), symbol: "w" },
    year: { factor: new decimal_js_1.Decimal("3.1556952e+16"), symbol: "y" },
    yobisecond: { factor: new decimal_js_1.Decimal("1.208925819614629174706176e+33"), symbol: "Yis" },
    yoctosecond: { factor: new decimal_js_1.Decimal("1e-15"), symbol: "ys" },
    yottasecond: { factor: new decimal_js_1.Decimal("1e+33"), symbol: "Ys" },
    zebisecond: { factor: new decimal_js_1.Decimal("1.180591620717411303424e+30"), symbol: "Zis" },
    zeptosecond: { factor: new decimal_js_1.Decimal("1e-12"), symbol: "zs" },
    zettasecond: { factor: new decimal_js_1.Decimal("1e+30"), symbol: "Zs" },
};
/**
 * Alias to [TimeUnits](#timeunits-1).
 *
 * @deprecated Since v1.1.0 - Incorrect naming, all exported constants are now capitalized (will be removed in v2).
 */
exports.timeUnits = exports.TimeUnits;
/**
 * This enumeration contains all [rounding modes](../interfaces/_index_.timewritersettings.html#roundingmode) available,
 * extracted from the [decimal.js documentation](https://mikemcl.github.io/decimal.js).
 */
var RoundingMode;
(function (RoundingMode) {
    /** Rounds away from zero. */
    RoundingMode[RoundingMode["RoundUp"] = 0] = "RoundUp";
    /** Rounds towards zero. */
    RoundingMode[RoundingMode["RoundDown"] = 1] = "RoundDown";
    /** Rounds towards _Infinity_. */
    RoundingMode[RoundingMode["RoundCeil"] = 2] = "RoundCeil";
    /** Rounds towards _-Infinity_. */
    RoundingMode[RoundingMode["RoundFloor"] = 3] = "RoundFloor";
    /** Rounds towards nearest neighbour; if equidistant, rounds away from zero. */
    RoundingMode[RoundingMode["RoundHalfUp"] = 4] = "RoundHalfUp";
    /** Rounds towards nearest neighbour; if equidistant, rounds towards zero. */
    RoundingMode[RoundingMode["RoundHalfDown"] = 5] = "RoundHalfDown";
    /** Rounds towards nearest neighbour; if equidistant, rounds towards even neighbour. */
    RoundingMode[RoundingMode["RoundHalfEven"] = 6] = "RoundHalfEven";
    /** Rounds towards nearest neighbour; if equidistant, rounds towards _Infinity_. */
    RoundingMode[RoundingMode["RoundHalfCeil"] = 7] = "RoundHalfCeil";
    /** Rounds towards nearest neighbour; if equidistant, rounds towards _-Infinity_. */
    RoundingMode[RoundingMode["RoundHalfFloor"] = 8] = "RoundHalfFloor";
})(RoundingMode = exports.RoundingMode || (exports.RoundingMode = {}));
/**
 * Encapsulates a nanosecond-based time value.
 *
 * Instances of this class are capable of being converted [from](#from) and [to](#to) / [to big decimal](#toBig) other
 * [time units](../interfaces/_index_.timeunitdatabase.html) and also perform basic arithmetics.
 *
 * Times can also be [approximated](#isApproximated), and operations deriving from their use will also be approximated.
 * This doesn't affect the time object value in any way, but is used by [TimeWriter](_index_.timewriter.html) to
 * demonstrate approximations.
 *
 * All instances are _immutable_, thus not affected by methods (new instances are always created instead). Also, all
 * time values are necessarily positive (negative times are not a thing).
 */
class Time {
    /**
     * Gets the [big decimal](https://www.npmjs.com/package/decimal.js) representation of the time length, in
     * nanoseconds.
     */
    get bigValue() { return this._nanoseconds; }
    /**
     * Gets whether the value of this is an approximation. This is determined at construction and it remains in all
     * operations with that this time is involved.
     */
    get isApproximated() { return this._approximated; }
    /**
     * Gets the numeric representation of the time length in nanoseconds.
     *
     * @deprecated Since v1.1.0 - In favor of `bigValue` and `value` (will be removed in v2).
     */
    get nanoseconds() { return parseFloat(this._nanoseconds.toString()); }
    /**
     * Gets the numeric representation of the time length, in nanoseconds.
     */
    get value() { return parseFloat(this._nanoseconds.toString()); }
    // Actual `constructor` implementation
    constructor(value, approximated = false) {
        if (value instanceof Time) {
            approximated = value._approximated;
            value = value._nanoseconds;
        }
        if (typeof (value) !== "string" && typeof (value) !== "number" && !(value instanceof decimal_js_1.Decimal)) {
            throw new Error(`Invalid argument ${value}`);
        }
        if (!(value instanceof decimal_js_1.Decimal)) {
            value = new decimal_js_1.Decimal(value);
        }
        this._approximated = approximated;
        this._nanoseconds = value.abs();
    }
    // Actual `from` implementation
    static from(value, timeUnit) {
        if (typeof (value) !== "string" && typeof (value) !== "number" && !(value instanceof decimal_js_1.Decimal)) {
            throw new Error(`Invalid argument ${value}`);
        }
        if (!(value instanceof decimal_js_1.Decimal)) {
            value = new decimal_js_1.Decimal(value);
        }
        timeUnit = timeUnitFromSource(timeUnit);
        return new Time(value.times(timeUnit.factor), timeUnit.approximated);
    }
    // Actual `add` implementation
    add(value, timeUnit) {
        let approximated = false;
        if (value instanceof Time) {
            value = value._nanoseconds;
        }
        if (timeUnit) {
            const converted = Time.from(value, timeUnit);
            approximated = converted._approximated;
            value = converted._nanoseconds;
        }
        return new Time(this._nanoseconds.add(value), approximated);
    }
    /**
     * Creates and returns a new time object that contains the value of this time, however with the approximated flag.
     *
     * @returns
     *   Approximated time in relation to this time.
     */
    approximate() {
        return new Time(this._nanoseconds, true);
    }
    // Actual `divide` implementation
    divide(value, timeUnit) {
        let approximated = false;
        if (value instanceof Time) {
            value = value._nanoseconds;
        }
        if (timeUnit) {
            const converted = Time.from(value, timeUnit);
            approximated = converted._approximated;
            value = converted._nanoseconds;
        }
        return new Time(this._nanoseconds.dividedBy(value), approximated);
    }
    // Actual `multiply` implementation
    multiply(value, timeUnit) {
        let approximated = false;
        if (value instanceof Time) {
            value = value._nanoseconds;
        }
        if (timeUnit) {
            const converted = Time.from(value, timeUnit);
            approximated = converted._approximated;
            value = converted._nanoseconds;
        }
        return new Time(this._nanoseconds.times(value), approximated);
    }
    // Actual `subtract` implementation
    subtract(value, timeUnit) {
        let approximated = false;
        if (value instanceof Time) {
            value = value._nanoseconds;
        }
        if (timeUnit) {
            const converted = Time.from(value, timeUnit);
            approximated = converted._approximated;
            value = converted._nanoseconds;
        }
        return new Time(this._nanoseconds.minus(value), approximated);
    }
    // Actual `to` implementation
    to(timeUnit) {
        return this.toBig(timeUnit).toNumber();
    }
    // Actual `toBig` implementation
    toBig(timeUnit) {
        timeUnit = timeUnitFromSource(timeUnit);
        return this._nanoseconds.dividedBy(timeUnit.factor);
    }
    /**
     * Gets a string representing the of value of this time, in nanoseconds.
     *
     * @return
     *   Numeric representation of the time length plus the symbol "ns".
     */
    toString() {
        return `${this._approximated ? "≈" : ""}${this._nanoseconds.toString()} ns`;
    }
}
exports.Time = Time;
/**
 * Time writers are objects used to synthesize time values into strings, i.e. write times using different lexical and
 * numerical configurations. **[Write](#write)** is used to express a single time value, using a single time unit;
 * **[countdown](#countdown)** is used to classify time values by segmenting them into parts with different time units.
 *
 * These configurations are loaded in the following order:
 * - Defaults — hardcoded for English (US);
 * - Options from the current [Locale](_localization_.locale.html);
 * - Options from the instance [settings](#settings);
 * - Options given as a parameter to a method.
 *
 * ---
 *
 * [[include:examples/timewriter.md]]
 */
class TimeWriter {
    /**
     * Initializes a new instance of the [TimeWriter](#) class optionally using the given configurations.
     *
     * @param settings
     *   Configurations pertaining to this instance, overriding those of the
     *   [locale](_localization_.locale.html#writerOptions). May be overriden via parameter of [write](#write) or
     *   [countdown](#countdown).
     */
    constructor(settings = {}) {
        this.settings = settings;
        this._shouldApproximate = true;
    }
    // Actual `countdown` implementation
    countdown(time, options = {}, ...args) {
        const timeUnitNames = [];
        const timeUnitObjects = [];
        if (typeof (options) === "string" || options.hasOwnProperty("factor")) {
            args = [options].concat(args);
            options = {};
        }
        if (options instanceof Array) {
            args = options.concat(args);
            options = {};
        }
        // If no time units were given, use the "common" constant
        if (args.length === 0) {
            args = exports.TimeSegments.common;
        }
        // Selects all arrays passed as argument
        const arrayArgs = args.filter(e => e instanceof Array);
        const filtered = args.filter(e => !(e instanceof Array));
        // Replaces arrays by their elements on args
        arrayArgs.forEach(array => { filtered.push.apply(filtered, array); });
        args = filtered;
        for (const argument of args) {
            const timeUnit = timeUnitFromSource(argument);
            // Skipping repeated units
            if (timeUnitNames.indexOf(timeUnit.name) > -1) {
                continue;
            }
            timeUnitNames.push(timeUnit.name);
            timeUnitObjects.push(timeUnit);
        }
        options = this._combineOptions(options);
        return this._countdownTime(time, timeUnitObjects, options);
    }
    // Actual `write` implementation
    write(time, fromTimeUnit, toTimeUnit, options) {
        const isOptions = (object) => typeof (object) === "object" && !object.hasOwnProperty("factor");
        if (!options && isOptions(fromTimeUnit)) {
            options = fromTimeUnit;
            fromTimeUnit = toTimeUnit;
            toTimeUnit = undefined;
        }
        if (!options && isOptions(toTimeUnit)) {
            options = toTimeUnit;
            toTimeUnit = undefined;
        }
        options = this._combineOptions(options);
        fromTimeUnit = (fromTimeUnit || options.defaultTimeUnit || "nanosecond");
        toTimeUnit = (toTimeUnit || fromTimeUnit);
        if (!(time instanceof Time)) {
            time = Time.from(time, fromTimeUnit);
        }
        return this._writeTime(time, options, toTimeUnit);
    }
    //#endregion
    // Gets the options overriden in the correct order
    _combineOptions(options) {
        options = merge(defaultSettings, localization_1.Locale.settings.writerOptions, this.settings, options);
        // Deprecated properties will be removed on next major release, but for now, parse them
        options.decimalPlaces = typeof (options.decimalPlaces) === "number"
            ? options.decimalPlaces
            : options.fractionDigits;
        if (options.timeUnitSeparator === defaultSettings.timeUnitSeparator && options.spaceTimeUnit === false) {
            options.timeUnitSeparator = "";
        }
        if (options.terms) {
            options.termApproximately = options.termApproximately || options.terms.approximately;
            options.termInfinite = options.termInfinite || options.terms.infinite;
            options.termNaN = options.termNaN || options.terms.nan;
        }
        return options;
    }
    // Count and writes times unit-by-unit
    _countdownTime(time, timeUnitList, options) {
        let value = new decimal_js_1.Decimal(0);
        let integer = new decimal_js_1.Decimal(0);
        let fraction = new decimal_js_1.Decimal(0);
        const update = (total) => { value = total, integer = value.trunc(), fraction = value.minus(integer); };
        // Sorts the time units from largest factor to smallest
        timeUnitList.sort((a, b) => b.factor.comparedTo(a.factor));
        // Sets the value to the representation of the first time unit
        update(time.toBig(timeUnitList[0]));
        const result = [];
        for (let i = 1; i < timeUnitList.length; i += 1) {
            const previousTimeUnit = timeUnitList[i - 1];
            if ((integer.comparedTo(0) !== 0 || options.hideZeroSegments === false) &&
                (!integer.isNaN() || result.length === 0)) {
                const parsedTime = time.isApproximated || previousTimeUnit.approximated
                    ? Time.from(integer, previousTimeUnit).approximate()
                    : Time.from(integer, previousTimeUnit);
                // Adding the current segment
                result.push(this.write(parsedTime, previousTimeUnit, options));
                // Preventing `write` from writting the approximation symbol / name
                if (parsedTime.isApproximated || previousTimeUnit.approximated) {
                    this._shouldApproximate = false;
                }
            }
            update(Time.from(fraction, previousTimeUnit).toBig(timeUnitList[i]));
        }
        const timeUnit = timeUnitList[timeUnitList.length - 1];
        if ((value.comparedTo(0) !== 0 || options.hideZeroSegments === false) &&
            (!value.isNaN() || result.length === 0)) {
            if (timeUnit.factor.equals("5.39056e-35")) {
                // Planck time is teoretically indivisible
                result.push(this.write(value.round(), timeUnit, options));
            }
            else {
                // Adds the last segment in its entirety (no integer-only)
                result.push(this.write(value, timeUnit, options));
            }
        }
        this._shouldApproximate = true;
        return result.join(options.segmentSeparator || "");
    }
    // Parses numeric options and returns the numeric string
    _writeNumber(value, options) {
        if (value.isNaN()) {
            return (options.verbose ? options.termNaN : options.symbolNaN) || "";
        }
        if (!value.isFinite()) {
            return (options.verbose ? options.termInfinite : options.symbolInfinite) || "";
        }
        if (options.numericNotation === "roman") {
            return writeRoman(value);
        }
        if (options.numericNotation === "roman-fractions") {
            return writeRoman(value, true);
        }
        const parameters = [options.decimalPlaces, options.roundingMode];
        let stringValue;
        if (options.significantDigits) {
            const offset = value.trunc().precision(true);
            value = value.toSignificantDigits(options.significantDigits + offset, options.roundingMode);
        }
        if (options.numericNotation === "scientific") {
            stringValue = value.toExponential.apply(value, parameters);
        }
        else {
            stringValue = value.toFixed.apply(value, parameters);
        }
        // Parsing the thousands separator only for decimals and values >= 1000
        if (options.numericNotation === "decimal" && options.thousandsSeparator && value.comparedTo(1000) >= 0) {
            const parts = stringValue.split(localeDecimalSeparator);
            parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, options.thousandsSeparator);
            if (parts.length === 2) {
                stringValue = parts.join(localeDecimalSeparator);
            }
            else {
                stringValue = parts[0];
            }
        }
        if (typeof (options.decimalSeparator) === "string" && options.decimalSeparator !== localeDecimalSeparator) {
            stringValue = replaceLast(stringValue, localeDecimalSeparator, options.decimalSeparator);
        }
        return stringValue;
    }
    // Parses time-related options and return the time string
    _writeTime(time, options, targetTimeUnit) {
        const namedTimeUnit = timeUnitFromSource(targetTimeUnit || options.defaultTimeUnit || "nanosecond");
        const translation = localization_1.Locale.settings.timeUnits ? localization_1.Locale.settings.timeUnits[namedTimeUnit.name] : {};
        const value = time.toBig(targetTimeUnit);
        const timeUnit = merge(namedTimeUnit, translation);
        const result = [];
        // Part 1: approximation term/symbol
        if (this._shouldApproximate && (time.isApproximated || namedTimeUnit.approximated)) {
            const approximately = !!options.verbose
                ? options.termApproximately ? options.termApproximately + " " : ""
                : options.symbolApproximately;
            result.push(approximately || "");
        }
        // Part 2: number
        if (!options.numericWriter) {
            result.push(this._writeNumber(value, options));
        }
        else {
            result.push(options.numericWriter(value.toNumber(), value));
        }
        // Part 3: separator
        if (!options.hideTimeUnit) {
            result.push(options.timeUnitSeparator || "");
            // Part 4: time unit
        }
        else {
            return filterEmpty(result).join("");
        }
        const pluralize = timeUnit.pluralize !== false && (!value.isFinite() || value.comparedTo(1) > 0);
        result.push(this._writeTimeUnit(value, timeUnit, options, pluralize));
        return filterEmpty(result).join("");
    }
    // Parses time unit-related options and returns the time unit string
    _writeTimeUnit(value, timeUnit, options, plural) {
        const result = [];
        if (!options.verbose && timeUnit.symbol) {
            result.push(timeUnit.symbol);
            return filterEmpty(result).join("");
        }
        let timeUnitName = timeUnit.readableName;
        if (plural && typeof (timeUnit.customPlural) === "function") {
            timeUnitName = timeUnit.customPlural(value.toNumber(), value);
        }
        if (plural && typeof (timeUnit.customPlural) === "string") {
            timeUnitName = timeUnit.customPlural;
        }
        if (typeof (timeUnitName) === "undefined") {
            timeUnitName = timeUnit.name.replace(/([a-z])([A-Z])/g, "$1 $2").toLowerCase();
        }
        if (plural && !timeUnit.customPlural) {
            timeUnitName += "s";
        }
        result.push(timeUnitName);
        return filterEmpty(result).join("");
    }
}
exports.TimeWriter = TimeWriter;
//#endregion

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3QixPQUFPLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDdkM7UUFFRCxJQUFJLFlBQVksR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDO1FBRXpDLElBQUksTUFBTSxJQUFJLE9BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEtBQUssVUFBVSxFQUFFO1lBQ3hELFlBQVksR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUNqRTtRQUVELElBQUksTUFBTSxJQUFJLE9BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEtBQUssUUFBUSxFQUFFO1lBQ3RELFlBQVksR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDO1NBQ3hDO1FBRUQsSUFBSSxPQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssV0FBVyxFQUFFO1lBQ3RDLFlBQVksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxPQUFPLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNsRjtRQUVELElBQUksTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRTtZQUNsQyxZQUFZLElBQUksR0FBRyxDQUFDO1NBQ3ZCO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMxQixPQUFPLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDeEMsQ0FBQztDQUNKO0FBemxCRCxnQ0F5bEJDO0FBdVJELFlBQVkiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIDIwMTctMjAxOCBQZWRybyBKb3PDqSBCYXRpc3RhXHJcbk1JVCBMaWNlbnNlXHJcblxyXG5TZWUgdGhlIExJQ0VOU0UgZmlsZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyoqIFtbaW5jbHVkZTppbmRleC5tZF1dICovIC8qKiAqL1xyXG5pbXBvcnQgeyBEZWNpbWFsIH0gZnJvbSBcImRlY2ltYWwuanNcIjtcclxuaW1wb3J0IHsgTG9jYWxlIH0gZnJvbSBcIi4vbG9jYWxpemF0aW9uXCI7XHJcbmltcG9ydCAqIGFzIGxvY2FsaXphdGlvbiBmcm9tIFwiLi9sb2NhbGl6YXRpb25cIjtcclxuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbi8vIEFsbG93IHN1Yi1tb2R1bGVzIHRvIGJlIGFjY2Vzc2VkIGRpcmVjdGx5IHZpYSB0aGUgbWFpbiBtb2R1bGVcclxuZXhwb3J0IHsgbG9jYWxpemF0aW9uIH07XHJcbmV4cG9ydCB7IHV0aWxzIH07XHJcblxyXG4vLyBPbmUgaHVuZHJlZCBzaWduaWZpY2FudCBkaWdpdHMgc2VlbSB0byBiZSBlbm91Z2ggdG8gaGFuZGxlIG1vcmUgZXh0cmVtZSB0aW1lIHVuaXRzXHJcbkRlY2ltYWwuc2V0KHsgcHJlY2lzaW9uOiAxMDAgfSk7XHJcblxyXG4vLyNyZWdpb24gTm9uLWV4cG9ydGVkIEZ1bmN0aW9uc1xyXG5cclxuZnVuY3Rpb24gZmlsdGVyRW1wdHkodGFyZ2V0OiBhbnlbXSkge1xyXG4gICAgcmV0dXJuIHRhcmdldC5maWx0ZXIodmFsdWUgPT4ge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YodmFsdWUpICE9PSBcInVuZGVmaW5lZFwiICYmIHZhbHVlICE9PSBcIlwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIE1lcmdlcyB0aGUgaW1tZWRpYXRlIHByb3BlcnRpZXMgb2YgYWxsIGdpdmVuIG9iamVjdHNcclxuZnVuY3Rpb24gbWVyZ2U8VCBleHRlbmRzIG9iamVjdD4oLi4uIG9iamVjdHM6IEFycmF5PFQgfCB1bmRlZmluZWQ+KSB7XHJcblxyXG4gICAgbGV0IG1lcmdlZCA9IHt9IGFzIFQ7XHJcblxyXG4gICAgZm9yIChjb25zdCBvYmplY3Qgb2Ygb2JqZWN0cykge1xyXG4gICAgICAgIG1lcmdlZCA9IE9iamVjdC5hc3NpZ24obWVyZ2VkLCBvYmplY3QgfHwge30pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtZXJnZWQ7XHJcbn1cclxuXHJcbi8vIFJlcGxhY2VzIHRoZSBsYXN0IG9jY3VycmVuY2Ugb2YgYSBzdHJpbmcsIHdpdGhpbiBhIHN0cmluZ1xyXG4vLyBUaGFua3MgdG8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzU0OTczNjVcclxuZnVuY3Rpb24gcmVwbGFjZUxhc3Qoc3RyOiBzdHJpbmcsIHNlYXJjaDogc3RyaW5nLCByZXBsYWNlbWVudDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHN0ci5sYXN0SW5kZXhPZihzZWFyY2gpO1xyXG5cclxuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGluZGV4KSArIHJlcGxhY2VtZW50ICsgc3RyLnN1YnN0cihpbmRleCArIDEpO1xyXG59XHJcblxyXG4vLyBHZXRzIGEgbmFtZWQgdGltZSB1bml0IG9iamVjdCBmcm9tIGEgdGltZSB1bml0IHBhcmFtZXRlciwgdXNpbmcgdGhlIFRJTUVfVU5JVFMgZGF0YWJhc2VcclxuZnVuY3Rpb24gdGltZVVuaXRGcm9tU291cmNlKHBhcmFtZXRlcjogVGltZVVuaXRTb3VyY2UgfCBzdHJpbmcpIHtcclxuXHJcbiAgICBjb25zdCBhc3NpZ24gPSAobmFtZTogc3RyaW5nLCB0aW1lVW5pdDogYW55KTogTmFtZWRUaW1lVW5pdCA9PiBPYmplY3QuYXNzaWduKHsgbmFtZSB9LCB0aW1lVW5pdCk7XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGU6Y3VybHlcclxuICAgIGlmICh0eXBlb2YocGFyYW1ldGVyKSA9PT0gXCJvYmplY3RcIikge1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gY29uZGl0aW9uIDE6IFRoZSBvYmplY3QgYWxyZWFkeSBpcyBuYW1lZFxyXG4gICAgICAgIGlmIChwYXJhbWV0ZXIuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJhbWV0ZXIgYXMgTmFtZWRUaW1lVW5pdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJldHVybiBjb25kaXRpb24gMjogRmluZCB0aGUgY29ycmVzcG9uZGluZyBvYmplY3QgYW5kIG5hbWUgaXRcclxuICAgICAgICBmb3IgKGNvbnN0IHRpbWVVbml0TmFtZSBpbiBUaW1lVW5pdHMpIGlmIChUaW1lVW5pdHMuaGFzT3duUHJvcGVydHkodGltZVVuaXROYW1lKSkge1xyXG4gICAgICAgICAgICBpZiAoVGltZVVuaXRzW3RpbWVVbml0TmFtZSBhcyBrZXlvZiBUaW1lVW5pdERhdGFiYXNlXSA9PT0gcGFyYW1ldGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXNzaWduKHRpbWVVbml0TmFtZSwgKFRpbWVVbml0cyBhcyBhbnkpW3RpbWVVbml0TmFtZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YocGFyYW1ldGVyKSA9PT0gXCJzdHJpbmdcIikge1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gY29uZGl0aW9uIDM6IFVuaXQgbmFtZSBtYXRjaGVzIG9iamVjdCBuYW1lIGV4YWN0bHkgKFRTIHdpbGwgZW5mb3JjZSB0aGlzLCBidXQgSlMgd29uJ3QpXHJcbiAgICAgICAgaWYgKFRpbWVVbml0cy5oYXNPd25Qcm9wZXJ0eShwYXJhbWV0ZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ24ocGFyYW1ldGVyLCAoVGltZVVuaXRzIGFzIGFueSlbcGFyYW1ldGVyXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBwYXJhbWV0ZXIudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIGNvbmRpdGlvbiA0OiBVbml0IG5hbWUgaXMgYSBjYXNlIHZhcmlhdGlvbiBvciBwbHVyYWxcclxuICAgICAgICBmb3IgKGNvbnN0IHRpbWVVbml0TmFtZSBpbiBUaW1lVW5pdHMpIGlmIChUaW1lVW5pdHMuaGFzT3duUHJvcGVydHkodGltZVVuaXROYW1lKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21QbHVyYWwgPSBUaW1lVW5pdHNbdGltZVVuaXROYW1lIGFzIGtleW9mIFRpbWVVbml0RGF0YWJhc2VdLmN1c3RvbVBsdXJhbDtcclxuXHJcbiAgICAgICAgICAgIC8vIFN1Yi1jb25kaXRpb25zIChpZiB0YXJnZXQgaXMgZXF1YWwgdG8gYW55IG9mIHRoZXNlLCB3ZSBmb3VuZCBhIHZhcmlhdGlvbilcclxuICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uMSA9IHRpbWVVbml0TmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBjb25kaXRpb24yID0gY29uZGl0aW9uMSArIFwic1wiO1xyXG4gICAgICAgICAgICBjb25zdCBjb25kaXRpb24zID0gdGltZVVuaXROYW1lLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uNCA9IHR5cGVvZihjdXN0b21QbHVyYWwpID09PSBcInN0cmluZ1wiXHJcbiAgICAgICAgICAgICAgICA/IGN1c3RvbVBsdXJhbC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICA6IGNvbmRpdGlvbjMgKyBcInNcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IGNvbmRpdGlvbjEgfHwgdGFyZ2V0ID09PSBjb25kaXRpb24yIHx8IHRhcmdldCA9PT0gY29uZGl0aW9uMyB8fCB0YXJnZXQgPT09IGNvbmRpdGlvbjQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhc3NpZ24odGltZVVuaXROYW1lLCAoVGltZVVuaXRzIGFzIGFueSlbdGltZVVuaXROYW1lXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB0c2xpbnQ6ZW5hYmxlOmN1cmx5XHJcblxyXG4gICAgLy8gTm8gY29uZGl0aW9uIG1ldCwgdW5pdCBpcyBpbnZhbGlkXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRpbWUgdW5pdFwiKTtcclxufVxyXG5cclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vLyNyZWdpb24gTm9uLWV4cG9ydGVkIFZhcmlhYmxlc1xyXG5cclxuY29uc3QgZGVmYXVsdFNldHRpbmdzOiBUaW1lV3JpdGVyU2V0dGluZ3MgPSB7XHJcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiBcIi5cIixcclxuICAgIGhpZGVUaW1lVW5pdDogZmFsc2UsXHJcbiAgICBoaWRlWmVyb1NlZ21lbnRzOiB0cnVlLFxyXG4gICAgbnVtZXJpY05vdGF0aW9uOiBcImRlY2ltYWxcIixcclxuICAgIHJvdW5kaW5nTW9kZTogNCxcclxuICAgIHNlZ21lbnRTZXBhcmF0b3I6IFwiLCBcIixcclxuICAgIHNpZ25pZmljYW50RGlnaXRzOiAxMCxcclxuICAgIHN5bWJvbEFwcHJveGltYXRlbHk6IFwi4omIXCIsXHJcbiAgICBzeW1ib2xJbmZpbml0ZTogXCLiiJ5cIixcclxuICAgIHN5bWJvbE5hTjogXCJOYU5cIixcclxuICAgIHRlcm1BcHByb3hpbWF0ZWx5OiBcImFwcHJveGltYXRlbHlcIixcclxuICAgIHRlcm1JbmZpbml0ZTogXCJpbmZpbml0ZVwiLFxyXG4gICAgdGVybU5hTjogXCJpbnZhbGlkIG51bWJlciBvZlwiLFxyXG4gICAgdGltZVVuaXRTZXBhcmF0b3I6IFwiIFwiLFxyXG4gICAgdmVyYm9zZTogZmFsc2UsXHJcbn07XHJcblxyXG4vLyBHZXRzIHRoZSBkZWNpbWFsIHNlcGFyYXRvciBmcm9tIGEgbG9jYWxlIHN0cmluZ1xyXG5jb25zdCBsb2NhbGVEZWNpbWFsU2VwYXJhdG9yID0gKCgpID0+IHtcclxuICAgIGNvbnN0IHZhbHVlID0gMS4xO1xyXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdmFsdWUudG9Mb2NhbGVTdHJpbmcoKS5zdWJzdHJpbmcoMSwgMik7XHJcbiAgICByZXR1cm4gc2VwYXJhdG9yO1xyXG59KSgpO1xyXG5cclxuLy8gTGlzdCBvZiByb21hbiBudW1lcmFscyBmcm9tIGdyZWF0ZXIgdG8gbGVzc2VyXHJcbmNvbnN0IHJvbWFuTnVtZXJhbHM6IEFycmF5PFtudW1iZXIsIHN0cmluZ10+ID0gW1xyXG4gICAgWzEwMDAsIFwiTVwiXSwgIFs5MDAsIFwiQ01cIl0sIFs1MDAsIFwiRFwiXSwgWzQwMCwgXCJDRFwiXSxcclxuICAgIFsxMDAsIFwiQ1wiXSwgICBbOTAsIFwiWENcIl0sICBbNTAsIFwiTFwiXSwgIFs0MCwgXCJYTFwiXSxcclxuICAgIFsxMCwgXCJYXCJdLCAgICBbOSwgXCJJWFwiXSwgICBbNSwgXCJWXCJdLCAgIFs0LCBcIklWXCJdLCBbMSwgXCJJXCJdLFxyXG5dO1xyXG5cclxuY29uc3Qgcm9tYW5OdW1lcmFsc0JpZzogQXJyYXk8W251bWJlciwgc3RyaW5nXT4gPSBbXHJcbiAgICBbMTAwMDAwMCwgYE3MhWBdLCBbOTAwMDAwLCBgQ8yFTcyFYF0sIFs1MDAwMDAsIGBEzIVgXSwgWzQwMDAwMCwgYEPMhUTMhWBdLFxyXG4gICAgWzEwMDAwMCwgYEPMhWBdLCAgWzkwMDAwLCBgWMyFQ8yFYF0sICBbNTAwMDAsIGBMzIVgXSwgIFs0MDAwMCwgYFjMhUzMhWBdLFxyXG4gICAgWzEwMDAwLCBgWMyFYF0sICAgWzkwMDAsIGBJzIVYzIVgXSwgICBbNTAwMCwgYFbMhWBdLCAgIFs0MDAwLCBgScyFVsyFYF0sIFsxMDAwLCBgScyFYF0sXHJcbl0uY29uY2F0KHJvbWFuTnVtZXJhbHMuc2xpY2UoMSkpIGFzIGFueTtcclxuXHJcbi8vIExpc3Qgb2Ygcm9tYW4gZnJhY3Rpb25zIGluIG5vIHNwZWNpZmljIG9yZGVyXHJcbmNvbnN0IHJvbWFuRnJhY3Rpb25zOiBBcnJheTxbbnVtYmVyLCBzdHJpbmddPiA9IFtcclxuICAgIFsxIC8gMTIsIFwi4oCiXCJdLCAgWzIgLyAxMiwgXCI6XCJdLCAgWzMgLyAxMiwgXCLiiLRcIl0sICBbNCAvIDEyLCBcIjo6XCJdLCAgIFs1IC8gMTIsIFwiOsK3OlwiXSwgICBbNiAvIDEyLCBcIlNcIl0sXHJcbiAgICBbNyAvIDEyLCBcIlPigKJcIl0sIFs4IC8gMTIsIFwiUzpcIl0sIFs5IC8gMTIsIFwiU+KItFwiXSwgWzEwIC8gMTIsIFwiUzo6XCJdLCBbMTEgLyAxMiwgXCJTOsK3OlwiXSxcclxuICAgIFsxIC8gMzYsIFwixqfGp1wiXSwgWzEgLyA0OCwgXCLGhlwiXSwgWzEgLyA3MiwgXCLGp1wiXSwgWzEgLyAyODgsIFwi4oSIXCJdLFxyXG5dO1xyXG5cclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vLyNyZWdpb24gRXhwb3J0ZWQgRnVuY3Rpb25zXHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgbnVtZXJpYyB2YWx1ZSB1c2luZyBudW1lcmFscyBmcm9tIHRoZSBfQW5jaWVudCBSb21lXy5cclxuICpcclxuICogQHBhcmFtIHZhbHVlXHJcbiAqICAgQSBudW1iZXIgb3IgW2JpZyBkZWNpbWFsXShodHRwczovL21pa2VtY2wuZ2l0aHViLmlvL2RlY2ltYWwuanMpIHRvIGJlIGNvbnZlcnRlZCB0byByb21hbi5cclxuICogQHBhcmFtIGZyYWN0aW9uc1xyXG4gKiAgIFdoZXRoZXIgdG8gaW5jbHVkZSBbY29tbW9uIGZyYWN0aW9uc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUm9tYW5fbnVtZXJhbHMjRnJhY3Rpb25zKSBvciBub3QuXHJcbiAqIEByZXR1cm5cclxuICogICBBIHN0cmluZyB3aXRoIHRoZSByb21hbiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gbnVtYmVyLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlUm9tYW4odmFsdWU6IG51bWJlciB8IERlY2ltYWwsIGZyYWN0aW9uczogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblxyXG4gICAgaWYgKHR5cGVvZih2YWx1ZSkgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICB2YWx1ZSA9IG5ldyBEZWNpbWFsKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaXhlZFZhbHVlID0gdmFsdWUudHJ1bmMoKTtcclxuICAgIGNvbnN0IG51bWVyYWxzID0gdmFsdWUuY29tcGFyZWRUbyg1MDAwKSA+IDAgPyByb21hbk51bWVyYWxzQmlnIDogcm9tYW5OdW1lcmFscztcclxuICAgIGxldCBhbW91bnRMZWZ0ID0gZml4ZWRWYWx1ZTtcclxuICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG5cclxuICAgIHdoaWxlIChhbW91bnRMZWZ0LmNvbXBhcmVkVG8oMCkgPiAwKSB7XHJcbiAgICAgICAgLy8gVGhlIG9yZGVyIG9mIHJvbWFuTnVtZXJhbHMgaXMgaW1wb3J0YW50IGhlcmU6IHRoZXkgYXJlIHdyaXR0ZW4gZnJvbSBsYXJnZSB0byBsZXNzZXJcclxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIG51bWVyYWxzKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBTbywgaWYgdmFsdWUgaXMgMTExMSwgdGhpcyBhY2NvdW50cyBmb3IgTSAoMTAwMCkgZmlyc3QsIHRoZW4gQyAoMTAwKSwgdGhlbiBYICgxMCksIHRoZW4gSSAoMSlcclxuICAgICAgICAgICAgaWYgKGFtb3VudExlZnQuY29tcGFyZWRUbyhlbnRyeVswXSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgYW1vdW50TGVmdCA9IGFtb3VudExlZnQubWludXMoZW50cnlbMF0pO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZyYWN0aW9ucyAmJiB2YWx1ZS5jb21wYXJlZFRvKGZpeGVkVmFsdWUpID4gMCkge1xyXG4gICAgICAgIHJlc3VsdCArPSB3cml0ZVJvbWFuRnJhY3Rpb25zKHZhbHVlLm1pbnVzKGZpeGVkVmFsdWUpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDAgPyByZXN1bHQgOiBcIm51bGxhXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgdGhlIGZyYWN0aW9uIHBhcnQgb2YgYSBudW1lcmljIHZhbHVlIHVzaW5nIGNvbW1vbiBmcmFjdGlvbnMgZnJvbSB0aGUgX0FuY2llbnQgUm9tZV8uXHJcbiAqXHJcbiAqIEBwYXJhbSB2YWx1ZVxyXG4gKiAgIEEgbnVtYmVyIHRoYXQgd2lsbCBoYXZlIGl0cyBkZWNpbWFsIHBhcnQgZXh0cmFjdGVkIGFuZCB3cml0dGVuIGluIHJvbWFuLlxyXG4gKiBAcmV0dXJuXHJcbiAqICAgQSBzdHJpbmcgd2l0aCB0aGUgcm9tYW4gcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGZyYWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlUm9tYW5GcmFjdGlvbnModmFsdWU6IG51bWJlciB8IERlY2ltYWwpIHtcclxuXHJcbiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIHZhbHVlID0gbmV3IERlY2ltYWwodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlID0gdmFsdWUubWludXModmFsdWUudHJ1bmMoKSk7XHJcblxyXG4gICAgaWYgKHZhbHVlLmNvbXBhcmVkVG8oMCkgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc21hbGxlc3REaWZmZXJlbmNlID0gbmV3IERlY2ltYWwoMSk7XHJcbiAgICBsZXQgc21hbGxlc3RJbmRleCA9IC0xO1xyXG5cclxuICAgIC8vIE5vdCBtdWNoIHRvIGV4cGxhaW46IGNvbXBhcmVzIGFsbCByb21hbkZyYWN0aW9ucyB3aXRoIHRoZSBnaXZlbiBmcmFjdGlvbiBhbmQgcmV0dXJucyB0aGUgb25lIHdpdGggdGhlXHJcbiAgICAvLyBzbWFsbGVzdCBkaWZmZXJlbmNlIChvbmx5IGZhc3RlciBpZiB0aGUgZGlmZmVyZW5jZSBpcyBleGFjdGx5IHplcm8pXHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb21hbkZyYWN0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGNvbnN0IHJvbWFuRnJhY3Rpb24gPSByb21hbkZyYWN0aW9uc1tpXTtcclxuICAgICAgICBjb25zdCBkaWZmZXJlbmNlID0gdmFsdWUubWludXMocm9tYW5GcmFjdGlvblswXSkuYWJzKCk7XHJcblxyXG4gICAgICAgIGlmIChkaWZmZXJlbmNlLmNvbXBhcmVkVG8oMCkgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJvbWFuRnJhY3Rpb25bMV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlmZmVyZW5jZS5jb21wYXJlZFRvKHNtYWxsZXN0RGlmZmVyZW5jZSkgPCAwKSB7XHJcbiAgICAgICAgICAgIHNtYWxsZXN0RGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XHJcbiAgICAgICAgICAgIHNtYWxsZXN0SW5kZXggPSBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcm9tYW5GcmFjdGlvbnNbc21hbGxlc3RJbmRleF1bMV07XHJcbn1cclxuXHJcbi8vI2VuZHJlZ2lvblxyXG5cclxuLy8jcmVnaW9uIEV4cG9ydGVkIENvbnN0YW50c1xyXG5cclxuLyoqXHJcbiAqIE9iamVjdHMgcGVydGFpbmluZyB0byB0aGlzIGNvbnN0YW50IGNhbiBiZSB1c2VkIGFzIGEgcGFyYW1ldGVyIHZhbHVlIGZvciB0aGVcclxuICogW2NvdW50ZG93bl0oLi4vY2xhc3Nlcy9faW5kZXhfLnRpbWV3cml0ZXIuaHRtbCNjb3VudGRvd24pIG1ldGhvZCBvZiB0aW1lIHdyaXRlcnMuXHJcbiAqXHJcbiAqIFRoZXNlIGNvbnN0YW50cyBjb250YWlucyBncm91cHMgb2YgW3RpbWUgdW5pdHNdKC4uL2NsYXNzZXMvX2luZGV4Xy50aW1ldW5pdGRhdGFiYXNlLmh0bWwpIHRoYXQgYXJlIHJlbGF0ZWQuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVGltZVNlZ21lbnRzID0ge1xyXG5cclxuICAgIC8qKiBBbGwgYmFzZSB0ZW4gW1NJXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnRlcm5hdGlvbmFsX1N5c3RlbV9vZl9Vbml0cykgdGltZSB1bml0cy4gKi9cclxuICAgIGJhc2VUZW46IFtcInlvdHRhc2Vjb25kXCIsIFwiemV0dGFzZWNvbmRcIiwgXCJleGFzZWNvbmRcIiwgXCJwZXRhc2Vjb25kXCIsIFwidGVyYXNlY29uZFwiLCBcImdpZ2FzZWNvbmRcIiwgXCJtZWdhc2Vjb25kXCIsXHJcbiAgICAgICAgXCJraWxvc2Vjb25kXCIsIFwic2Vjb25kXCIsIFwibWlsaXNlY29uZFwiLCBcIm1pY3Jvc2Vjb25kXCIsIFwibmFub3NlY29uZFwiLCBcInBpY29zZWNvbmRcIiwgXCJmZW10b3NlY29uZFwiLCBcImF0dG9zZWNvbmRcIixcclxuICAgICAgICBcInplcHRvc2Vjb25kXCIsIFwieW9jdG9zZWNvbmRcIl0sXHJcblxyXG4gICAgLyoqIEFsbCBiYXNlIHR3byBiaW5hcnkgdGltZSB1bml0cy4gKi9cclxuICAgIGJpbmFyeTogW1wieW9iaXNlY29uZFwiLCBcInplYmlzZWNvbmRcIiwgXCJleGJpc2Vjb25kXCIsIFwicGViaXNlY29uZFwiLCBcInRlYmlzZWNvbmRcIiwgXCJnaWJpc2Vjb25kXCIsIFwibWViaXNlY29uZFwiLFxyXG4gICAgICAgIFwia2liaXNlY29uZFwiLCBcInNlY29uZFwiXSxcclxuXHJcbiAgICAvKiogQ29tbW9uIHRpbWUgdW5pdCBzZWdtZW50YXRpb246IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSBhbmQgc2Vjb25kLiAqL1xyXG4gICAgY29tbW9uOiBbXCJ5ZWFyXCIsIFwibW9udGhcIiwgXCJkYXlcIiwgXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCJdLFxyXG5cclxuICAgIC8qKiBFeHRyZW1lcyBhbmQgdGhlIG1pZGRsZS1wb2ludCBvZiB0aW1lY291bnQgdW5pdHM6IFBsYW5jayB0aW1lLCBuYW5vc2Vjb25kIGFuZCB5b2Jpc2Vjb25kLiAqL1xyXG4gICAgZXh0cmVtZXM6IFtcInBsYW5ja1RpbWVcIiwgXCJuYW5vc2Vjb25kXCIsIFwieW9iaXNlY29uZFwiXSxcclxuXHJcbiAgICAvKiogQ29udGFpbnMgYWxsIHVuaXRzIG9mIGEgW3NpZGVyZWFsIHRpbWVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NpZGVyZWFsX3RpbWUpLiAqL1xyXG4gICAgc2lkZXJlYWw6IFtcInNpZGVyZWFsWWVhclwiLCBcInNpZGVyZWFsTW9udGhcIiwgXCJzaWRlcmVhbERheVwiLCBcInNpZGVyZWFsSG91clwiLCBcInNpZGVyZWFsTWludXRlXCIsIFwic2lkZXJlYWxTZWNvbmRcIl0sXHJcbn07XHJcblxyXG4vKipcclxuICogQSBkYXRhYmFzZSBvZiBbdGltZSB1bml0c10oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV1bml0Lmh0bWwpLCB1c2VkIHRvIHF1YWxpZnkgYW5kIGRlc2NyaWJlIGxlbmd0aHMgb2YgdGltZS5cclxuICpcclxuICogRWFjaCBwcm9wZXJ0eSBvZiB0aGlzIG9iamVjdCBlbnVtZXJhdGVzIHRoZSBsaW5ndWlzdGljIGFuZCBtYXRoZW1hdGljYWwgZmVhdHVyZXMgb2YgdGhlIHRpbWUgdW5pdCBpdCByZXByZXNlbnRzLlxyXG4gKlxyXG4gKiAtLS1cclxuICpcclxuICogU2VlIFtUaW1lVW5pdERhdGFiYXNlXSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXVuaXRkYXRhYmFzZS5odG1sKSBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aW1lIHVuaXRzLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFRpbWVVbml0czogVGltZVVuaXREYXRhYmFzZTxUaW1lVW5pdD4gPSB7XHJcbiAgICBhbm9tYWxpc3RpY01vbnRoOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIyLjM4MDcxMzEyZSsxNVwiKSwgYXBwcm94aW1hdGVkOiB0cnVlIH0sXHJcbiAgICBhbm9tYWxpc3RpY1llYXI6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjMuMTU1ODQzMjU1MDRlKzE2XCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIGF0dG9zZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjFlLTlcIiksIHN5bWJvbDogXCJhc1wiIH0sXHJcbiAgICBiaWVubml1bTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiNi4zMTEzOTA0ZSsxNlwiKSwgY3VzdG9tUGx1cmFsOiBcImJpZW5uaWFcIiB9LFxyXG4gICAgY2VudHVyeTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMy4xNTM2ZSsxOFwiKSwgY3VzdG9tUGx1cmFsOiBcImNlbnR1cmllc1wiIH0sXHJcbiAgICBjb3NtaWNZZWFyOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCI3LjQ4OThlKzI0XCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIGRheTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiOC42NGUrMTNcIiksIHN5bWJvbDogXCJkXCIgfSxcclxuICAgIGRlY2FkZTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMy4xNTU2OTUyZSsxN1wiKSB9LFxyXG4gICAgZHJhY29uaWNNb250aDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMi4zNTExMzU4MDhlKzE1XCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIGRyYWNvbmljWWVhcjogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMi45OTQ3OTc0NTU2MjllKzE2XCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIGVjbGlwdGljWWVhcjogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMi45OTQ3OTc0NTU2MjllKzE2XCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIGV4YXNlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMWUrMjdcIiksIHN5bWJvbDogXCJFc1wiIH0sXHJcbiAgICBleGJpc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxLjE1MjkyMTUwNDYwNjg0Njk3NmUrMjdcIiksIHN5bWJvbDogXCJFaXNcIiB9LFxyXG4gICAgZmVtdG9zZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjFlLTZcIiksIHN5bWJvbDogXCJmc1wiIH0sXHJcbiAgICBmb3J0bmlnaHQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjEuMjA5NmUrMTVcIikgfSxcclxuICAgIGdhbGFjdGljWWVhcjogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiNy40ODk4ZSsyNFwiKSwgYXBwcm94aW1hdGVkOiB0cnVlIH0sXHJcbiAgICBnaWJpc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxLjA3Mzc0MTgyNGUrMThcIiksIHN5bWJvbDogXCJHaXNcIiB9LFxyXG4gICAgZ2lnYXNlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMWUrMThcIiksIHN5bWJvbDogXCJHc1wiIH0sXHJcbiAgICBncmVnb3JpYW5ZZWFyOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIzLjE1NTY5NTJlKzE2XCIpLCByZWFkYWJsZU5hbWU6IFwiR3JlZ29yaWFuIHllYXJcIiB9LFxyXG4gICAgaG91cjogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMy42ZSsxMlwiKSwgc3ltYm9sOiBcImhcIiB9LFxyXG4gICAgamlmZnk6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjNlLTE1XCIpLCBjdXN0b21QbHVyYWw6IFwiamlmZmllc1wiIH0sXHJcbiAgICBqdWxpYW5ZZWFyOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIzLjE1NTc2ZSsxNlwiKSwgcmVhZGFibGVOYW1lOiBcIkp1bGlhbiB5ZWFyXCIgfSxcclxuICAgIGtpYmlzZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjEuMDI0ZSsxMlwiKSwgc3ltYm9sOiBcIktpc1wiIH0sXHJcbiAgICBraWxvc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxZSsxMlwiKSwgc3ltYm9sOiBcIktzXCIgfSxcclxuICAgIGtpbG95ZWFyOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIzLjE1MzZlKzE5XCIpLCBzeW1ib2w6IFwia3lcIiB9LFxyXG4gICAgbGVhcFllYXI6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjMuMTYyMjRlKzE2XCIpIH0sXHJcbiAgICBsdXN0cnVtOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxLjU3Nzg0NzZlKzE3XCIpLCBjdXN0b21QbHVyYWw6IFwibHVzdHJhXCIgfSxcclxuICAgIG1lYmlzZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjEuMDQ4NTc2ZSsxNVwiKSwgc3ltYm9sOiBcIk1pc1wiIH0sXHJcbiAgICBtZWdhc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxZSsxNVwiKSwgc3ltYm9sOiBcIk1zXCIgfSxcclxuICAgIG1pY3Jvc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxZSszXCIpLCBzeW1ib2w6IFwiwrVzXCIgfSxcclxuICAgIG1pbGlzZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjFlKzZcIiksIHN5bWJvbDogXCJtc1wiIH0sXHJcbiAgICBtaWxsZW5pdW06IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjMuMTU1Njk1MmUrMTlcIiksIGN1c3RvbVBsdXJhbDogXCJtaWxsZW5uaWFcIiB9LFxyXG4gICAgbWludXRlOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCI2ZSsxMFwiKSwgc3ltYm9sOiBcIm1pblwiIH0sXHJcbiAgICBtb250aDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMi42MjhlKzE1XCIpLCBzeW1ib2w6IFwibVwiIH0sXHJcbiAgICBuYW5vc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxXCIpLCBzeW1ib2w6IFwibnNcIiB9LFxyXG4gICAgbm9kaWNhbE1vbnRoOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIyLjM1MTEzNTgwOGUrMTVcIiksIGFwcHJveGltYXRlZDogdHJ1ZSB9LFxyXG4gICAgbm9uTGVhcFllYXI6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjMuMTUzNmUrMTZcIiksIHJlYWRhYmxlTmFtZTogXCJub24tbGVhcCB5ZWFyXCIgfSxcclxuICAgIG5vdmVubml1bTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMi44NDAxMjU2OGUrMTdcIiksIGN1c3RvbVBsdXJhbDogXCJub3Zlbm5pYVwiIH0sXHJcbiAgICBvY3Rlbm5pdW06IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjIuNTI0NTU2MTZlKzE3XCIpLCBjdXN0b21QbHVyYWw6IFwib2N0ZW5uaWFcIiB9LFxyXG4gICAgcGViaXNlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMS4xMjU4OTk5MDY4NDI2MjRlKzI0XCIpLCBzeW1ib2w6IFwiUGlzXCIgfSxcclxuICAgIHBldGFzZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjFlKzI0XCIpLCBzeW1ib2w6IFwiUHNcIiB9LFxyXG4gICAgcGljb3NlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMWUtM1wiKSwgc3ltYm9sOiBcInBzXCIgfSxcclxuICAgIHBsYW5ja1RpbWU6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjUuMzkwNTZlLTM1XCIpLCBzeW1ib2w6IFwidOKCmlwiLCByZWFkYWJsZU5hbWU6IFwiUGxhbmNrIHRpbWVcIiB9LFxyXG4gICAgcXVhZHJlbm5pdW06IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjEuMjYyMjc4MDhlKzE3XCIpLCBjdXN0b21QbHVyYWw6IFwicXVhZHJlbm5pYVwiIH0sXHJcbiAgICBxdWluZGVjZW5uaXVtOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCI0LjczMzU0MjhlKzE3XCIpLCBjdXN0b21QbHVyYWw6IFwicXVpbmRlY2VubmlhXCIgfSxcclxuICAgIHF1aW5xdWVubml1bTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMS41Nzc4NDc2ZSsxN1wiKSwgY3VzdG9tUGx1cmFsOiBcInF1aW5xdWVubmlhXCIgfSxcclxuICAgIHNlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMWUrOVwiKSwgc3ltYm9sOiBcInNcIiB9LFxyXG4gICAgc2VwdGVubml1bTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMi4yMDc1MmUrMTdcIiksIGN1c3RvbVBsdXJhbDogXCJzZXB0ZW5uaWFcIiB9LFxyXG4gICAgc2hha2U6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjEwXCIpIH0sXHJcbiAgICBzaWRlcmVhbERheTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiOC42MTY0MDllKzEzXCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIHNpZGVyZWFsSG91cjogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMy41OTAxNzA0MTY2NjdlKzEyXCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIHNpZGVyZWFsTWludXRlOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCI1Ljk4MzYxNzM2MTExMWUrMTBcIiksIGFwcHJveGltYXRlZDogdHJ1ZSB9LFxyXG4gICAgc2lkZXJlYWxNb250aDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMi4zNjA1OTE0MjRlKzE1XCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIHNpZGVyZWFsU2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCI5Ljk3MjY5NTYwMTg1MmUrOFwiKSwgYXBwcm94aW1hdGVkOiB0cnVlIH0sXHJcbiAgICBzaWRlcmVhbFllYXI6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjMuMTU1ODE0OTU0ZSsxNlwiKSwgYXBwcm94aW1hdGVkOiB0cnVlIH0sXHJcbiAgICBzb2xhckRheTogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiOC42NGUrMTNcIikgfSxcclxuICAgIHNvbGFyWWVhcjogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMy4xNTU2OTNlKzE2XCIpLCBhcHByb3hpbWF0ZWQ6IHRydWUgfSxcclxuICAgIHN2ZWRiZXJnOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxZS00XCIpLCBzeW1ib2w6IFwiU3ZcIiB9LFxyXG4gICAgc3lub2RpY01vbnRoOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIyLjU1MTQ0Mzg0ZSsxNVwiKSwgYXBwcm94aW1hdGVkOiB0cnVlIH0sXHJcbiAgICB0ZWJpc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxLjA5OTUxMTYyNzc3NmUrMjFcIiksIHN5bWJvbDogXCJUaXNcIiB9LFxyXG4gICAgdGVyYXNlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMWUrMjFcIiksIHN5bWJvbDogXCJUc1wiIH0sXHJcbiAgICB0aW1lVW5pdDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMS4wMjRlKzZcIiksIHN5bWJvbDogXCJUVVwiIH0sXHJcbiAgICB0cm9waWNhbFllYXI6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjMuMTU1NjkzZSsxNlwiKSwgYXBwcm94aW1hdGVkOiB0cnVlIH0sXHJcbiAgICB3ZWVrOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCI2LjA0OGUrMTRcIiksIHN5bWJvbDogXCJ3XCIgfSxcclxuICAgIHllYXI6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjMuMTU1Njk1MmUrMTZcIiksIHN5bWJvbDogXCJ5XCIgfSxcclxuICAgIHlvYmlzZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjEuMjA4OTI1ODE5NjE0NjI5MTc0NzA2MTc2ZSszM1wiKSwgc3ltYm9sOiBcIllpc1wiIH0sXHJcbiAgICB5b2N0b3NlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMWUtMTVcIiksIHN5bWJvbDogXCJ5c1wiIH0sXHJcbiAgICB5b3R0YXNlY29uZDogeyBmYWN0b3I6IG5ldyBEZWNpbWFsKFwiMWUrMzNcIiksIHN5bWJvbDogXCJZc1wiIH0sXHJcbiAgICB6ZWJpc2Vjb25kOiB7IGZhY3RvcjogbmV3IERlY2ltYWwoXCIxLjE4MDU5MTYyMDcxNzQxMTMwMzQyNGUrMzBcIiksIHN5bWJvbDogXCJaaXNcIiB9LFxyXG4gICAgemVwdG9zZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjFlLTEyXCIpLCBzeW1ib2w6IFwienNcIiB9LFxyXG4gICAgemV0dGFzZWNvbmQ6IHsgZmFjdG9yOiBuZXcgRGVjaW1hbChcIjFlKzMwXCIpLCBzeW1ib2w6IFwiWnNcIiB9LFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFsaWFzIHRvIFtUaW1lVW5pdHNdKCN0aW1ldW5pdHMtMSkuXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFNpbmNlIHYxLjEuMCAtIEluY29ycmVjdCBuYW1pbmcsIGFsbCBleHBvcnRlZCBjb25zdGFudHMgYXJlIG5vdyBjYXBpdGFsaXplZCAod2lsbCBiZSByZW1vdmVkIGluIHYyKS5cclxuICovXHJcbmV4cG9ydCBjb25zdCB0aW1lVW5pdHMgPSBUaW1lVW5pdHM7XHJcblxyXG4vLyNlbmRyZWdpb25cclxuXHJcbi8vI3JlZ2lvbiBFeHBvcnRlZCBUeXBlc1xyXG5cclxuLyoqXHJcbiAqIFRoaXMgaW50ZXJmYWNlIGlzIGEgYmFzZSB0aW1lIHVuaXQgZGVmaW5pdGlvbiwgY29uc2lzdGluZyBvZiBsaW5ndWlzdGljLXJlbGF0ZWQgcHJvcGVydGllcyBwZXJ0YWluaW5nIHRvIHRoZSB0aW1lXHJcbiAqIHVuaXQgYmVpbmcgZGVzY3JpYmVkLlxyXG4gKlxyXG4gKiBNYXRoZW1hdGljYWwgcHJvcGVydGllcyBhcmUgbGVmdCBvdXQgb2YgdGhpcyBpbnRlcmZhY2UgaW4gb3JkZXIgdG8gYWxsb3cgYmV0dGVyIGNvbnRyb2wgb3ZlciBjb25maWd1cmF0aW9ucyAoYW5kXHJcbiAqIHNpbmNlIHRpbWUgdW5pdHMgaGF2ZSB0aGUgc2FtZSBtYXRoZW1hdGljYWwgY29uc3RhbnRzIHJlZ2FyZGxlc3Mgb2YgbGFuZ3VhZ2UpLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYXNlVGltZVVuaXQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmaW5lcyBhIGN1c3RvbSBwbHVyYWxpemVkIG5hbWUgZm9yIHRoZSB0aW1lIHVuaXQ7IGl0IGNhbiBiZSBhIHN0cmluZyDigJQgdXNlZCB3aGVuZXZlciB0aGUgcXVhbnRpdHkgb2YgdGltZSBpc1xyXG4gICAgICogZ3JlYXRlciB0aGFuIG9uZSDigJQgb3IgYSBmdW5jdGlvbiwgYWJsZSB0byByZXRyaWV2ZSBkaWZmZXJlbnQgd29yZHMgYWNjb3JkaW5nIHRvIGEgZ2l2ZW4gcXVhbnRpdHkuXHJcbiAgICAgKlxyXG4gICAgICogQnkgZGVmYXVsdCwgd29yZHMgYXJlIHBsdXJhbGl6ZWQgYnkgYWRkaW5nIGFuIFwic1wiIHRvIHRoZSBlbmQgb2YgdGhlaXIgW3JlYWRhYmxlIG5hbWVdKCNyZWFkYWJsZW5hbWUpLlxyXG4gICAgICovXHJcbiAgICBjdXN0b21QbHVyYWw/OiBzdHJpbmcgfCBOdW1lcmljV3JpdGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSB0aW1lIHVuaXQgc2hvdWxkIGJlIHBsdXJhbGl6ZWQ6IGJ5IGRlZmF1bHQsIHdvcmRzIGFyZSBwbHVyYWxpemVkIGJ5IGFkZGluZyBhbiBcInNcIiB0byB0aGVcclxuICAgICAqIGVuZCBvZiB0aGVpciBbcmVhZGFibGUgbmFtZV0oI3JlYWRhYmxlbmFtZSksIGJ1dCB0aGlzIGNhbiBiZSBjaGFuZ2VkIHZpYSBbY3VzdG9tUGx1cmFsXSgjY3VzdG9tcGx1cmFsKS5cclxuICAgICAqXHJcbiAgICAgKiBJZiBzZXQgdG8gZmFsc2UsIHRoaXMgd2lsbCBwcmV2ZW50IHRoZSB0aW1lIHVuaXQgZnJvbSBldmVyIGJlaW5nIHBsdXJhbGl6ZWQgKHVubGVzcyB0aGlzIGNvbmZpZ3VyYXRpb24gaXNcclxuICAgICAqIG92ZXJ3cml0dGVuKS5cclxuICAgICAqL1xyXG4gICAgcGx1cmFsaXplPzogYm9vbGVhbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE5hbWUgb2YgdGhlIHRpbWUgdW5pdCBwcmVzZW50ZWQgaW4gYSBodW1hbiByZWFkYWJsZSBmb3JtYXQuXHJcbiAgICAgKlxyXG4gICAgICogRm9yIHRpbWVjb3VudCdzIGRlZmF1bHQgbGFuZ3VhZ2Ug4oCUIEVuZ2xpc2ggKFVTKSDigJQgdGhpcyBpcyBwYXJzZWQgZnJvbSB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdGhhdCBjb250YWlucyB0aGVcclxuICAgICAqIHRpbWUgdW5pdCwgdGFraW5nIGFkdmFudGFnZSBvZiBpdHMgW21lZGlhbCBjYXBpdGFsc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2FtZWxfY2FzZSkgdG8gc2VwYXJhdGVcclxuICAgICAqIGNvbXBvdW5kIG5hbWVzIChgZ2FsYWN0aWNZZWFyYCBwYXJzZXMgYXMgXCJnYWxhY3RpYyB5ZWFyXCIpLlxyXG4gICAgICpcclxuICAgICAqIEluIHNvbWUgY2FzZXMsIGhvd2V2ZXIsIGEgY3VzdG9tIHJlYWRhYmxlIG5hbWUgaXMgcmVxdWlyZWQgZXZlbiBpbiBFbmdsaXNoIChVUykgKGBwbGFuY2tUaW1lYCwgZm9yIGV4YW1wbGUsIHdvdWxkXHJcbiAgICAgKiBub3QgYmUgY29ycmVjdGx5IGNhcGl0YWxpemVkIGFzIFwiUGxhbmNrIHRpbWVcIikuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogSWYgeW91IHdpc2ggdG8gaGVscCB0aW1lY291bnQgd2l0aCBhIHRyYW5zbGF0aW9uLCBwbGVzZSBjb25zdWx0XHJcbiAgICAgKiBbQ29udHJpYnV0aW5nOiBUcmFuc2xhdGluZ10oaHR0cHM6Ly9naXRodWIuY29tL3BqYmF0aXN0YS90aW1lY291bnQvYmxvYi9tYXN0ZXIvQ09OVFJJQlVUSU5HLm1kI3RyYW5zbGF0aW5nKS5cclxuICAgICAqL1xyXG4gICAgcmVhZGFibGVOYW1lPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKiBBIHN5bWJvbCByZXByZXNlbnRpbmcgdGhlIHRpbWUgdW5pdCAoZS5nLiBcInNcIiBmb3Igc2Vjb25kcykuICovXHJcbiAgICBzeW1ib2w/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGlzIGludGVyZmFjZSBpcyB1c2VkIGludGVybmFsbHkgaW4gb3JkZXIgdG8gbWFwIHRoZSBbdGltZSB1bml0IGRhdGFiYXNlXSguLi9tb2R1bGVzL19pbmRleF8uaHRtbCN0aW1lX3VuaXQpIHVzaW5nXHJcbiAqIGl0cyBwcm9wZXJ0aWVzLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBOYW1lZFRpbWVVbml0IGV4dGVuZHMgVGltZVVuaXQge1xyXG5cclxuICAgIC8qKiBUaGlzIG5hbWUgaXMgcGFyc2VkIGZyb20gdGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRoYXQgY29udGFpbnMgdGhlIHRpbWUgdW5pdCBvYmplY3QuICovXHJcbiAgICBuYW1lOiBrZXlvZiBUaW1lVW5pdERhdGFiYXNlO1xyXG59XHJcblxyXG4vKipcclxuICogVGhpcyBpbnRlcmZhY2UgcmVwcmVzZW50cyBhIG5hbm9zZWNvbmQtYmFzZWQgdGltZSB2YWx1ZS5cclxuICpcclxuICogQGRlcHJlY2F0ZWQgU2luY2UgdjEuMS4wIC0gVW5uZWNlc3NhcnkgaW50ZXJmYWNlICh3aWxsIGJlIHJlbW92ZWQgaW4gdjIpLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBOYW5vc2Vjb25kQmFzZWRUaW1lIHtcclxuXHJcbiAgICAvKiogR2V0cyB0aGUgbnVtZXJpYyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGltZSBsZW5ndGggaW4gbmFub3NlY29uZHMuICovXHJcbiAgICByZWFkb25seSBuYW5vc2Vjb25kczogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogVGhpcyB0eXBlIGNvbnRhaW5zIGFsbCB2YWx1ZXMgYWNjZXB0ZWQgd2hlbiBjb25maWd1cmluZ1xyXG4gKiBbbnVtZXJpYyBub3RhdGlvbnNdKC4uL2ludGVyZmFjZXMvX2luZGV4Xy50eXBld3JpdGVyc2V0dGluZ3MjbnVtZXJpY25vdGF0aW9uKS5cclxuICpcclxuICogLSAqKlwiZGVjaW1hbFwiOioqIHN0YW5kYXJkIF9IaW5kdeKAk0FyYWJpYyBudW1lcmFsIHN5c3RlbV8gdXNpbmcgYmFzZSB0ZW47XHJcbiAqIC0gKipcInJvbWFuXCI6KiogX0FuY2llbnQgUm9tZV8gbnVtZXJhbCBzeXN0ZW0sIGlnbm9yaW5nIGZyYWN0aW9ucztcclxuICogLSAqKlwicm9tYW4tZnJhY3Rpb25zXCI6KiogX0FuY2llbnQgUm9tZV8gbnVtZXJhbCBzeXN0ZW0sIHVzaW5nXHJcbiAqICAgW2NvbW1vbiBmcmFjdGlvbnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JvbWFuX251bWVyYWxzI0ZyYWN0aW9ucyk7XHJcbiAqIC0gKipcInNjaWVudGlmaWNcIjoqKiBFeHBvbmVudCBub3RhdGlvbjsgd3JpdGVzIHZlcnkgc21hbGwgYW5kIHZlcnkgbGFyZ2UgbnVtYmVycyB1c2luZyBwb3dlcnMgb2YgMTAuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBOdW1lcmljTm90YXRpb24gPSBcImRlY2ltYWxcIiB8IFwicm9tYW5cIiB8IFwicm9tYW4tZnJhY3Rpb25zXCIgfCBcInNjaWVudGlmaWNcIjtcclxuXHJcbi8qKlxyXG4gKiBUaGlzIHR5cGUgZGVmaW5lcyBmdW5jdGlvbnMgdXNlZCBieSBbdGltZSB3cml0ZXJzXSguLi9jbGFzc2VzL19pbmRleF8udGltZXdyaXRlci5odG1sKSBpbiBvcmRlciB0byBleHByZXNzIGEgbnVtZXJpY1xyXG4gKiB2YWx1ZSBpbiB0aGUgZm9ybSBvZiB0ZXh0LlxyXG4gKlxyXG4gKiBUaGUgZmlyc3QgcGFyYW1ldGVyIGlzIGEgbmF0aXZlIG51bWJlciBhbmQgdGhlIHNlY29uZCwgb3B0aW9uYWwsIGlzIGFcclxuICogW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKS5cclxuICovXHJcbmV4cG9ydCB0eXBlIE51bWVyaWNXcml0ZXIgPSAodmFsdWU6IG51bWJlciwgYmlnVmFsdWU/OiBEZWNpbWFsKSA9PiBzdHJpbmc7XHJcblxyXG4vKipcclxuICogVGhpcyBlbnVtZXJhdGlvbiBjb250YWlucyBhbGwgW3JvdW5kaW5nIG1vZGVzXSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXdyaXRlcnNldHRpbmdzLmh0bWwjcm91bmRpbmdtb2RlKSBhdmFpbGFibGUsXHJcbiAqIGV4dHJhY3RlZCBmcm9tIHRoZSBbZGVjaW1hbC5qcyBkb2N1bWVudGF0aW9uXShodHRwczovL21pa2VtY2wuZ2l0aHViLmlvL2RlY2ltYWwuanMpLlxyXG4gKi9cclxuZXhwb3J0IGVudW0gUm91bmRpbmdNb2RlIHtcclxuXHJcbiAgICAvKiogUm91bmRzIGF3YXkgZnJvbSB6ZXJvLiAqL1xyXG4gICAgUm91bmRVcCA9IDAsXHJcblxyXG4gICAgLyoqIFJvdW5kcyB0b3dhcmRzIHplcm8uICovXHJcbiAgICBSb3VuZERvd24sXHJcblxyXG4gICAgLyoqIFJvdW5kcyB0b3dhcmRzIF9JbmZpbml0eV8uICovXHJcbiAgICBSb3VuZENlaWwsXHJcblxyXG4gICAgLyoqIFJvdW5kcyB0b3dhcmRzIF8tSW5maW5pdHlfLiAqL1xyXG4gICAgUm91bmRGbG9vcixcclxuXHJcbiAgICAvKiogUm91bmRzIHRvd2FyZHMgbmVhcmVzdCBuZWlnaGJvdXI7IGlmIGVxdWlkaXN0YW50LCByb3VuZHMgYXdheSBmcm9tIHplcm8uICovXHJcbiAgICBSb3VuZEhhbGZVcCxcclxuXHJcbiAgICAvKiogUm91bmRzIHRvd2FyZHMgbmVhcmVzdCBuZWlnaGJvdXI7IGlmIGVxdWlkaXN0YW50LCByb3VuZHMgdG93YXJkcyB6ZXJvLiAqL1xyXG4gICAgUm91bmRIYWxmRG93bixcclxuXHJcbiAgICAvKiogUm91bmRzIHRvd2FyZHMgbmVhcmVzdCBuZWlnaGJvdXI7IGlmIGVxdWlkaXN0YW50LCByb3VuZHMgdG93YXJkcyBldmVuIG5laWdoYm91ci4gKi9cclxuICAgIFJvdW5kSGFsZkV2ZW4sXHJcblxyXG4gICAgLyoqIFJvdW5kcyB0b3dhcmRzIG5lYXJlc3QgbmVpZ2hib3VyOyBpZiBlcXVpZGlzdGFudCwgcm91bmRzIHRvd2FyZHMgX0luZmluaXR5Xy4gKi9cclxuICAgIFJvdW5kSGFsZkNlaWwsXHJcblxyXG4gICAgLyoqIFJvdW5kcyB0b3dhcmRzIG5lYXJlc3QgbmVpZ2hib3VyOyBpZiBlcXVpZGlzdGFudCwgcm91bmRzIHRvd2FyZHMgXy1JbmZpbml0eV8uICovXHJcbiAgICBSb3VuZEhhbGZGbG9vcixcclxufVxyXG5cclxuLyoqXHJcbiAqIEVuY2Fwc3VsYXRlcyBhIG5hbm9zZWNvbmQtYmFzZWQgdGltZSB2YWx1ZS5cclxuICpcclxuICogSW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MgYXJlIGNhcGFibGUgb2YgYmVpbmcgY29udmVydGVkIFtmcm9tXSgjZnJvbSkgYW5kIFt0b10oI3RvKSAvIFt0byBiaWcgZGVjaW1hbF0oI3RvQmlnKSBvdGhlclxyXG4gKiBbdGltZSB1bml0c10oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV1bml0ZGF0YWJhc2UuaHRtbCkgYW5kIGFsc28gcGVyZm9ybSBiYXNpYyBhcml0aG1ldGljcy5cclxuICpcclxuICogVGltZXMgY2FuIGFsc28gYmUgW2FwcHJveGltYXRlZF0oI2lzQXBwcm94aW1hdGVkKSwgYW5kIG9wZXJhdGlvbnMgZGVyaXZpbmcgZnJvbSB0aGVpciB1c2Ugd2lsbCBhbHNvIGJlIGFwcHJveGltYXRlZC5cclxuICogVGhpcyBkb2Vzbid0IGFmZmVjdCB0aGUgdGltZSBvYmplY3QgdmFsdWUgaW4gYW55IHdheSwgYnV0IGlzIHVzZWQgYnkgW1RpbWVXcml0ZXJdKF9pbmRleF8udGltZXdyaXRlci5odG1sKSB0b1xyXG4gKiBkZW1vbnN0cmF0ZSBhcHByb3hpbWF0aW9ucy5cclxuICpcclxuICogQWxsIGluc3RhbmNlcyBhcmUgX2ltbXV0YWJsZV8sIHRodXMgbm90IGFmZmVjdGVkIGJ5IG1ldGhvZHMgKG5ldyBpbnN0YW5jZXMgYXJlIGFsd2F5cyBjcmVhdGVkIGluc3RlYWQpLiBBbHNvLCBhbGxcclxuICogdGltZSB2YWx1ZXMgYXJlIG5lY2Vzc2FyaWx5IHBvc2l0aXZlIChuZWdhdGl2ZSB0aW1lcyBhcmUgbm90IGEgdGhpbmcpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRpbWUge1xyXG5cclxuICAgIHByaXZhdGUgX2FwcHJveGltYXRlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX25hbm9zZWNvbmRzOiBEZWNpbWFsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGltZSBsZW5ndGgsIGluXHJcbiAgICAgKiBuYW5vc2Vjb25kcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBiaWdWYWx1ZSgpIHsgcmV0dXJuIHRoaXMuX25hbm9zZWNvbmRzOyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHdoZXRoZXIgdGhlIHZhbHVlIG9mIHRoaXMgaXMgYW4gYXBwcm94aW1hdGlvbi4gVGhpcyBpcyBkZXRlcm1pbmVkIGF0IGNvbnN0cnVjdGlvbiBhbmQgaXQgcmVtYWlucyBpbiBhbGxcclxuICAgICAqIG9wZXJhdGlvbnMgd2l0aCB0aGF0IHRoaXMgdGltZSBpcyBpbnZvbHZlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBpc0FwcHJveGltYXRlZCgpIHsgcmV0dXJuIHRoaXMuX2FwcHJveGltYXRlZDsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgbnVtZXJpYyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGltZSBsZW5ndGggaW4gbmFub3NlY29uZHMuXHJcbiAgICAgKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgU2luY2UgdjEuMS4wIC0gSW4gZmF2b3Igb2YgYGJpZ1ZhbHVlYCBhbmQgYHZhbHVlYCAod2lsbCBiZSByZW1vdmVkIGluIHYyKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBuYW5vc2Vjb25kcygpIHsgcmV0dXJuIHBhcnNlRmxvYXQodGhpcy5fbmFub3NlY29uZHMudG9TdHJpbmcoKSk7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIG51bWVyaWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRpbWUgbGVuZ3RoLCBpbiBuYW5vc2Vjb25kcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCB2YWx1ZSgpIHsgcmV0dXJuIHBhcnNlRmxvYXQodGhpcy5fbmFub3NlY29uZHMudG9TdHJpbmcoKSk7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIGNsYXNzIHVzaW5nIHRoZSBnaXZlbiB0aW1lIHZhbHVlIHBhcmFtZXRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqICAgQSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGxlbmd0aCBvZiB0aW1lLCBhY2NlcHRlZCBhcyBhIF9zdHJpbmdfIHRoYXQgcGFyc2VzIHRvIGEgbnVtYmVyIChlLmcuIFwiMTAwMFwiIG9yXHJcbiAgICAgKiAgIFwiMWUtMTBcIiksIGEgW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSBvciBhIF9udW1iZXJfLlxyXG4gICAgICogQHBhcmFtIGFwcHJveGltYXRlZFxyXG4gICAgICogICBXaGV0aGVyIHRoZSBnaXZlbiBpcyBhbiBhcHByb3hpbWF0aW9uIG9yIG5vdC4gVGhlIHJlc3VsdCBvZiBhbnkgYXJpdGhtZXRpYyBvcGVyYXRpb25zIGludm9sdmluZyB0aGlzIHRpbWUgd2lsbFxyXG4gICAgICogICBhbHNvIGJlIGFwcHJveGltYXRlZC5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UsIGFwcHJveGltYXRlZD86IGJvb2xlYW4pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgY2xhc3MgdXNpbmcgdGhlIGdpdmVuIHRpbWUgdmFsdWUgcGFyYW1ldGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICogICBBbm90aGVyIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgaW5zdGFuY2UgdG8gYmUgcmVwbGljYXRlZC5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHZhbHVlOiBUaW1lKTtcclxuXHJcbiAgICAvLyBBY3R1YWwgYGNvbnN0cnVjdG9yYCBpbXBsZW1lbnRhdGlvblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UgfCBUaW1lLCBhcHByb3hpbWF0ZWQ6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUaW1lKSB7XHJcbiAgICAgICAgICAgIGFwcHJveGltYXRlZCA9IHZhbHVlLl9hcHByb3hpbWF0ZWQ7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuX25hbm9zZWNvbmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZih2YWx1ZSkgIT09IFwic3RyaW5nXCIgJiYgdHlwZW9mKHZhbHVlKSAhPT0gXCJudW1iZXJcIiAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGVjaW1hbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50ICR7dmFsdWV9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIERlY2ltYWwpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IERlY2ltYWwodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYXBwcm94aW1hdGVkID0gYXBwcm94aW1hdGVkO1xyXG4gICAgICAgIHRoaXMuX25hbm9zZWNvbmRzID0gdmFsdWUuYWJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyBhIHRpbWUgdmFsdWUsIG1lYXN1cmluZyBpdCB3aXRoIHRoZSBzcGVjaWZpZWQgdGltZSB1bml0LCBhbmQgY3JlYXRlcyBhIG5ld1xyXG4gICAgICogW1RpbWVdKC4uL2NsYXNzZXMvX2luZGV4Xy50aW1lLmh0bWwpIGluc3RhbmNlIHdpdGggYW4gZXF1aXZhbGVudCBsZW5ndGggb2YgdGltZSwgYnV0IG1lYXN1cmVkIGluIG5hbm9zZWNvbmRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICogICBBIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgbGVuZ3RoIG9mIHRpbWUsIGFjY2VwdGVkIGFzIGEgX3N0cmluZ18gdGhhdCBwYXJzZXMgdG8gYSBudW1iZXIgKGUuZy4gXCIxMDAwXCIgb3JcclxuICAgICAqICAgXCIxZS0xMFwiKSwgYSBbYmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIG9yIGEgX251bWJlcl8uXHJcbiAgICAgKiBAcGFyYW0gdGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHVzZWQgYXMgc291cmNlIGZvciB0aGUgY29udmVyc2lvbi5cclxuICAgICAqIEByZXR1cm5cclxuICAgICAqICAgQSBuYW5vc2Vjb25kLWJhc2VkIHRpbWUgb2J0YWluZWQgZnJvbSB0aGUgY29udmVyc2lvbiBvZiB0aGUgZ2l2ZW4gcGFyYW1ldGVycy5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZCAtb3ItIHRoZSB0aW1lIHVuaXQgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBmcm9tKHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UsIHRpbWVVbml0OiBUaW1lVW5pdFNvdXJjZSk6IFRpbWU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyBhIHRpbWUgdmFsdWUsIG1lYXN1cmluZyBpdCB3aXRoIHRoZSBzcGVjaWZpZWQgdGltZSB1bml0LCBhbmQgY3JlYXRlcyBhIG5ld1xyXG4gICAgICogW1RpbWVdKC4uL2NsYXNzZXMvX2luZGV4Xy50aW1lLmh0bWwpIGluc3RhbmNlIHdpdGggYW4gZXF1aXZhbGVudCBsZW5ndGggb2YgdGltZSwgYnV0IG1lYXN1cmVkIGluIG5hbm9zZWNvbmRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICogICBBIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgbGVuZ3RoIG9mIHRpbWUsIGFjY2VwdGVkIGFzIGEgX3N0cmluZ18gdGhhdCBwYXJzZXMgdG8gYSBudW1iZXIgKGUuZy4gXCIxMDAwXCIgb3JcclxuICAgICAqICAgXCIxZS0xMFwiKSwgYSBbYmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIG9yIGEgX251bWJlcl8uXHJcbiAgICAgKiBAcGFyYW0gdGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHVzZWQgYXMgc291cmNlIGZvciB0aGUgY29udmVyc2lvbi4gQWNjZXB0cyBwbHVyYWxzIGFuZCBjYXNlIHZhcmlhdGlvbnMuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgbmFub3NlY29uZC1iYXNlZCB0aW1lIG9idGFpbmVkIGZyb20gdGhlIGNvbnZlcnNpb24gb2YgdGhlIGdpdmVuIHBhcmFtZXRlcnMuXHJcbiAgICAgKiBAdGhyb3dzIEVycm9yXHJcbiAgICAgKiAgIFdoZW4gdGhlIHZhbHVlIGlzIGludmFsaWQgLW9yLSB0aGUgdGltZSB1bml0IGlzIGludmFsaWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbSh2YWx1ZTogVGltZVZhbHVlU291cmNlLCB0aW1lVW5pdDogc3RyaW5nIHwgVGltZVVuaXQpOiBUaW1lO1xyXG5cclxuICAgIC8vIEFjdHVhbCBgZnJvbWAgaW1wbGVtZW50YXRpb25cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbSh2YWx1ZTogVGltZVZhbHVlU291cmNlLCB0aW1lVW5pdDogVGltZVVuaXRTb3VyY2UgfCBzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZih2YWx1ZSkgIT09IFwic3RyaW5nXCIgJiYgdHlwZW9mKHZhbHVlKSAhPT0gXCJudW1iZXJcIiAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGVjaW1hbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50ICR7dmFsdWV9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIERlY2ltYWwpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IERlY2ltYWwodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGltZVVuaXQgPSB0aW1lVW5pdEZyb21Tb3VyY2UodGltZVVuaXQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVGltZSh2YWx1ZS50aW1lcyh0aW1lVW5pdC5mYWN0b3IpLCB0aW1lVW5pdC5hcHByb3hpbWF0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgdmFsdWUgb2YgdGhpcyB0aW1lIHdpdGggdGhlIHZhbHVlIG9mIGFub3RoZXIgdGltZS4gSWYgZWl0aGVyIGFyZSBbYXBwcm94aW1hdGlvbnNdKCNpc0FwcHJveGltYXRlZCksIHRoZVxyXG4gICAgICogcmVzdWx0IHdpbGwgYWxzbyBiZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqICAgQSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGxlbmd0aCBvZiB0aW1lLCBhY2NlcHRlZCBhcyBhIF9zdHJpbmdfIHRoYXQgcGFyc2VzIHRvIGEgbnVtYmVyIChlLmcuIFwiMTAwMFwiIG9yXHJcbiAgICAgKiAgIFwiMWUtMTBcIiksIGEgW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSBvciBhIF9udW1iZXJfIC1vci0gYW5vdGhlclxyXG4gICAgICogICBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIGluc3RhbmNlIHVzZWQgdG8gYmUgYWRkZWQgdG8gdGhpcyB0aW1lLlxyXG4gICAgICogQHBhcmFtIHRpbWVVbml0XHJcbiAgICAgKiAgIFRpbWUgdW5pdCB1c2VkIGFzIHNvdXJjZSBmb3IgdGhlIGNvbnZlcnNpb24gb2YgYHZhbHVlYC4gVGhpcyBkZWZhdWx0cyB0byBcIm5hbm9zZWNvbmRcIiBhbmQgaXMgaWdub3JlZCB3aGVuIGFcclxuICAgICAqICAgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3QgaXMgcHJvdmlkZWQuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzIG9mIGJvdGggdGltZXMgYWRkZWQgdG8gZWFjaCBvdGhlci5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZCAtb3ItIHRoZSB0aW1lIHVuaXQgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZCh2YWx1ZTogVGltZVZhbHVlU291cmNlIHwgVGltZSwgdGltZVVuaXQ/OiBUaW1lVW5pdFNvdXJjZSk6IFRpbWU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSB2YWx1ZSBvZiB0aGlzIHRpbWUgd2l0aCB0aGUgdmFsdWUgb2YgYW5vdGhlciB0aW1lLiBJZiBlaXRoZXIgYXJlIFthcHByb3hpbWF0aW9uc10oI2lzQXBwcm94aW1hdGVkKSwgdGhlXHJcbiAgICAgKiByZXN1bHQgd2lsbCBhbHNvIGJlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICogICBBIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgbGVuZ3RoIG9mIHRpbWUsIGFjY2VwdGVkIGFzIGEgX3N0cmluZ18gdGhhdCBwYXJzZXMgdG8gYSBudW1iZXIgKGUuZy4gXCIxMDAwXCIgb3JcclxuICAgICAqICAgXCIxZS0xMFwiKSwgYSBbYmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIG9yIGEgX251bWJlcl8gLW9yLSBhbm90aGVyXHJcbiAgICAgKiAgIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgaW5zdGFuY2UgdXNlZCB0byBiZSBhZGRlZCB0byB0aGlzIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gdGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHVzZWQgYXMgc291cmNlIGZvciB0aGUgY29udmVyc2lvbiBvZiBgdmFsdWVgLiBUaGlzIGRlZmF1bHRzIHRvIFwibmFub3NlY29uZFwiIGFuZCBpcyBpZ25vcmVkIHdoZW4gYVxyXG4gICAgICogICBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCBpcyBwcm92aWRlZC4gQWNjZXB0cyBwbHVyYWxzIGFuZCBjYXNlIHZhcmlhdGlvbnMuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzIG9mIGJvdGggdGltZXMgYWRkZWQgdG8gZWFjaCBvdGhlci5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZCAtb3ItIHRoZSB0aW1lIHVuaXQgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZCh2YWx1ZTogVGltZVZhbHVlU291cmNlIHwgVGltZSwgdGltZVVuaXQ/OiBzdHJpbmcgfCBUaW1lVW5pdCk6IFRpbWU7XHJcblxyXG4gICAgLy8gQWN0dWFsIGBhZGRgIGltcGxlbWVudGF0aW9uXHJcbiAgICBwdWJsaWMgYWRkKHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UgfCBUaW1lLCB0aW1lVW5pdD86IFRpbWVVbml0U291cmNlKSB7XHJcblxyXG4gICAgICAgIGxldCBhcHByb3hpbWF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGltZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLl9uYW5vc2Vjb25kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aW1lVW5pdCkge1xyXG4gICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWQgPSBUaW1lLmZyb20odmFsdWUsIHRpbWVVbml0KTtcclxuICAgICAgICAgICAgYXBwcm94aW1hdGVkID0gY29udmVydGVkLl9hcHByb3hpbWF0ZWQ7XHJcbiAgICAgICAgICAgIHZhbHVlID0gY29udmVydGVkLl9uYW5vc2Vjb25kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVGltZSh0aGlzLl9uYW5vc2Vjb25kcy5hZGQodmFsdWUpLCBhcHByb3hpbWF0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyB0aW1lIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSB2YWx1ZSBvZiB0aGlzIHRpbWUsIGhvd2V2ZXIgd2l0aCB0aGUgYXBwcm94aW1hdGVkIGZsYWcuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqICAgQXBwcm94aW1hdGVkIHRpbWUgaW4gcmVsYXRpb24gdG8gdGhpcyB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXBwcm94aW1hdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lKHRoaXMuX25hbm9zZWNvbmRzLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpdmlkZXMgdGhlIHZhbHVlIG9mIHRoaXMgdGltZSBieSB0aGUgdmFsdWUgb2YgYW5vdGhlciB0aW1lLiBJZiBlaXRoZXIgYXJlIFthcHByb3hpbWF0aW9uc10oI2lzQXBwcm94aW1hdGVkKSwgdGhlXHJcbiAgICAgKiByZXN1bHQgd2lsbCBhbHNvIGJlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICogICBBIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgbGVuZ3RoIG9mIHRpbWUsIGFjY2VwdGVkIGFzIGEgX3N0cmluZ18gdGhhdCBwYXJzZXMgdG8gYSBudW1iZXIgKGUuZy4gXCIxMDAwXCIgb3JcclxuICAgICAqICAgXCIxZS0xMFwiKSwgYSBbYmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIG9yIGEgX251bWJlcl8gLW9yLSBhbm90aGVyXHJcbiAgICAgKiAgIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgaW5zdGFuY2UgdXNlZCB0byBkaXZpZGUgdGhpcyB0aW1lLlxyXG4gICAgICogQHBhcmFtIHRpbWVVbml0XHJcbiAgICAgKiAgIFRpbWUgdW5pdCB1c2VkIGFzIHNvdXJjZSBmb3IgdGhlIGNvbnZlcnNpb24gb2YgYHZhbHVlYC4gVGhpcyBkZWZhdWx0cyB0byBcIm5hbm9zZWNvbmRcIiBhbmQgaXMgaWdub3JlZCB3aGVuIGFcclxuICAgICAqICAgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3QgaXMgcHJvdmlkZWQuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3Qgd2l0aCB0aGUgdmFsdWUgb2YgdGhpcyB0aW1lIGRpdmlkZWQgYnkgdGhlIHZhbHVlIG9mIHRoZSBvdGhlciB0aW1lLlxyXG4gICAgICogQHRocm93cyBFcnJvclxyXG4gICAgICogICBXaGVuIHRoZSB2YWx1ZSBpcyBpbnZhbGlkIC1vci0gdGhlIHRpbWUgdW5pdCBpcyBpbnZhbGlkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGl2aWRlKHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UgfCBUaW1lLCB0aW1lVW5pdD86IFRpbWVVbml0U291cmNlKTogVGltZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERpdmlkZXMgdGhlIHZhbHVlIG9mIHRoaXMgdGltZSBieSB0aGUgdmFsdWUgb2YgYW5vdGhlciB0aW1lLiBJZiBlaXRoZXIgYXJlIFthcHByb3hpbWF0aW9uc10oI2lzQXBwcm94aW1hdGVkKSwgdGhlXHJcbiAgICAgKiByZXN1bHQgd2lsbCBhbHNvIGJlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICogICBBIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgbGVuZ3RoIG9mIHRpbWUsIGFjY2VwdGVkIGFzIGEgX3N0cmluZ18gdGhhdCBwYXJzZXMgdG8gYSBudW1iZXIgKGUuZy4gXCIxMDAwXCIgb3JcclxuICAgICAqICAgXCIxZS0xMFwiKSwgYSBbYmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIG9yIGEgX251bWJlcl8gLW9yLSBhbm90aGVyXHJcbiAgICAgKiAgIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgaW5zdGFuY2UgdXNlZCB0byBkaXZpZGUgdGhpcyB0aW1lLlxyXG4gICAgICogQHBhcmFtIHRpbWVVbml0XHJcbiAgICAgKiAgIFRpbWUgdW5pdCB1c2VkIGFzIHNvdXJjZSBmb3IgdGhlIGNvbnZlcnNpb24gb2YgYHZhbHVlYC4gVGhpcyBkZWZhdWx0cyB0byBcIm5hbm9zZWNvbmRcIiBhbmQgaXMgaWdub3JlZCB3aGVuIGFcclxuICAgICAqICAgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3QgaXMgcHJvdmlkZWQuIEFjY2VwdHMgcGx1cmFscyBhbmQgY2FzZSB2YXJpYXRpb25zLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IHdpdGggdGhlIHZhbHVlIG9mIHRoaXMgdGltZSBkaXZpZGVkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgb3RoZXIgdGltZS5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZCAtb3ItIHRoZSB0aW1lIHVuaXQgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpdmlkZSh2YWx1ZTogVGltZVZhbHVlU291cmNlIHwgVGltZSwgdGltZVVuaXQ/OiBzdHJpbmcgfCBUaW1lVW5pdCk6IFRpbWU7XHJcblxyXG4gICAgLy8gQWN0dWFsIGBkaXZpZGVgIGltcGxlbWVudGF0aW9uXHJcbiAgICBwdWJsaWMgZGl2aWRlKHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UgfCBUaW1lLCB0aW1lVW5pdD86IFRpbWVVbml0U291cmNlKSB7XHJcblxyXG4gICAgICAgIGxldCBhcHByb3hpbWF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGltZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLl9uYW5vc2Vjb25kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aW1lVW5pdCkge1xyXG4gICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWQgPSBUaW1lLmZyb20odmFsdWUsIHRpbWVVbml0KTtcclxuICAgICAgICAgICAgYXBwcm94aW1hdGVkID0gY29udmVydGVkLl9hcHByb3hpbWF0ZWQ7XHJcbiAgICAgICAgICAgIHZhbHVlID0gY29udmVydGVkLl9uYW5vc2Vjb25kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVGltZSh0aGlzLl9uYW5vc2Vjb25kcy5kaXZpZGVkQnkodmFsdWUpLCBhcHByb3hpbWF0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTXVsdGlwbGllcyB0aGUgdmFsdWUgb2YgdGhpcyB0aW1lIHdpdGggdGhlIHZhbHVlIG9mIGFub3RoZXIgdGltZS4gSWYgZWl0aGVyIGFyZVxyXG4gICAgICogW2FwcHJveGltYXRpb25zXSgjaXNBcHByb3hpbWF0ZWQpLCB0aGUgcmVzdWx0IHdpbGwgYWxzbyBiZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqICAgQSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGxlbmd0aCBvZiB0aW1lLCBhY2NlcHRlZCBhcyBhIF9zdHJpbmdfIHRoYXQgcGFyc2VzIHRvIGEgbnVtYmVyIChlLmcuIFwiMTAwMFwiIG9yXHJcbiAgICAgKiAgIFwiMWUtMTBcIiksIGEgW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSBvciBhIF9udW1iZXJfIC1vci0gYW5vdGhlclxyXG4gICAgICogICBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIGluc3RhbmNlIHVzZWQgdG8gYmUgbXVsdGlwbGllZCBieSB0aGlzIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gdGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHVzZWQgYXMgc291cmNlIGZvciB0aGUgY29udmVyc2lvbiBvZiBgdmFsdWVgLiBUaGlzIGRlZmF1bHRzIHRvIFwibmFub3NlY29uZFwiIGFuZCBpcyBpZ25vcmVkIHdoZW4gYVxyXG4gICAgICogICBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCBpcyBwcm92aWRlZC5cclxuICAgICAqIEByZXR1cm5cclxuICAgICAqICAgQSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCB3aXRoIHRoZSB2YWx1ZSBvZiBib3RoIHRpbWVzIG11bHRpcGxpZWQgYnkgZWFjaCBvdGhlci5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZCAtb3ItIHRoZSB0aW1lIHVuaXQgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG11bHRpcGx5KHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UgfCBUaW1lLCB0aW1lVW5pdD86IFRpbWVVbml0U291cmNlKTogVGltZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE11bHRpcGxpZXMgdGhlIHZhbHVlIG9mIHRoaXMgdGltZSB3aXRoIHRoZSB2YWx1ZSBvZiBhbm90aGVyIHRpbWUuIElmIGVpdGhlciBhcmVcclxuICAgICAqIFthcHByb3hpbWF0aW9uc10oI2lzQXBwcm94aW1hdGVkKSwgdGhlIHJlc3VsdCB3aWxsIGFsc28gYmUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKiAgIEEgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBsZW5ndGggb2YgdGltZSwgYWNjZXB0ZWQgYXMgYSBfc3RyaW5nXyB0aGF0IHBhcnNlcyB0byBhIG51bWJlciAoZS5nLiBcIjEwMDBcIiBvclxyXG4gICAgICogICBcIjFlLTEwXCIpLCBhIFtiaWcgZGVjaW1hbF0oaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZGVjaW1hbC5qcykgb3IgYSBfbnVtYmVyXyAtb3ItIGFub3RoZXJcclxuICAgICAqICAgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBpbnN0YW5jZSB1c2VkIHRvIGJlIG11bHRpcGxpZWQgYnkgdGhpcyB0aW1lLlxyXG4gICAgICogQHBhcmFtIHRpbWVVbml0XHJcbiAgICAgKiAgIFRpbWUgdW5pdCB1c2VkIGFzIHNvdXJjZSBmb3IgdGhlIGNvbnZlcnNpb24gb2YgYHZhbHVlYC4gVGhpcyBkZWZhdWx0cyB0byBcIm5hbm9zZWNvbmRcIiBhbmQgaXMgaWdub3JlZCB3aGVuIGFcclxuICAgICAqICAgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3QgaXMgcHJvdmlkZWQuIEFjY2VwdHMgcGx1cmFscyBhbmQgY2FzZSB2YXJpYXRpb25zLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IHdpdGggdGhlIHZhbHVlIG9mIGJvdGggdGltZXMgbXVsdGlwbGllZCBieSBlYWNoIG90aGVyLlxyXG4gICAgICogQHRocm93cyBFcnJvclxyXG4gICAgICogICBXaGVuIHRoZSB2YWx1ZSBpcyBpbnZhbGlkIC1vci0gdGhlIHRpbWUgdW5pdCBpcyBpbnZhbGlkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbXVsdGlwbHkodmFsdWU6IFRpbWVWYWx1ZVNvdXJjZSB8IFRpbWUsIHRpbWVVbml0Pzogc3RyaW5nIHwgVGltZVVuaXQpOiBUaW1lO1xyXG5cclxuICAgIC8vIEFjdHVhbCBgbXVsdGlwbHlgIGltcGxlbWVudGF0aW9uXHJcbiAgICBwdWJsaWMgbXVsdGlwbHkodmFsdWU6IFRpbWVWYWx1ZVNvdXJjZSB8IFRpbWUsIHRpbWVVbml0PzogVGltZVVuaXRTb3VyY2UpIHtcclxuXHJcbiAgICAgICAgbGV0IGFwcHJveGltYXRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUaW1lKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuX25hbm9zZWNvbmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRpbWVVbml0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnRlZCA9IFRpbWUuZnJvbSh2YWx1ZSwgdGltZVVuaXQpO1xyXG4gICAgICAgICAgICBhcHByb3hpbWF0ZWQgPSBjb252ZXJ0ZWQuX2FwcHJveGltYXRlZDtcclxuICAgICAgICAgICAgdmFsdWUgPSBjb252ZXJ0ZWQuX25hbm9zZWNvbmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lKHRoaXMuX25hbm9zZWNvbmRzLnRpbWVzKHZhbHVlKSwgYXBwcm94aW1hdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnRyYWN0cyB0aGUgdmFsdWUgb2YgYW5vdGhlciB0aW1lIGZyb20gdGhlIHZhbHVlIG9mIHRoaXMgdGltZS4gSWYgZWl0aGVyIGFyZSBbYXBwcm94aW1hdGlvbnNdKCNpc0FwcHJveGltYXRlZCksXHJcbiAgICAgKiB0aGUgcmVzdWx0IHdpbGwgYWxzbyBiZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqICAgQSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGxlbmd0aCBvZiB0aW1lLCBhY2NlcHRlZCBhcyBhIF9zdHJpbmdfIHRoYXQgcGFyc2VzIHRvIGEgbnVtYmVyIChlLmcuIFwiMTAwMFwiIG9yXHJcbiAgICAgKiAgIFwiMWUtMTBcIiksIGEgW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSBvciBhIF9udW1iZXJfIC1vci0gYW5vdGhlclxyXG4gICAgICogICBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIGluc3RhbmNlIHVzZWQgdG8gYmUgc3VidHJhY3RlZCBmcm9tIHRoaXMgdGltZS5cclxuICAgICAqIEBwYXJhbSB0aW1lVW5pdFxyXG4gICAgICogICBUaW1lIHVuaXQgdXNlZCBhcyBzb3VyY2UgZm9yIHRoZSBjb252ZXJzaW9uIG9mIGB2YWx1ZWAuIFRoaXMgZGVmYXVsdHMgdG8gXCJuYW5vc2Vjb25kXCIgYW5kIGlzIGlnbm9yZWQgd2hlbiBhXHJcbiAgICAgKiAgIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGlzIHByb3ZpZGVkLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IHdpdGggdGhlIHZhbHVlIG9mIHRoaXMgdGltZSBkaXZpZGVkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgb3RoZXIgdGltZS5cclxuICAgICAqIEB0aHJvd3MgRXJyb3JcclxuICAgICAqICAgV2hlbiB0aGUgdmFsdWUgaXMgaW52YWxpZCAtb3ItIHRoZSB0aW1lIHVuaXQgaXMgaW52YWxpZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN1YnRyYWN0KHZhbHVlOiBUaW1lVmFsdWVTb3VyY2UgfCBUaW1lLCB0aW1lVW5pdD86IFRpbWVVbml0U291cmNlKTogVGltZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnRyYWN0cyB0aGUgdmFsdWUgb2YgYW5vdGhlciB0aW1lIGZyb20gdGhlIHZhbHVlIG9mIHRoaXMgdGltZS4gSWYgZWl0aGVyIGFyZSBbYXBwcm94aW1hdGlvbnNdKCNpc0FwcHJveGltYXRlZCksXHJcbiAgICAgKiB0aGUgcmVzdWx0IHdpbGwgYWxzbyBiZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqICAgQSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGxlbmd0aCBvZiB0aW1lLCBhY2NlcHRlZCBhcyBhIF9zdHJpbmdfIHRoYXQgcGFyc2VzIHRvIGEgbnVtYmVyIChlLmcuIFwiMTAwMFwiIG9yXHJcbiAgICAgKiAgIFwiMWUtMTBcIiksIGEgW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSBvciBhIF9udW1iZXJfIC1vci0gYW5vdGhlclxyXG4gICAgICogICBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIGluc3RhbmNlIHVzZWQgdG8gYmUgc3VidHJhY3RlZCBmcm9tIHRoaXMgdGltZS5cclxuICAgICAqIEBwYXJhbSB0aW1lVW5pdFxyXG4gICAgICogICBUaW1lIHVuaXQgdXNlZCBhcyBzb3VyY2UgZm9yIHRoZSBjb252ZXJzaW9uIG9mIGB2YWx1ZWAuIFRoaXMgZGVmYXVsdHMgdG8gXCJuYW5vc2Vjb25kXCIgYW5kIGlzIGlnbm9yZWQgd2hlbiBhXHJcbiAgICAgKiAgIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGlzIHByb3ZpZGVkLiBBY2NlcHRzIHBsdXJhbHMgYW5kIGNhc2UgdmFyaWF0aW9ucy5cclxuICAgICAqIEByZXR1cm5cclxuICAgICAqICAgQSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCB3aXRoIHRoZSB2YWx1ZSBvZiB0aGlzIHRpbWUgZGl2aWRlZCBieSB0aGUgdmFsdWUgb2YgdGhlIG90aGVyIHRpbWUuXHJcbiAgICAgKiBAdGhyb3dzIEVycm9yXHJcbiAgICAgKiAgIFdoZW4gdGhlIHZhbHVlIGlzIGludmFsaWQgLW9yLSB0aGUgdGltZSB1bml0IGlzIGludmFsaWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdWJ0cmFjdCh2YWx1ZTogVGltZVZhbHVlU291cmNlIHwgVGltZSwgdGltZVVuaXQ/OiBzdHJpbmcgfCBUaW1lVW5pdCk6IFRpbWU7XHJcblxyXG4gICAgLy8gQWN0dWFsIGBzdWJ0cmFjdGAgaW1wbGVtZW50YXRpb25cclxuICAgIHB1YmxpYyBzdWJ0cmFjdCh2YWx1ZTogVGltZVZhbHVlU291cmNlIHwgVGltZSwgdGltZVVuaXQ/OiBUaW1lVW5pdFNvdXJjZSkgIHtcclxuXHJcbiAgICAgICAgbGV0IGFwcHJveGltYXRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUaW1lKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuX25hbm9zZWNvbmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRpbWVVbml0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnRlZCA9IFRpbWUuZnJvbSh2YWx1ZSwgdGltZVVuaXQpO1xyXG4gICAgICAgICAgICBhcHByb3hpbWF0ZWQgPSBjb252ZXJ0ZWQuX2FwcHJveGltYXRlZDtcclxuICAgICAgICAgICAgdmFsdWUgPSBjb252ZXJ0ZWQuX25hbm9zZWNvbmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lKHRoaXMuX25hbm9zZWNvbmRzLm1pbnVzKHZhbHVlKSwgYXBwcm94aW1hdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoZSB2YWx1ZSBvZiB0aGlzIG5hbm9zZWNvbmQtYmFzZWQgdGltZSBpbnRvIGFueSBvdGhlciB0aW1lIHVuaXQuXHJcbiAgICAgKlxyXG4gICAgICogRm9yIHRoZSBbYmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIHJlcHJlc2VudGF0aW9uLCBzZWUgW3RvQmlnXSgjdG9iaWcpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lVW5pdFxyXG4gICAgICogICBUaW1lIHVuaXQgdXNlZCBhcyB0YXJnZXQgZm9yIHRoZSBjb252ZXJzaW9uLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBOdW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb252ZXJ0ZWQgdGltZSwgbWVhc3VyZWQgdXNpbmcgdGhlIGdpdmVuIHRpbWUgdW5pdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvKHRpbWVVbml0OiBUaW1lVW5pdFNvdXJjZSk6IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoZSB2YWx1ZSBvZiB0aGlzIG5hbm9zZWNvbmQtYmFzZWQgdGltZSBpbnRvIGFueSBvdGhlciB0aW1lIHVuaXQuXHJcbiAgICAgKlxyXG4gICAgICogRm9yIHRoZSBbYmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIHJlcHJlc2VudGF0aW9uLCBzZWUgW3RvQmlnXSgjdG9iaWcpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lVW5pdFxyXG4gICAgICogICBUaW1lIHVuaXQgdXNlZCBhcyB0YXJnZXQgZm9yIHRoZSBjb252ZXJzaW9uLiBBY2NlcHRzIHBsdXJhbHMgYW5kIGNhc2UgdmFyaWF0aW9ucy5cclxuICAgICAqIEByZXR1cm5cclxuICAgICAqICAgTnVtZXJpYyByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29udmVydGVkIHRpbWUsIG1lYXN1cmVkIHVzaW5nIHRoZSBnaXZlbiB0aW1lIHVuaXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0byh0aW1lVW5pdDogc3RyaW5nIHwgVGltZVVuaXQpOiBudW1iZXI7XHJcblxyXG4gICAgLy8gQWN0dWFsIGB0b2AgaW1wbGVtZW50YXRpb25cclxuICAgIHB1YmxpYyB0byh0aW1lVW5pdDogVGltZVVuaXRTb3VyY2UpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b0JpZyh0aW1lVW5pdCkudG9OdW1iZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoZSB2YWx1ZSBvZiB0aGlzIG5hbm9zZWNvbmQtYmFzZWQgdGltZSBpbnRvIGFueSBvdGhlciB0aW1lIHVuaXQsIHVzaW5nXHJcbiAgICAgKiBbYmlnIGRlY2ltYWxzXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHVzZWQgYXMgdGFyZ2V0IGZvciB0aGUgY29udmVyc2lvbi5cclxuICAgICAqIEByZXR1cm5cclxuICAgICAqICAgW0JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29udmVydGVkIHRpbWUsIG1lYXN1cmVkIHVzaW5nXHJcbiAgICAgKiAgIHRoZSAgIGdpdmVuIHRpbWUgdW5pdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvQmlnKHRpbWVVbml0OiBUaW1lVW5pdFNvdXJjZSk6IERlY2ltYWw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyB0aGUgdmFsdWUgb2YgdGhpcyBuYW5vc2Vjb25kLWJhc2VkIHRpbWUgaW50byBhbnkgb3RoZXIgdGltZSB1bml0LCB1c2luZ1xyXG4gICAgICogW2JpZyBkZWNpbWFsc10oaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZGVjaW1hbC5qcykuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRpbWVVbml0XHJcbiAgICAgKiAgIFRpbWUgdW5pdCB1c2VkIGFzIHRhcmdldCBmb3IgdGhlIGNvbnZlcnNpb24uIEFjY2VwdHMgcGx1cmFscyBhbmQgY2FyZSB2YXJpYXRpb25zLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBbQmlnIGRlY2ltYWxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2RlY2ltYWwuanMpIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb252ZXJ0ZWQgdGltZSwgbWVhc3VyZWQgdXNpbmdcclxuICAgICAqICAgdGhlICAgZ2l2ZW4gdGltZSB1bml0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9CaWcodGltZVVuaXQ6IHN0cmluZyB8IFRpbWVVbml0KTogRGVjaW1hbDtcclxuXHJcbiAgICAvLyBBY3R1YWwgYHRvQmlnYCBpbXBsZW1lbnRhdGlvblxyXG4gICAgcHVibGljIHRvQmlnKHRpbWVVbml0OiBUaW1lVW5pdFNvdXJjZSkge1xyXG5cclxuICAgICAgICB0aW1lVW5pdCA9IHRpbWVVbml0RnJvbVNvdXJjZSh0aW1lVW5pdCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbm9zZWNvbmRzLmRpdmlkZWRCeSh0aW1lVW5pdC5mYWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIG9mIHZhbHVlIG9mIHRoaXMgdGltZSwgaW4gbmFub3NlY29uZHMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBOdW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0aW1lIGxlbmd0aCBwbHVzIHRoZSBzeW1ib2wgXCJuc1wiLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuX2FwcHJveGltYXRlZCA/IFwi4omIXCIgOiBcIlwifSR7dGhpcy5fbmFub3NlY29uZHMudG9TdHJpbmcoKX0gbnNgO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQSB0aW1lIHVuaXQgaXMgYW55IHBhcnRpY3VsYXIgdGltZSBpbnRlcnZhbCwgdXNlZCBhcyBhIHN0YW5kYXJkIHdheSBvZiBtZWFzdXJpbmcgb3IgZXhwcmVzc2luZyBkdXJhdGlvbi5cclxuICpcclxuICogRXh0ZW5kaW5nIGZyb20gaXRzIHByZWN1cnNvciwgW0Jhc2VUaW1lVW5pdF0oX2luZGV4Xy5iYXNldGltZXVuaXQuaHRtbCksIGFuIG9iamVjdCBvZiB0aGlzIHR5cGUgY29udGFpbnMgYm90aCB0aGVcclxuICogbWF0aGVtYXRpY2FsIGFuZCBsaW5ndWlzdGljIHByb3BlcnRpZXMgb2YgdGhlIHRpbWUgdW5pdCBpdCBkZXNjcmliZXMuXHJcbiAqXHJcbiAqIC0tLVxyXG4gKlxyXG4gKiBTZWUgW1RpbWVVbml0RGF0YWJhc2VdKF9pbmRleF8udGltZXVuaXRkYXRhYmFzZS5odG1sKSBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aW1lIHVuaXRzLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lVW5pdCBleHRlbmRzIEJhc2VUaW1lVW5pdCB7XHJcblxyXG4gICAgLyoqIERldGVybWluZXMgd2hldGhlciB0aGlzIHRpbWUgdW5pdCBpcyBhbiBhcHByb3hpbWF0aW9uLiAqL1xyXG4gICAgYXBwcm94aW1hdGVkPzogYm9vbGVhbjtcclxuXHJcbiAgICAvKiogTXVsdGlwbGljYXRpdmUgZmFjdG9yIChjb2VmZmljaWVudCkgb2YgdGhpcyB0aW1lIHVuaXQgaW4gcmVsYXRpb24gdG8gYSBuYW5vc2Vjb25kLiAqL1xyXG4gICAgZmFjdG9yOiBEZWNpbWFsO1xyXG59XHJcblxyXG4vKipcclxuICogQSBjZW50cmFsaXplZCBjYXRhbG9nIG9mIFt0aW1lIHVuaXRdKF9pbmRleF8udGltZXVuaXQuaHRtbCkgZGVmaW5pdGlvbnMuXHJcbiAqXHJcbiAqIFRoaXMgaW50ZXJmYWNlIGlzIGEgY29sbGVjdGlvbiBvZiBzdW1tYXJpZXMgZXh0cmFjdGVkIGZyb20gdGhlIHdlYiwgd2l0aCBpbmZvcm1hdGlvbiBmb3IgdGhlIHRpbWUgdW5pdHMgYXZhaWxhYmxlIGluXHJcbiAqIHRpbWVjb3VudC4gSXQgd2FzIGNyZWF0ZWQgd2l0aCB0aGUgaW50ZW50IHRvIGVuY29yYWdlIGl0cyB1c2VycyB0byBleHBsb3JlIGFuZCBwbGF5IHdpdGggdGltZSBjb252ZXJzaW9ucy5cclxuICpcclxuICogQHR5cGVwYXJhbSBUXHJcbiAqICAgVGhpcyB0eXBlIHBhcmFtZXRlciBkZWZpbmVzIHdoaWNoIGtpbmQgb2YgdGltZSB1bml0IGludGVyZmFjZSBpdHMgb2JqZWN0IGlzIGRlc2NyaWJpbmcuIEl0IG1heSBiZSBhXHJcbiAqICAgW2Jhc2UgdGltZSB1bml0XShfaW5kZXhfLmJhc2V0aW1ldW5pdC5odG1sKSB3aGljaCBjb250YWlucyBvbmx5IGxpbmd1aXN0aWMgcHJvcGVydGllcyBvciBhXHJcbiAqICAgW3RpbWUgdW5pdF0oX2luZGV4Xy50aW1ldW5pdC5odG1sKSB3aXRoIGFwcHJveGltYXRpb24gZmxhZyBhbmQgbmFub3NlY29uZCBjb2VmZmljaWVudHMuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVVbml0RGF0YWJhc2U8VCBleHRlbmRzIEJhc2VUaW1lVW5pdCA9IEJhc2VUaW1lVW5pdD4ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIE1vb24ncyBvcmJpdCBhcHByb3hpbWF0ZXMgYW4gZWxsaXBzZSByYXRoZXIgdGhhbiBhIGNpcmNsZS4gSG93ZXZlciwgdGhlIG9yaWVudGF0aW9uIChhcyB3ZWxsIGFzIHRoZSBzaGFwZSkgb2ZcclxuICAgICAqIHRoaXMgb3JiaXQgaXMgbm90IGZpeGVkLiBJbiBwYXJ0aWN1bGFyLCB0aGUgcG9zaXRpb24gb2YgdGhlIGV4dHJlbWUgcG9pbnRzICh0aGUgbGluZSBvZiB0aGUgYXBzaWRlczogKipwZXJpZ2VlKipcclxuICAgICAqIGFuZCAqKmFwb2dlZSoqKSwgcm90YXRlcyBvbmNlICgqKmFwc2lkYWwgcHJlY2Vzc2lvbioqKSBpbiBhYm91dCAzLDIzMyBkYXlzICg4Ljg1IHllYXJzKS4gSXQgdGFrZXMgdGhlIE1vb24gbG9uZ2VyXHJcbiAgICAgKiB0byByZXR1cm4gdG8gdGhlIHNhbWUgYXBzaXMgYmVjYXVzZSBpdCBoYXMgbW92ZWQgYWhlYWQgZHVyaW5nIG9uZSByZXZvbHV0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgbG9uZ2VyIHBlcmlvZCBpcyBjYWxsZWQgdGhlICoqYW5vbWFsaXN0aWMgbW9udGgqKiBhbmQgaGFzIGFuIGF2ZXJhZ2UgbGVuZ3RoIG9mXHJcbiAgICAgKiBfMjcgZGF5cywgMTMgaG91cnMsIDE4IG1pbnV0ZXMsIDMzLjIgc2Vjb25kc18gb3IgYDIzODA3MTMxMjAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgYW5vbWFsaXN0aWNNb250aDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSAqKmFub21hbGlzdGljIHllYXIqKiBpcyB0aGUgdGltZSB0YWtlbiBmb3IgdGhlIEVhcnRoIHRvIGNvbXBsZXRlIG9uZSByZXZvbHV0aW9uIHdpdGggcmVzcGVjdCB0byBpdHMgYXBzaWRlcy5cclxuICAgICAqIEl0IGlzIHVzdWFsbHkgZGVmaW5lZCBhcyB0aGUgdGltZSBiZXR3ZWVuICoqcGVyaWhlbGlvbioqIHBhc3NhZ2VzLlxyXG4gICAgICpcclxuICAgICAqIEl0cyBhdmVyYWdlIGR1cmF0aW9uIGlzIF8zNjUgZGF5cywgNiBob3VycywgMTMgbWludXRlcywgNTIuNiBzZWNvbmRzXyBvciBgMzE1NTg0MzI1NTA0MDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgYW5vbWFsaXN0aWNZZWFyOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gKiphdHRvc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzAuMDAwMDAwMDAwMDAwMDAwMDAxIHNlY29uZF8gb3IgYDAuMDAwMDAwMDAxIG5hbm9zZWNvbmRgLlxyXG4gICAgICpcclxuICAgICAqIEZvciBjb250ZXh0LCBhbiBhdHRvc2Vjb25kIGlzIHRvIGEgc2Vjb25kIHdoYXQgYSBzZWNvbmQgaXMgdG8gYWJvdXQgMzEuNzEgYmlsbGlvbiB5ZWFycy5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGF0dG9zZWNvbmQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqYmllbm5pdW0qKiAocGx1cmFsIF9iaWVubmlhXykgaXMgYSBwZXJpb2Qgb2YgXzIgeWVhcnNfIG9yIGAzMTUzNjAwMDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIFRoZSB3b3JkIGlzIGJvcnJvd2VkIGZyb20gdGhlIExhdGluIF9iaWVubml1bV8sIGZyb20gX2JpLV8gKG9jY3VyaW5nIHR3aWNlKSArIF9hbm51c18gKHllYXIpLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgYmllbm5pdW06IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqY2VudHVyeSoqIGlzIGEgcGVyaW9kIG9mIF8xMDAgeWVhcnNfIG9yIGAzMTUzNjAwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBDZW50dXJpZXMgYXJlIG51bWJlcmVkIG9yZGluYWxseSBpbiBFbmdsaXNoIGFuZCBtYW55IG90aGVyIGxhbmd1YWdlcy4gQWNjb3JkaW5nIHRvIHRoZSBzdHJpY3QgY29uc3RydWN0aW9uIG9mIHRoZVxyXG4gICAgICogR3JlZ29yaWFuIGNhbGVuZGFyLCB0aGUgMcui4bWXIGNlbnR1cnkgYmVnYW4gd2l0aCAxIEFEIGFuZCBlbmRlZCB3aXRoIDEwMCBBRCwgd2l0aCB0aGUgc2FtZSBwYXR0ZXJuIGNvbnRpbnVpbmdcclxuICAgICAqIG9ud2FyZC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGNlbnR1cnk6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbGlhcyBmb3IgYSBbZ2FsYWN0aWMgeWVhcl0oI2dhbGFjdGljeWVhcikuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgZXF1aXZhbGVudCwgaW4gYXZlcmFnZSwgdG8gXzIzNyw1IG1pbGxpb24geWVhcnNfIG9yIGA3NDg5ODAwMDAwMDAwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGNvc21pY1llYXI6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqZGF5KiogaXMgYXBwcm94aW1hdGVseSB0aGUgcGVyaW9kIG9mIHRpbWUgZHVyaW5nIHdoaWNoIHRoZSBFYXJ0aCBjb21wbGV0ZXMgb25lIHJvdGF0aW9uIHdpdGggcmVzcGVjdCB0byB0aGVcclxuICAgICAqIFN1biAoYWthIFtzb2xhciBkYXldKCNzb2xhcmRheSkpLiBJdCBpcyBjb21tb25seSBkZXNpZ25hdGVkIGFzIGEgcGVyaW9kIG9mIF8yNCBob3Vyc18gb3JcclxuICAgICAqIGA4NjQwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBkYXk6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqZGVjYWRlKiogaXMgYSBwZXJpb2Qgb2YgXzEwIHllYXJzXyBvciBgMzE1MzYwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgd29yZCBpcyBkZXJpdmVkIGZyb20gdGhlIEFuY2llbnQgR3JlZWs6IM60zrXOus6sz4IgKGRla2FzKSwgd2hpY2ggbWVhbnMgYSBncm91cCBvZiB0ZW4uXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBkZWNhZGU6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqZHJhY29uaWMgbW9udGgqKiBvciBbbm9kaWNhbCBtb250aF0oI25vZGljYWxtb250aCkgaXMgdGhlIGF2ZXJhZ2UgaW50ZXJ2YWwgYmV0d2VlbiB0d28gc3VjY2Vzc2l2ZSB0cmFuc2l0cyBvZlxyXG4gICAgICogdGhlIE1vb24gdGhyb3VnaCB0aGUgc2FtZSBub2RlLiBCZWNhdXNlIG9mIHRoZSB0b3JxdWUgZXhlcnRlZCBieSB0aGUgU3VuJ3MgZ3Jhdml0eSBvbiB0aGUgYW5ndWxhciBtb21lbnR1bSBvZiB0aGVcclxuICAgICAqIEVhcnRo4oCTTW9vbiBzeXN0ZW0sIHRoZSBwbGFuZSBvZiB0aGUgTW9vbidzIG9yYml0IGdyYWR1YWxseSByb3RhdGVzIHdlc3R3YXJkLCB3aGljaCBtZWFucyB0aGUgbm9kZXMgZ3JhZHVhbGx5XHJcbiAgICAgKiByb3RhdGUgYXJvdW5kIEVhcnRoLlxyXG4gICAgICpcclxuICAgICAqIEFzIGEgcmVzdWx0LCB0aGUgdGltZSBpdCB0YWtlcyB0aGUgTW9vbiB0byByZXR1cm4gdG8gdGhlIHNhbWUgbm9kZSBpcyBzaG9ydGVyIHRoYW4gYVxyXG4gICAgICogW3NpZGVyZWFsIG1vbnRoXSgjc2lkZXJlYWxtb250aCksIHdpdGggYW4gYXZlcmFnZSBkdXJhdGlvbiBvZiBfMjcgZGF5cywgNSBob3VycywgNSBtaW51dGVzLCAzNS44IHNlY29uZHNfIG9yXHJcbiAgICAgKiBgMjM1MTEzNTgwODAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBkcmFjb25pY01vbnRoOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlICoqZHJhY29uaWMgeWVhcioqIG9yIFtlY2xpcHRpYyB5ZWFyXSgjZWNsaXB0aWN5ZWFyKSBpcyB0aGUgdGltZSB0YWtlbiBmb3IgdGhlIFN1biAoYXMgc2VlbiBmcm9tIHRoZSBFYXJ0aCkgdG9cclxuICAgICAqIGNvbXBsZXRlIG9uZSByZXZvbHV0aW9uIHdpdGggcmVzcGVjdCB0byB0aGUgc2FtZSBsdW5hciBub2RlLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBhdmVyYWdlIGR1cmF0aW9uIG9mIHRoZSBlY2xpcHNlIHllYXIgaXMgXzM0NiBkYXlzLCAxNCBob3VycywgNTIgbWludXRlcywgNTQgc2Vjb25kc18gb3JcclxuICAgICAqIGAyOTk0Nzk3NDU1NjI5MDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBkcmFjb25pY1llYXI6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbGlhcyBmb3IgYSBbZHJhY29uaWMgeWVhcl0oI2RyYWNvbmljeWVhcikuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgZXF1aXZhbGVudCwgaW4gYXZlcmFnZSwgdG8gXzM0NiBkYXlzLCAxNCBob3VycywgNTIgbWludXRlcywgNTQgc2Vjb25kc18gb3IgYDI5OTQ3OTc0NTU2MjkwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGVjbGlwdGljWWVhcjogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuICoqZXhhc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzEwMDAwMDAwMDAwMDAwMDAwMDAgc2Vjb25kc18gb3JcclxuICAgICAqIGAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJlZml4IF9leGFfIG1lYW5zIDEwwrnigbguXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBleGFzZWNvbmQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiAqKmV4YXNlY29uZCoqIGlzIGEgU0kgdW5pdCBvZiB0aW1lIGVxdWFsIHRvIF8xMTUyOTIxNTA0NjA2ODQ2OTc2IHNlY29uZHNfIG9yXHJcbiAgICAgKiBgMTE1MjkyMTUwNDYwNjg0Njk3NjAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfZXhiaV8gbWVhbnMgMuKBtuKBsC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGV4YmlzZWNvbmQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqZmVtdG9zZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byBfMC4wMDAwMDAwMDAwMDAwMDEgc2Vjb25kXyBvciBgMC4wMDAwMDEgbmFub3NlY29uZGAuXHJcbiAgICAgKlxyXG4gICAgICogRm9yIGNvbnRleHQsIGEgZmVtdG9zZWNvbmQgaXMgdG8gYSBzZWNvbmQgYXMgYSBzZWNvbmQgaXMgdG8gYWJvdXQgMzEuNzEgbWlsbGlvbiB5ZWFycy5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGZlbXRvc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBmb3J0bmlnaHQgaXMgYSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzE0IGRheXNfIG9yIGAxMjA5NjAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgd29yZCBkZXJpdmVzIGZyb20gdGhlIE9sZCBFbmdsaXNoOiBfZsSTb3dlcnR5bmUgbmlodF8sIG1lYW5pbmcgZm91cnRlZW4gbmlnaHRzLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgZm9ydG5pZ2h0OiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlICoqZ2FsYWN0aWMgeWVhcioqLCBhbHNvIGtub3duIGFzIFtjb3NtaWMgeWVhcl0oI2Nvc21pY3llYXIpLCBpcyB0aGUgZHVyYXRpb24gb2YgdGltZSByZXF1aXJlZCBmb3IgdGhlIFN1biB0b1xyXG4gICAgICogb3JiaXQgb25jZSBhcm91bmQgdGhlIGNlbnRlciBvZiB0aGUgTWlsa3kgV2F5IEdhbGF4eS5cclxuICAgICAqXHJcbiAgICAgKiBFc3RpbWF0ZXMgb2YgdGhlIGxlbmd0aCBvZiBvbmUgb3JiaXQgcmFuZ2UgZnJvbSAyMjUgdG8gMjUwIG1pbGxpb24gdGVycmVzdHJpYWwgeWVhcnMsIGF2ZXJhZ2luZyBfMjM3LDUgbWlsbGlvblxyXG4gICAgICogeWVhcnNfIG9yIGA3NDg5ODAwMDAwMDAwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGdhbGFjdGljWWVhcjogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsaWFzIGZvciBhIFt5ZWFyXSgjeWVhcikuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgZXF1aXZhbGVudCB0byBfMzY1IGRheXMsIDUgaG91cnMsIDQ5IG1pbnV0ZXMsIDEyIHNlY29uZHNfIG9yIGAzMTU1Njk1MjAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBncmVnb3JpYW5ZZWFyOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKmdpYmlzZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byBfMTA3Mzc0MTgyNCBzZWNvbmRzXyBvciBgMTA3Mzc0MTgyNDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfZ2liaV8gbWVhbnMgMsKz4oGwLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgZ2liaXNlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKipnaWdhc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gMTAwMDAwMDAwMCBzZWNvbmRzXyBvciBgMTAwMDAwMDAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfZ2lnYV8gbWVhbnMgMTDigbkuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBnaWdhc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gKipob3VyKiogaXMgYSB1bml0IG9mIHRpbWUgY29udmVudGlvbmFsbHkgcmVja29uZWQgYXMgMeKBhDI0IG9mIGEgZGF5IGFuZCBzY2llbnRpZmljYWxseSByZWNrb25lZCBpbmJldHdlZW5cclxuICAgICAqIDM1OTkgYW5kIDM2MDEgc2Vjb25kcywgZGVwZW5kaW5nIG9uIHNwZWNpYWwgY29uZGl0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBGb3IgcHJhY3RpY2FsIHB1cnBvc2VzLCBhbiBob3VyIGlzIF8zNjAwIHNlY29uZHNfIG9yIGAzNjAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGhvdXI6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqamlmZnkqKiBpcyB0aGUgYW1vdW50IG9mIHRpbWUgbGlnaHQgdGFrZXMgdG8gdHJhdmVsIG9uZSBfZmVybWlfICh3aGljaCBpcyBhYm91dCB0aGUgc2l6ZSBvZiBhIG51Y2xlb24pIGluIGFcclxuICAgICAqIHZhY3V1bS5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyBlcXVpdmFsZW50IHRvIGAwLjAwMDAwMDAwMDAwMDAwMyBuYW5vc2Vjb25kYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGppZmZ5OiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW4gYXN0cm9ub215LCBhICoqSnVsaWFuIHllYXIqKiBpcyBhIHVuaXQgb2YgbWVhc3VyZW1lbnQgb2YgdGltZSBkZWZpbmVkIGFzIGV4YWN0bHkgXzM2NS4yNSBkYXlzXyBvZlxyXG4gICAgICogXzg2NDAwIHNlY29uZHNfIGVhY2gsIG9yIGA4NjQwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIF9KdWxpYW4gY2FsZW5kYXJfIHdoaWNoIGhhcyBzdGFydGVkIG9uIGRpZmZlcmVudCBkYXlzLCBhdCBkaWZmZXJlbnQgdGltZXMsIGluIGRpZmZlcmVudCBjb3VudHJpZXMgaXMgZXF1YWwgdG9cclxuICAgICAqIGVpdGhlciAzNjUgb3IgMzY2IGRheXMuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBqdWxpYW5ZZWFyOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKmtpYmlzZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byBfMTAyNCBzZWNvbmRzXyBvciBgMTAyNDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfa2liaV8gbWVhbnMgMsK54oGwLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkga2liaXNlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKipraWxvc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzEwMDAgc2Vjb25kc18gb3IgYDEwMDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwcmVmaXggX2tpbG9fIG1lYW5zIDEwwrMuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBraWxvc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWxpYXMgZm9yIGEgW21pbGxlbml1bV0oI21pbGxlbml1bSkuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgZXF1aXZhbGVudCB0byBfMTAwMCB5ZWFyc18gb3IgYDMxNTM2MDAwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGtpbG95ZWFyOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKmxlYXAgeWVhcioqIChhbHNvIGtub3duIGFzIGFuIGludGVyY2FsYXJ5IHllYXIgb3IgYmlzc2V4dGlsZSB5ZWFyKSBpcyBhIGNhbGVuZGFyIHllYXIgY29udGFpbmluZyBvbmVcclxuICAgICAqIGFkZGl0aW9uYWwgZGF5IGFkZGVkIHRvIGtlZXAgdGhlIGNhbGVuZGFyIHllYXIgc3luY2hyb25pemVkIHdpdGggdGhlIF9hc3Ryb25vbWljYWxfIG9yIF9zZWFzb25hbCB5ZWFyXy5cclxuICAgICAqXHJcbiAgICAgKiBFYWNoIGxlYXAgeWVhciBoYXMgXzM2NiBkYXlzXyBvciBgMzE2MjI0MDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgbGVhcFllYXI6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbGlhcyBmb3IgYSBbZHJhY29uaWMgbW9udGhdKCNkcmFjb25pY21vbnRoKS5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyBlcXVpdmFsZW50LCBpbiBhdmVyYWdlLCB0byBfMjcgZGF5cywgNSBob3VycywgNSBtaW51dGVzLCAzNS44IHNlY29uZHNfIG9yIGAyMzUxMTM1ODA4MDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IG5vZGljYWxNb250aDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKipub24tbGVhcCB5ZWFyKiogb2NjdXJzIGV2ZXJ5IHRocmVlIG91dCBvZiBmb3VyIHllYXJzLCB0aGUgcmVtYWluaW5nIG9uZSBiZWluZyBhIFtsZWFwIHllYXJdKCNsZWFweWVhcikuXHJcbiAgICAgKlxyXG4gICAgICogRWFjaCBub24tbGVhcCB5ZWFyIGhhcyBfMzY1IGRheXNfIG9yIGAzMTUzNjAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBub25MZWFwWWVhcjogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKipsdXN0cnVtKiogKHBsdXJhbCBfbHVzdHJhXykgd2FzIGEgdGVybSBmb3IgYSBmaXZlLXllYXIgcGVyaW9kIGluIEFuY2llbnQgUm9tZSBhbmQgaXMgZXF1aXZhbGVudCB0byBhXHJcbiAgICAgKiBbcXVpbnF1ZW5uaXVtXSgjcXVpbnF1ZW5uaXVtKSwgd2hpY2ggaXMgXzUgeWVhcnNfIG9yIGAxNTc2ODAwMDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBfbHVzdHJhdGlvbl8gd2FzIG9yaWdpbmFsbHkgYSBzYWNyaWZpY2UgZm9yIGV4cGlhdGlvbiBhbmQgcHVyaWZpY2F0aW9uIG9mZmVyZWQgYnkgb25lIG9mIHRoZSBjZW5zb3JzIGluIHRoZVxyXG4gICAgICogbmFtZSBvZiB0aGUgUm9tYW4gcGVvcGxlIGF0IHRoZSBjbG9zZSBvZiB0aGUgdGFraW5nIG9mIHRoZSBjZW5zdXMuIFRoZSBzYWNyaWZpY2Ugd2FzIG9mdGVuIGluIHRoZSBmb3JtIG9mIGFuXHJcbiAgICAgKiBhbmltYWwgc2FjcmlmaWNlLCBrbm93biBhcyBhIF9zdW92ZXRhdXJpbGlhXy5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IGx1c3RydW06IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqbWViaXNlY29uZCoqIGlzIGEgU0kgdW5pdCBvZiB0aW1lIGVxdWFsIHRvIF8xMDQ4NTc2IHNlY29uZHNfIG9yIGAxMDQ4NTc2MDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJlZml4IF9tZWJpXyBtZWFucyAywrLigbAuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBtZWJpc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKm1lZ2FzZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byBfMTAwMDAwMCBzZWNvbmRzXyBvciBgMTAwMDAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfbWVnYV8gbWVhbnMgMTDigbYuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBtZWdhc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKm1pY3Jvc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzAuMDAwMDAxIHNlY29uZF8gb3IgYDEwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwcmVmaXggX21pY3JvXyBtZWFucyAxMOKBu+KBti5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IG1pY3Jvc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKm1pbGlzZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byBfMC4wMDEgc2Vjb25kXyBvciBgMTAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfbWlsaV8gbWVhbnMgMTDigbvCsy5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IG1pbGlzZWNvbmQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqbWlsbGVubml1bSoqIChwbHVyYWwgX21pbGxlbm5pYV8pIGlzIGEgcGVyaW9kIGVxdWFsIHRvIF8xMDAwIHllYXJzXyBvciBgMzE1MzYwMDAwMDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLFxyXG4gICAgICogYWxzbyBrbm93biBhcyBba2lsb3llYXJdKCNraWxveWVhcikuXHJcbiAgICAgKlxyXG4gICAgICogU29tZXRpbWVzLCBpdCBpcyB1c2VkIHNwZWNpZmljYWxseSBmb3IgcGVyaW9kcyBvZiBhIHRob3VzYW5kIHllYXJzIHRoYXQgYmVnaW4gYXQgdGhlIHN0YXJ0aW5nIHBvaW50IChpbml0aWFsXHJcbiAgICAgKiByZWZlcmVuY2UgcG9pbnQpIG9mIHRoZSBjYWxlbmRhciBpbiBjb25zaWRlcmF0aW9uICh0eXBpY2FsbHkgdGhlIHllYXIgXCIxXCIpLCBvciBpbiBsYXRlciB5ZWFycyB0aGF0IGFyZSB3aG9sZVxyXG4gICAgICogbnVtYmVyIG11bHRpcGxlcyBvZiBhIHRob3VzYW5kIHllYXJzIGFmdGVyIGl0LlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgbWlsbGVuaXVtOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBtaW51dGUgaXMgZXF1YWwgdG8gMeKBhDYwICh0aGUgZmlyc3Qgc2V4YWdlc2ltYWwgZnJhY3Rpb24pIG9mIGFuIGhvdXIsIF82MCBzZWNvbmRzXyBvciBgNjAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIEluIHRoZSBVVEMgdGltZSBzdGFuZGFyZCwgYSBtaW51dGUgb24gcmFyZSBvY2Nhc2lvbnMgaGFzIDYxIHNlY29uZHMsIGEgY29uc2VxdWVuY2Ugb2YgX2xlYXAgc2Vjb25kc18uXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBtaW51dGU6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqbW9udGgqKiBpcyBhbiB1bml0IG9mIHRpbWUgdXNlZCB3aXRoIGNhbGVuZGFycywgd2hpY2ggaXMgYXBwcm94aW1hdGVseSBhcyBsb25nIGFzIGEgbmF0dXJhbCBwZXJpb2QgcmVsYXRlZCB0b1xyXG4gICAgICogdGhlIG1vdGlvbiBvZiB0aGUgTW9vbi5cclxuICAgICAqXHJcbiAgICAgKiBJbiBHcmVnb3JpYW4gY2FsZW5kYXJzLCBhIG1vbnRoIGlzIGluIGF2ZXJhZ2UgXzMwLjQxNjY2NjY2NjY3IGRheXNfIG9yIGAyNjI4MDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IG1vbnRoOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKm5hbm9zZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byBfMC4wMDAwMDAwMDEgc2Vjb25kXy4gVGhpcyBpcyB0aGUgKipzdGFuZGFyZCB1bml0Kiogb2YgdGltZWNvdW50LlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwcmVmaXggX25hbm9fIG1lYW5zIDEw4oG74oG5LiBUaW1lIHVuaXRzIG9mIHRoaXMgZ3JhbnVsYXJpdHkgYXJlIGNvbW1vbmx5IGVuY291bnRlcmVkIGluIHRlbGVjb21tdW5pY2F0aW9ucyxcclxuICAgICAqIHB1bHNlZCBsYXNlcnMsIGFuZCByZWxhdGVkIGFzcGVjdHMgb2YgZWxlY3Ryb25pY3MuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBuYW5vc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKm5vdmVubml1bSoqIChwbHVyYWwgX25vdmVubmlhXykgaXMgYSBwZXJpb2QgZXF1aXZhbGVudCB0byBfOSB5ZWFyc18gb3IgYDI4MzgyNDAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBub3Zlbm5pdW06IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiAqKm9jdGVubml1bSoqIChwbHVyYWwgX29jdGVubmlhXykgaXMgYSBwZXJpb2QgZXF1aXZhbGVudCB0byBfOCB5ZWFyc18gb3IgYDI1MjI4ODAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBvY3Rlbm5pdW06IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqcGViaXNlY29uZCoqIGlzIGEgU0kgdW5pdCBvZiB0aW1lIGVxdWFsIHRvIF8xMTI1ODk5OTA2ODQyNjI0IHNlY29uZHNfIG9yXHJcbiAgICAgKiBgMTEyNTg5OTkwNjg0MjYyNDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfcGViaV8gbWVhbnMgMuKBteKBsC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHBlYmlzZWNvbmQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqcGV0YXNlY29uZCoqIGlzIGEgU0kgdW5pdCBvZiB0aW1lIGVxdWFsIHRvIF8xMDAwMDAwMDAwMDAwMDAwIHNlY29uZHNfIG9yXHJcbiAgICAgKiBgMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfcGV0YV8gbWVhbnMgMTDCueKBtS5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHBldGFzZWNvbmQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqcGljb3NlY29uZCoqIGlzIGEgU0kgdW5pdCBvZiB0aW1lIGVxdWFsIHRvIF8wLjAwMDAwMDAwMDAwMSBzZWNvbmRfIG9yIGAwLjAwMSBuYW5vc2Vjb25kYC5cclxuICAgICAqXHJcbiAgICAgKiBBIHBpY29zZWNvbmQgaXMgdG8gb25lIHNlY29uZCBhcyBvbmUgc2Vjb25kIGlzIHRvIGFwcHJveGltYXRlbHkgMzEsNjg5IHllYXJzLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgcGljb3NlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSAqKlBsYW5jayB0aW1lKiogaXMgdGhlIHVuaXQgb2YgdGltZSBpbiB0aGUgc3lzdGVtIG9mIG5hdHVyYWwgdW5pdHMga25vd24gYXMgX1BsYW5jayB1bml0c18uIEEgUGxhbmNrIHVuaXQgaXNcclxuICAgICAqIHRoZSB0aW1lIHJlcXVpcmVkIGZvciBsaWdodCB0byB0cmF2ZWwgaW4gYSB2YWN1dW0gYSBkaXN0YW5jZSBvZiAxIF9QbGFuY2sgbGVuZ3RoXy5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyBlcXVpdmFsZW50IHRvIF81LjM5MDU2IMOXIDEw4oG74oG04oG0IHNlY29uZF8gb3IgYDAuMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDUzOTA1NiBuYW5vc2Vjb25kYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHBsYW5ja1RpbWU6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqcXVhZHJlbm5pdW0qKiAocGx1cmFsIF9xdWFkcmVubmlhXykgaXMgYSBwZXJpb2Qgb2YgXzQgeWVhcnNfIG9yIGA2MzA3MjAwMDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIG1vc3QgY29tbW9ubHkgdXNlZCBpbiByZWZlcmVuY2UgdG8gdGhlIGZvdXIteWVhciBwZXJpb2QgYmV0d2VlbiBlYWNoIE9seW1waWMgR2FtZXMuIEl0IGlzIGFsc28gdXNlZCBpblxyXG4gICAgICogcmVmZXJlbmNlIHRvIHRoZSBmb3VyLXllYXIgaW50ZXJ2YWwgYmV0d2VlbiBbbGVhcCB5ZWFyc10oI2xlYXB5ZWFyKS5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHF1YWRyZW5uaXVtOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKnF1aW5kZWNlbm5pdW0qKiAocGx1cmFsIF9xdWluZGVjZW5uaWFfKSBpcyBhIHBlcmlvZCBlcXVpdmFsZW50IHRvIF8xNSB5ZWFyc18gb3JcclxuICAgICAqIGA0NzMwNDAwMDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgcXVpbmRlY2Vubml1bTogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKipxdWlucXVlbm5pdW0qKiAocGx1cmFsIF9xdWlucXVlbm5pYV8pIGlzIGEgcGVyaW9kIGVxdWl2YWxlbnQgdG8gXzUgeWVhcnNfLCBhIFtsdXN0cnVtXSgjbHVzdHJ1bSksIG9yXHJcbiAgICAgKiBgMTU3NjgwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHF1aW5xdWVubml1bTogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSAqKnNlY29uZCoqIGlzIHRoZSBTSSBiYXNlIHVuaXQgb2YgdGltZSwgY29tbW9ubHkgdW5kZXJzdG9vZCBhbmQgaGlzdG9yaWNhbGx5IGRlZmluZWQgYXMgwrkv4oKI4oKG4oKE4oKA4oKAIG9mIGEgZGF5IOKAk1xyXG4gICAgICogdGhpcyBmYWN0b3IgZGVyaXZlZCBmcm9tIHRoZSBkaXZpc2lvbiBvZiB0aGUgZGF5IGZpcnN0IGludG8gMjQgaG91cnMsIHRoZW4gdG8gNjAgbWludXRlcyBhbmQgZmluYWxseSB0byA2MFxyXG4gICAgICogc2Vjb25kcyBlYWNoLlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIGVxdWl2YWxlbnQgdG8gYDEwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKnNlcHRlbm5pdW0qKiAocGx1cmFsIF9zZXB0ZW5uaWFfKSBpcyBhIHBlcmlvZCBlcXVpdmFsZW50IHRvIF83IHllYXJzXyBvciBgMjIwNzUyMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHNlcHRlbm5pdW06IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqc2hha2UqKiBpcyBhbiBpbmZvcm1hbCB1bml0IG9mIHRpbWUgZXF1YWwgdG8gYDEwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBJdCBoYXMgYXBwbGljYXRpb25zIGluIF9udWNsZWFyIHBoeXNpY3NfLCBoZWxwaW5nIHRvIGNvbnZlbmllbnRseSBleHByZXNzIHRoZSB0aW1pbmcgb2YgdmFyaW91cyBldmVudHMgaW4gYVxyXG4gICAgICogbnVjbGVhciBleHBsb3Npb24uXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBzaGFrZTogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIF9TaWRlcmVhbCB0aW1lXyBpcyBhIHRpbWVrZWVwaW5nIHN5c3RlbSB0aGF0IGFzdHJvbm9tZXJzIHVzZSB0byBsb2NhdGUgY2VsZXN0aWFsIG9iamVjdHMuIEl0IGlzIHRoZSBhbmdsZSxcclxuICAgICAqIG1lYXN1cmVkIGFsb25nIHRoZSBjZWxlc3RpYWwgZXF1YXRvciwgZnJvbSB0aGUgb2JzZXJ2ZXIncyBtZXJpZGlhbiB0byB0aGUgZ3JlYXQgY2lyY2xlIHRoYXQgcGFzc2VzIHRocm91Z2ggdGhlXHJcbiAgICAgKiBNYXJjaCBlcXVpbm94IGFuZCBib3RoIGNlbGVzdGlhbCBwb2xlcywgYW5kIGlzIHVzdWFsbHkgZXhwcmVzc2VkIGluIGhvdXJzLCBtaW51dGVzLCBhbmQgc2Vjb25kcy5cclxuICAgICAqXHJcbiAgICAgKiBVc2luZyBzaWRlcmVhbCB0aW1lLCBpdCBpcyBwb3NzaWJsZSB0byBlYXNpbHkgcG9pbnQgYSB0ZWxlc2NvcGUgdG8gdGhlIHByb3BlciBjb29yZGluYXRlcyBpbiB0aGUgbmlnaHQgc2t5LlxyXG4gICAgICpcclxuICAgICAqIEEgKipzaWRlcmVhbCBkYXkqKiBpcyBhcHByb3hpbWF0ZWx5IF8yMyBob3VycywgNTYgbWludXRlcywgNC4wOTA1IHNlY29uZHNfIG9yIGA4NjE2NDA5MDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBzaWRlcmVhbERheTogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIF9TaWRlcmVhbCB0aW1lXyBpcyBhIHRpbWVrZWVwaW5nIHN5c3RlbSB0aGF0IGFzdHJvbm9tZXJzIHVzZSB0byBsb2NhdGUgY2VsZXN0aWFsIG9iamVjdHMuIEl0IGlzIHRoZSBhbmdsZSxcclxuICAgICAqIG1lYXN1cmVkIGFsb25nIHRoZSBjZWxlc3RpYWwgZXF1YXRvciwgZnJvbSB0aGUgb2JzZXJ2ZXIncyBtZXJpZGlhbiB0byB0aGUgZ3JlYXQgY2lyY2xlIHRoYXQgcGFzc2VzIHRocm91Z2ggdGhlXHJcbiAgICAgKiBNYXJjaCBlcXVpbm94IGFuZCBib3RoIGNlbGVzdGlhbCBwb2xlcywgYW5kIGlzIHVzdWFsbHkgZXhwcmVzc2VkIGluIGhvdXJzLCBtaW51dGVzLCBhbmQgc2Vjb25kcy5cclxuICAgICAqXHJcbiAgICAgKiBVc2luZyBzaWRlcmVhbCB0aW1lLCBpdCBpcyBwb3NzaWJsZSB0byBlYXNpbHkgcG9pbnQgYSB0ZWxlc2NvcGUgdG8gdGhlIHByb3BlciBjb29yZGluYXRlcyBpbiB0aGUgbmlnaHQgc2t5LlxyXG4gICAgICpcclxuICAgICAqIEEgKipzaWRlcmVhbCBob3VyKiogaXMgYXBwcm94aW1hdGVseSBfNTkgbWludXRlcywgNTAuMTcwNDE2NjY2NzIgc2Vjb25kc18gb3IgYDM1OTAxNzA0MTY2NjcgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgc2lkZXJlYWxIb3VyOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogX1NpZGVyZWFsIHRpbWVfIGlzIGEgdGltZWtlZXBpbmcgc3lzdGVtIHRoYXQgYXN0cm9ub21lcnMgdXNlIHRvIGxvY2F0ZSBjZWxlc3RpYWwgb2JqZWN0cy4gSXQgaXMgdGhlIGFuZ2xlLFxyXG4gICAgICogbWVhc3VyZWQgYWxvbmcgdGhlIGNlbGVzdGlhbCBlcXVhdG9yLCBmcm9tIHRoZSBvYnNlcnZlcidzIG1lcmlkaWFuIHRvIHRoZSBncmVhdCBjaXJjbGUgdGhhdCBwYXNzZXMgdGhyb3VnaCB0aGVcclxuICAgICAqIE1hcmNoIGVxdWlub3ggYW5kIGJvdGggY2VsZXN0aWFsIHBvbGVzLCBhbmQgaXMgdXN1YWxseSBleHByZXNzZWQgaW4gaG91cnMsIG1pbnV0ZXMsIGFuZCBzZWNvbmRzLlxyXG4gICAgICpcclxuICAgICAqIFVzaW5nIHNpZGVyZWFsIHRpbWUsIGl0IGlzIHBvc3NpYmxlIHRvIGVhc2lseSBwb2ludCBhIHRlbGVzY29wZSB0byB0aGUgcHJvcGVyIGNvb3JkaW5hdGVzIGluIHRoZSBuaWdodCBza3kuXHJcbiAgICAgKlxyXG4gICAgICogQSAqKnNpZGVyZWFsIG1pbnV0ZSoqIGlzIGFwcHJveGltYXRlbHkgXzU5Ljk4MzYxNzM2MTExMSBzZWNvbmRzXyBvciBgNTk5ODM2MTczNjExLjExIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHNpZGVyZWFsTWludXRlOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHBlcmlvZCBvZiB0aGUgTW9vbidzIG9yYml0IGFzIGRlZmluZWQgd2l0aCByZXNwZWN0IHRvIHRoZSBjZWxlc3RpYWwgc3BoZXJlIG9mIGFwcGFyZW50bHkgZml4ZWQgc3RhcnNcclxuICAgICAqIChub3dhZGF5cyB0aGUgX0ludGVybmF0aW9uYWwgQ2VsZXN0aWFsIFJlZmVyZW5jZSBGcmFtZV8pIGlzIGtub3duIGFzIGEgKipzaWRlcmVhbCBtb250aCoqIGJlY2F1c2UgaXQgaXMgdGhlIHRpbWVcclxuICAgICAqIGl0IHRha2VzIHRoZSBNb29uIHRvIHJldHVybiB0byBhIHNpbWlsYXIgcG9zaXRpb24gYW1vbmcgdGhlIHN0YXJzLlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIGFwcHJveGltYXRlbHkgXzI3IGRheXMsIDcgaG91cnMsIDQzIG1pbnV0ZXMsIDExLjYgc2Vjb25kc18gb3IgYDIzNjA1OTE0MjQwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgc2lkZXJlYWxNb250aDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIF9TaWRlcmVhbCB0aW1lXyBpcyBhIHRpbWVrZWVwaW5nIHN5c3RlbSB0aGF0IGFzdHJvbm9tZXJzIHVzZSB0byBsb2NhdGUgY2VsZXN0aWFsIG9iamVjdHMuIEl0IGlzIHRoZSBhbmdsZSxcclxuICAgICAqIG1lYXN1cmVkIGFsb25nIHRoZSBjZWxlc3RpYWwgZXF1YXRvciwgZnJvbSB0aGUgb2JzZXJ2ZXIncyBtZXJpZGlhbiB0byB0aGUgZ3JlYXQgY2lyY2xlIHRoYXQgcGFzc2VzIHRocm91Z2ggdGhlXHJcbiAgICAgKiBNYXJjaCBlcXVpbm94IGFuZCBib3RoIGNlbGVzdGlhbCBwb2xlcywgYW5kIGlzIHVzdWFsbHkgZXhwcmVzc2VkIGluIGhvdXJzLCBtaW51dGVzLCBhbmQgc2Vjb25kcy5cclxuICAgICAqXHJcbiAgICAgKiBVc2luZyBzaWRlcmVhbCB0aW1lLCBpdCBpcyBwb3NzaWJsZSB0byBlYXNpbHkgcG9pbnQgYSB0ZWxlc2NvcGUgdG8gdGhlIHByb3BlciBjb29yZGluYXRlcyBpbiB0aGUgbmlnaHQgc2t5LlxyXG4gICAgICpcclxuICAgICAqIEEgKipzaWRlcmVhbCBzZWNvbmQqKiBpcyBhcHByb3hpbWF0ZWx5IF8wLjk5NzI2OTU2MDE4NTIgc2Vjb25kXyBvciBgOTk3MjY5NTYwLjE4NTIgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgc2lkZXJlYWxTZWNvbmQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqc2lkZXJlYWwgeWVhcioqIGlzIHRoZSB0aW1lIHRha2VuIGJ5IHRoZSBFYXJ0aCB0byBvcmJpdCB0aGUgU3VuIG9uY2Ugd2l0aCByZXNwZWN0IHRvIHRoZSBmaXhlZCBzdGFycy4gSGVuY2VcclxuICAgICAqIGl0IGlzIGFsc28gdGhlIHRpbWUgdGFrZW4gZm9yIHRoZSBTdW4gdG8gcmV0dXJuIHRvIHRoZSBzYW1lIHBvc2l0aW9uIHdpdGggcmVzcGVjdCB0byB0aGUgZml4ZWQgc3RhcnMgYWZ0ZXJcclxuICAgICAqIGFwcGFyZW50bHkgdHJhdmVsbGluZyBvbmNlIGFyb3VuZCB0aGUgZWNsaXB0aWMuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgYXBwcm94aW1hdGVseSBfMzY1IGRheXMsIDYgaG91cnMsIDkgbWludXRlcywgOS41MDQgc2Vjb25kc18gb3IgYDMxNTU4MTQ5NTQwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHNpZGVyZWFsWWVhcjogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsaWFzIGZvciBhIFtkYXldKCNkYXkpLlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIGVxdWl2YWxlbnQsIGluIGF2ZXJhZ2UsIHRvIF84NjQwMCBzZWNvbmRzXyBvciBgODY0MDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgc29sYXJEYXk6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbGlhcyBmb3IgYSBbdHJvcGljYWwgeWVhcl0oI3Ryb3BpY2FseWVhcikuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgZXF1aXZhbGVudCwgaW4gYXZlcmFnZSwgdG8gXzMxNTU2OTMwIHNlY29uZHNfIG9yIGAzMTU1NjkzMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBzb2xhclllYXI6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgKipTdmVkYmVyZyoqIGlzIGEgdGltZSB1bml0IHVzZWQgZm9yIHNlZGltZW50YXRpb24gcmF0ZXMgKHVzdWFsbHkgb2YgcHJvdGVpbnMpLlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIGRlZmluZWQgYXMgXzEwMCBmZW10b3NlY29uZHNfIG9yIGAwLjAwMDEgbmFub3NlY29uZGAuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSBzdmVkYmVyZzogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSAqKnN5bm9kaWMgbW9udGgqKiBpcyB0aGUgYXZlcmFnZSBwZXJpb2Qgb2YgdGhlIE1vb24ncyBvcmJpdCB3aXRoIHJlc3BlY3QgdG8gdGhlIGxpbmUgam9pbmluZyB0aGUgU3VuIGFuZFxyXG4gICAgICogRWFydGguIEl0IGlzIGlzIHVzZWQgdG8gY2FsY3VsYXRlIGVjbGlwc2UgY3ljbGVzLlxyXG4gICAgICpcclxuICAgICAqIEl0cyBsb25nLXRlcm0gYXZlcmFnZSBkdXJhdGlvbiBpcyBfMjkgZGF5cywgMTIgaG91cnMsIDQ0IG1pbnV0ZXMsIDIuODAxNiBzZWNvbmRzXyBvclxyXG4gICAgICogYDI1NTE0NDM4NDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgc3lub2RpY01vbnRoOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKnRlYmlzZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byAxMDk5NTExNjI3Nzc2IHNlY29uZHNfIG9yIGAxMDk5NTExNjI3Nzc2MDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJlZml4IF90ZWJpXyBtZWFucyAy4oG04oGwLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgdGViaXNlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKip0ZXJhc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gMTAwMDAwMDAwMDAwMCBzZWNvbmRzXyBvciBgMTAwMDAwMDAwMDAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfdGVyYV8gbWVhbnMgMTDCucKyLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgdGVyYXNlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKip0aW1lIHVuaXQqKiAoVFUpIGlzIGFuIHVuaXQgb2YgdGltZSBkZWZpbmVkIGFzIF8xMDI0IG1pY3Jvc2Vjb25kc18gb3IgYDEwMjQwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIFRoZSB1bml0IGFsbG93cyBmb3IgbWFpbnRhaW5pbmcgaW50ZXJ2YWxzIHRoYXQgYXJlIGVhc3kgdG8gaW1wbGVtZW50IGluIGhhcmR3YXJlIHRoYXQgaGFzIGEgMSBNSHogY2xvY2suIE9uZSBUaW1lXHJcbiAgICAgKiBVbml0IGlzIGVxdWFsIHRvIG9uZSBtaWxsaW9udGggb2YgYSBba2liaXNlY29uZF0oI2tpYmlzZWNvbmQpLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgdGltZVVuaXQ6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqdHJvcGljYWwgeWVhcioqIChhbHNvIGtub3duIGFzIGEgW3NvbGFyIHllYXJdKCNzb2xhcnllYXIpKSBpcyB0aGUgdGltZSB0aGF0IHRoZSBTdW4gdGFrZXMgdG8gcmV0dXJuIHRvIHRoZVxyXG4gICAgICogc2FtZSBwb3NpdGlvbiBpbiB0aGUgY3ljbGUgb2Ygc2Vhc29ucywgYXMgc2VlbiBmcm9tIEVhcnRoOyBmb3IgZXhhbXBsZSwgdGhlIHRpbWUgZnJvbSB2ZXJuYWwgZXF1aW5veCB0byB2ZXJuYWxcclxuICAgICAqIGVxdWlub3gsIG9yIGZyb20gc3VtbWVyIHNvbHN0aWNlIHRvIHN1bW1lciBzb2xzdGljZS5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyBhcHByb3hpbWV0YWx5IF8zNjUgZGF5cywgNSBob3VycywgNDggbWludXRlcywgNDMuNDg4IHNlY29uZHNfIG9yIGAzMTU1NjkzMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSB0cm9waWNhbFllYXI6IFQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBICoqd2VlayoqIGlzIGEgdGltZSB1bml0IGVxdWFsIHRvIF83IGRheXNfIG9yIGA2MDQ4MDAwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIHRoZSBzdGFuZGFyZCB0aW1lIHBlcmlvZCB1c2VkIGZvciBjeWNsZXMgb2YgcmVzdCBkYXlzIGluIG1vc3QgcGFydHMgb2YgdGhlIHdvcmxkLCBtb3N0bHkgYWxvbmdzaWRlIOKAlFxyXG4gICAgICogYWx0aG91Z2ggbm90IHN0cmljdGx5IHBhcnQgb2Yg4oCUIHRoZSBHcmVnb3JpYW4gY2FsZW5kYXIuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSB3ZWVrOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9yIHRoZSBHcmVnb3JpYW4gY2FsZW5kYXIsIHRoZSBhdmVyYWdlIGxlbmd0aCBvZiB0aGUgY2FsZW5kYXIgeWVhciAodGhlIG1lYW4geWVhcikgYWNyb3NzIHRoZSBjb21wbGV0ZSBsZWFwXHJcbiAgICAgKiBjeWNsZSBvZiA0MDAgeWVhcnMgaXMgXzM2NSBkYXlzLCA1IGhvdXJzLCA0OSBtaW51dGVzLCAxMiBzZWNvbmRzXyAoMzY1LjI0MjUgZGF5cykgb3JcclxuICAgICAqIGAzMTU1Njk1MjAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSB5ZWFyOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKnlvYmlzZWNvbmQqKiBpcyBhIFNJIHVuaXQgb2YgdGltZSBlcXVhbCB0byBfMTIwODkyNTgxOTYxNDYyOTE3NDcwNjE3NiBzZWNvbmRzXyBvclxyXG4gICAgICogYDEyMDg5MjU4MTk2MTQ2MjkxNzQ3MDYxNzYwMDAwMDAwMDAgbmFub3NlY29uZHNgLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwcmVmaXggX3lvYmlfIG1lYW5zIDLigbjigbAuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSB5b2Jpc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKnlvY3Rvc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzAuMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxIHNlY29uZF8gb3JcclxuICAgICAqIGAwLjAwMDAwMDAwMDAwMDAwMDEgbmFub3NlY29uZGAuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfeW9jdG9fIG1lYW5zIDEw4oG7wrLigbQuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSB5b2N0b3NlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKip5b3R0YXNlY29uZCoqIGlzIGEgU0kgdW5pdCBvZiB0aW1lIGVxdWFsIHRvIF8xMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIHNlY29uZHNfIG9yXHJcbiAgICAgKiBgMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCBuYW5vc2Vjb25kc2AuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfeW90dGFfIG1lYW5zIDEwwrLigbQuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW0JhY2sgdG8gdG9wXSgjKVxyXG4gICAgICovXHJcbiAgICByZWFkb25seSB5b3R0YXNlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKip6ZWJpc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzExODA1OTE2MjA3MTc0MTEzMDM0MjQgc2Vjb25kc18gb3JcclxuICAgICAqIGAxMTgwNTkxNjIwNzE3NDExMzAzNDI0MDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJlZml4IF96ZWJpXyBtZWFucyAy4oG34oGwLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgemViaXNlY29uZDogVDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgKip6ZXB0b3NlY29uZCoqIGlzIGEgU0kgdW5pdCBvZiB0aW1lIGVxdWFsIHRvIF8wLjAwMDAwMDAwMDAwMDAwMDAwMDAwMSBzZWNvbmRfIG9yXHJcbiAgICAgKiBgMC4wMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEgbmFub3NlY29uZGAuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByZWZpeCBfemVwdG9fIG1lYW5zIDEw4oG7wrLCuS5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbQmFjayB0byB0b3BdKCMpXHJcbiAgICAgKi9cclxuICAgIHJlYWRvbmx5IHplcHRvc2Vjb25kOiBUO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSAqKnplcHRvc2Vjb25kKiogaXMgYSBTSSB1bml0IG9mIHRpbWUgZXF1YWwgdG8gXzEwMDAwMDAwMDAwMDAwMDAwMDAwMDAgc2Vjb25kc18gb3JcclxuICAgICAqIGAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIG5hbm9zZWNvbmRzYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJlZml4IF96ZXR0YV8gbWVhbnMgMTDCssK5LlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtCYWNrIHRvIHRvcF0oIylcclxuICAgICAqL1xyXG4gICAgcmVhZG9ubHkgemV0dGFzZWNvbmQ6IFQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHVuaW9uIHR5cGUsIHVzZWQgYnkgcGFyYW1ldGVycyB0aGF0IGFjY2VwdCBlaXRoZXIgdGhlIG5hbWUgb2YgYSB0aW1lIHVuaXQgb3IgYVxyXG4gKiBbdGltZSB1bml0IG9iamVjdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV1bml0Lmh0bWwpLlxyXG4gKlxyXG4gKiBAZGVwcmVjYXRlZCBTaW5jZSB2MS4xLjAgLSBJbiBmYXZvciBvZiBgVGltZVVuaXRTb3VyY2VgICh3aWxsIGJlIHJlbW92ZWQgaW4gdjIpLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgVGltZVVuaXRQYXJhbWV0ZXIgPSBrZXlvZiBUaW1lVW5pdERhdGFiYXNlIHwgVGltZVVuaXQ7XHJcblxyXG4vKipcclxuICogQSB1bmlvbiB0eXBlLCB1c2VkIGJ5IHBhcmFtZXRlcnMgdGhhdCBhY2NlcHQgZWl0aGVyIHRoZSBuYW1lIG9mIGEgdGltZSB1bml0IG9yIGFcclxuICogW3RpbWUgdW5pdCBvYmplY3RdKC4uL2ludGVyZmFjZXMvX2luZGV4Xy50aW1ldW5pdC5odG1sKS5cclxuICpcclxuICogVGhlIGFjY2VwdGVkIG5hbWVzIGFyZSB0aGUgcHJvcGVydGllcyBkZWZpbmVkIGJ5IFtUaW1lVW5pdERhdGFiYXNlXSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXVuaXRkYXRhYmFzZS5odG1sKSwgYnV0XHJcbiAqIGNhc2UtaW5zZW5zaXRpdmUgYW5kIHBsdXJhbCB2YXJpYXRpb25zIGFyZSBhbHNvIHZhbGlkIChldmVuIHRob3VnaCBUeXBlU2NyaXB0IHdvdWxkIG5vdCBhbGxvdyBpdCkuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBUaW1lVW5pdFNvdXJjZSA9IGtleW9mIFRpbWVVbml0RGF0YWJhc2UgfCBUaW1lVW5pdDtcclxuXHJcbi8qKlxyXG4gKiBUaGlzIHR5cGUgaXMgYSB1bmlvbiBvZiBhbGwgYWNjZXB0ZWQgdHlwZXMgdGhhdCBjYW4gYmUgdXNlZCB0byByZXByZXNlbnQgYSB0aW1lIHZhbHVlOiBhIF9zdHJpbmdfIHRoYXQgcGFyc2VzIHRvIGFcclxuICogbnVtYmVyIChlLmcuIFwiMTAwMFwiIG9yIFwiMWUtMTBcIiksIGEgW2JpZyBkZWNpbWFsXShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kZWNpbWFsLmpzKSBvciBhIF9udW1iZXJfLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgVGltZVZhbHVlU291cmNlID0gc3RyaW5nIHwgbnVtYmVyIHwgRGVjaW1hbDtcclxuXHJcbi8qKlxyXG4gKiBUaW1lIHdyaXRlcnMgYXJlIG9iamVjdHMgdXNlZCB0byBzeW50aGVzaXplIHRpbWUgdmFsdWVzIGludG8gc3RyaW5ncywgaS5lLiB3cml0ZSB0aW1lcyB1c2luZyBkaWZmZXJlbnQgbGV4aWNhbCBhbmRcclxuICogbnVtZXJpY2FsIGNvbmZpZ3VyYXRpb25zLiAqKltXcml0ZV0oI3dyaXRlKSoqIGlzIHVzZWQgdG8gZXhwcmVzcyBhIHNpbmdsZSB0aW1lIHZhbHVlLCB1c2luZyBhIHNpbmdsZSB0aW1lIHVuaXQ7XHJcbiAqICoqW2NvdW50ZG93bl0oI2NvdW50ZG93bikqKiBpcyB1c2VkIHRvIGNsYXNzaWZ5IHRpbWUgdmFsdWVzIGJ5IHNlZ21lbnRpbmcgdGhlbSBpbnRvIHBhcnRzIHdpdGggZGlmZmVyZW50IHRpbWUgdW5pdHMuXHJcbiAqXHJcbiAqIFRoZXNlIGNvbmZpZ3VyYXRpb25zIGFyZSBsb2FkZWQgaW4gdGhlIGZvbGxvd2luZyBvcmRlcjpcclxuICogLSBEZWZhdWx0cyDigJQgaGFyZGNvZGVkIGZvciBFbmdsaXNoIChVUyk7XHJcbiAqIC0gT3B0aW9ucyBmcm9tIHRoZSBjdXJyZW50IFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKTtcclxuICogLSBPcHRpb25zIGZyb20gdGhlIGluc3RhbmNlIFtzZXR0aW5nc10oI3NldHRpbmdzKTtcclxuICogLSBPcHRpb25zIGdpdmVuIGFzIGEgcGFyYW1ldGVyIHRvIGEgbWV0aG9kLlxyXG4gKlxyXG4gKiAtLS1cclxuICpcclxuICogW1tpbmNsdWRlOmV4YW1wbGVzL3RpbWV3cml0ZXIubWRdXVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRpbWVXcml0ZXIge1xyXG5cclxuICAgIHByaXZhdGUgX3Nob3VsZEFwcHJveGltYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBbVGltZVdyaXRlcl0oIykgY2xhc3Mgb3B0aW9uYWxseSB1c2luZyB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNldHRpbmdzXHJcbiAgICAgKiAgIENvbmZpZ3VyYXRpb25zIHBlcnRhaW5pbmcgdG8gdGhpcyBpbnN0YW5jZSwgb3ZlcnJpZGluZyB0aG9zZSBvZiB0aGVcclxuICAgICAqICAgW2xvY2FsZV0oX2xvY2FsaXphdGlvbl8ubG9jYWxlLmh0bWwjd3JpdGVyT3B0aW9ucykuIE1heSBiZSBvdmVycmlkZW4gdmlhIHBhcmFtZXRlciBvZiBbd3JpdGVdKCN3cml0ZSkgb3JcclxuICAgICAqICAgW2NvdW50ZG93bl0oI2NvdW50ZG93bikuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgc2V0dGluZ3M6IFRpbWVXcml0ZXJTZXR0aW5ncyA9IHt9KSB7IH1cclxuXHJcbiAgICAvLyNyZWdpb24gQ291bnRkb3duIE1ldGhvZFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSBsZW5ndGggc2VnbWVudGVkIGludG8gbXVsdGlwbGUgdW5pdHMgdXNpbmcgYSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCBhbmQsIG9wdGlvbmFsbHksXHJcbiAgICAgKiBjb25maWd1cmF0aW9ucyB0aGF0IG1heSBvdmVycmlkZSB0aG9zZSBvZiB0aGUgW0xvY2FsZV0oX2xvY2FsaXphdGlvbl8ubG9jYWxlLmh0bWwpIGFuZCB0aGUgaW5zdGFuY2UsIGZvciB0aGVcclxuICAgICAqIGR1cmF0aW9uIG9mIHRoZSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyB3aWxsIHByb2R1Y2UgZXhwbGFuYXRpb25zIG9mIHRpbWUgbGVuZ3RocyBtdWNoIGVhc2llciB0byB1bmRlcnN0YW5kIHRoYW4gYXJiaXRyYXJ5IGZyYWN0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIFwib3ZlcmxvYWRcIiB3aWxsIGFsd2F5cyB1c2UgW1RJTUVfU0VHTUVOVFNfQ09NTU9OXSguLi9tb2R1bGVzL19pbmRleF8uaHRtbCN0aW1lX3NlZ21lbnRzX2NvbW1vbikgYXMgc291cmNlXHJcbiAgICAgKiBmb3IgaXRzIHRpbWUgdW5pdCBjb252ZXJzaW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGltZVxyXG4gICAgICogICBBbiBlbmNhcHN1bGF0ZWQgbmFub3NlY29uZC1iYXNlZCB0aW1lLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgY291bnRkb3duYC4gSXQgZG9lcyBub3QgY2hhbmdlIHRoZSBvYmplY3QgaW4gYW55IHdheSB3aGF0c29ldmVyLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIHN0cmluZyBjb250YWluaW5nIGEgc3ludGhldGljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB0aW1lIHRocm91Z2ggdGhlIHVzZSBvZiBtdWx0aXBsZSB1bml0cyBvZiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY291bnRkb3duKHRpbWU6IFRpbWUsIG9wdGlvbnM/OiBUaW1lV3JpdGVyU2V0dGluZ3MpOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXcml0ZXMgYSB0aW1lIGxlbmd0aCBzZWdtZW50ZWQgaW50byBtdWx0aXBsZSB1bml0cyB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSxcclxuICAgICAqIGNvbmZpZ3VyYXRpb25zIHRoYXQgbWF5IG92ZXJyaWRlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZSBpbnN0YW5jZSwgZm9yIHRoZVxyXG4gICAgICogZHVyYXRpb24gb2YgdGhlIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIHdpbGwgcHJvZHVjZSBleHBsYW5hdGlvbnMgb2YgdGltZSBsZW5ndGhzIG11Y2ggZWFzaWVyIHRvIHVuZGVyc3RhbmQgdGhhbiBhcmJpdHJhcnkgZnJhY3Rpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lXHJcbiAgICAgKiAgIEFuIGVuY2Fwc3VsYXRlZCBuYW5vc2Vjb25kLWJhc2VkIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICogICBBY2NlcHRzIGFueSBudW1iZXIgb2YgdGltZSB1bml0cyBvciBhcnJheSBvZiB0aW1lIHVuaXRzIChpZiByZXBldGl0aW9ucyBhcmUgZ2l2ZW4sIHRoZXkgd2lsbCBiZSBzaW5nbGVkIG91dCkuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUgdGhyb3VnaCB0aGUgdXNlIG9mIG11bHRpcGxlIHVuaXRzIG9mIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb3VudGRvd24odGltZTogVGltZSwgLi4uIGFyZ3M6IEFycmF5PFRpbWVVbml0U291cmNlIHwgVGltZVVuaXRTb3VyY2VbXT4pOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXcml0ZXMgYSB0aW1lIGxlbmd0aCBzZWdtZW50ZWQgaW50byBtdWx0aXBsZSB1bml0cyB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSxcclxuICAgICAqIGNvbmZpZ3VyYXRpb25zIHRoYXQgbWF5IG92ZXJyaWRlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZSBpbnN0YW5jZSwgZm9yIHRoZVxyXG4gICAgICogZHVyYXRpb24gb2YgdGhlIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIHdpbGwgcHJvZHVjZSBleHBsYW5hdGlvbnMgb2YgdGltZSBsZW5ndGhzIG11Y2ggZWFzaWVyIHRvIHVuZGVyc3RhbmQgdGhhbiBhcmJpdHJhcnkgZnJhY3Rpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lXHJcbiAgICAgKiAgIEFuIGVuY2Fwc3VsYXRlZCBuYW5vc2Vjb25kLWJhc2VkIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICogICBBY2NlcHRzIGFueSBudW1iZXIgb2YgdGltZSB1bml0cyBvciBhcnJheSBvZiB0aW1lIHVuaXRzIChpZiByZXBldGl0aW9ucyBhcmUgZ2l2ZW4sIHRoZXkgd2lsbCBiZSBzaW5nbGVkIG91dCkuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUgdGhyb3VnaCB0aGUgdXNlIG9mIG11bHRpcGxlIHVuaXRzIG9mIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb3VudGRvd24odGltZTogVGltZSwgLi4uIGFyZ3M6IEFycmF5PHN0cmluZyB8IFRpbWVVbml0IHwgc3RyaW5nW10+KTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSBsZW5ndGggc2VnbWVudGVkIGludG8gbXVsdGlwbGUgdW5pdHMgdXNpbmcgYSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCBhbmQsIG9wdGlvbmFsbHksXHJcbiAgICAgKiBjb25maWd1cmF0aW9ucyB0aGF0IG1heSBvdmVycmlkZSB0aG9zZSBvZiB0aGUgW0xvY2FsZV0oX2xvY2FsaXphdGlvbl8ubG9jYWxlLmh0bWwpIGFuZCB0aGUgaW5zdGFuY2UsIGZvciB0aGVcclxuICAgICAqIGR1cmF0aW9uIG9mIHRoZSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyB3aWxsIHByb2R1Y2UgZXhwbGFuYXRpb25zIG9mIHRpbWUgbGVuZ3RocyBtdWNoIGVhc2llciB0byB1bmRlcnN0YW5kIHRoYW4gYXJiaXRyYXJ5IGZyYWN0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGltZVxyXG4gICAgICogICBBbiBlbmNhcHN1bGF0ZWQgbmFub3NlY29uZC1iYXNlZCB0aW1lLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgY291bnRkb3duYC4gSXQgZG9lcyBub3QgY2hhbmdlIHRoZSBvYmplY3QgaW4gYW55IHdheSB3aGF0c29ldmVyLlxyXG4gICAgICogQHBhcmFtIGFyZ3NcclxuICAgICAqICAgQWNjZXB0cyBhbnkgbnVtYmVyIG9mIHRpbWUgdW5pdHMgb3IgYXJyYXkgb2YgdGltZSB1bml0cyAoaWYgcmVwZXRpdGlvbnMgYXJlIGdpdmVuLCB0aGV5IHdpbGwgYmUgc2luZ2xlZCBvdXQpLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIHN0cmluZyBjb250YWluaW5nIGEgc3ludGhldGljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB0aW1lIHRocm91Z2ggdGhlIHVzZSBvZiBtdWx0aXBsZSB1bml0cyBvZiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY291bnRkb3duKHRpbWU6IFRpbWUsIG9wdGlvbnM/OiBUaW1lV3JpdGVyU2V0dGluZ3MsXHJcbiAgICAgICAgLi4uIGFyZ3M6IEFycmF5PHN0cmluZyB8IFRpbWVVbml0IHwgc3RyaW5nW10+KTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSBsZW5ndGggc2VnbWVudGVkIGludG8gbXVsdGlwbGUgdW5pdHMgdXNpbmcgYSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCBhbmQsIG9wdGlvbmFsbHksXHJcbiAgICAgKiBjb25maWd1cmF0aW9ucyB0aGF0IG1heSBvdmVycmlkZSB0aG9zZSBvZiB0aGUgW0xvY2FsZV0oX2xvY2FsaXphdGlvbl8ubG9jYWxlLmh0bWwpIGFuZCB0aGUgaW5zdGFuY2UsIGZvciB0aGVcclxuICAgICAqIGR1cmF0aW9uIG9mIHRoZSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyB3aWxsIHByb2R1Y2UgZXhwbGFuYXRpb25zIG9mIHRpbWUgbGVuZ3RocyBtdWNoIGVhc2llciB0byB1bmRlcnN0YW5kIHRoYW4gYXJiaXRyYXJ5IGZyYWN0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGltZVxyXG4gICAgICogICBBbiBlbmNhcHN1bGF0ZWQgbmFub3NlY29uZC1iYXNlZCB0aW1lLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgY291bnRkb3duYC4gSXQgZG9lcyBub3QgY2hhbmdlIHRoZSBvYmplY3QgaW4gYW55IHdheSB3aGF0c29ldmVyLlxyXG4gICAgICogQHBhcmFtIGFyZ3NcclxuICAgICAqICAgQWNjZXB0cyBhbnkgbnVtYmVyIG9mIHRpbWUgdW5pdHMgb3IgYXJyYXkgb2YgdGltZSB1bml0cyAoaWYgcmVwZXRpdGlvbnMgYXJlIGdpdmVuLCB0aGV5IHdpbGwgYmUgc2luZ2xlZCBvdXQpLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIHN0cmluZyBjb250YWluaW5nIGEgc3ludGhldGljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB0aW1lIHRocm91Z2ggdGhlIHVzZSBvZiBtdWx0aXBsZSB1bml0cyBvZiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY291bnRkb3duKHRpbWU6IFRpbWUsIG9wdGlvbnM/OiBUaW1lV3JpdGVyU2V0dGluZ3MsXHJcbiAgICAgICAgLi4uIGFyZ3M6IEFycmF5PFRpbWVVbml0U291cmNlIHwgVGltZVVuaXRTb3VyY2VbXT4pOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXcml0ZXMgYSB0aW1lIGxlbmd0aCBzZWdtZW50ZWQgaW50byBtdWx0aXBsZSB1bml0cyB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSxcclxuICAgICAqIGNvbmZpZ3VyYXRpb25zIHRoYXQgbWF5IG92ZXJyaWRlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZSBpbnN0YW5jZSwgZm9yIHRoZVxyXG4gICAgICogZHVyYXRpb24gb2YgdGhlIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIHdpbGwgcHJvZHVjZSBleHBsYW5hdGlvbnMgb2YgdGltZSBsZW5ndGhzIG11Y2ggZWFzaWVyIHRvIHVuZGVyc3RhbmQgdGhhbiBhcmJpdHJhcnkgZnJhY3Rpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lXHJcbiAgICAgKiAgIEFuIGVuY2Fwc3VsYXRlZCBuYW5vc2Vjb25kLWJhc2VkIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICogICBXaGVuIGdpdmVuLCB0aGVzZSBjb25maWd1cmF0aW9ucyB3aWxsIG92ZXJyaWRlIHRoZSB0aG9zZSBvZiB0aGUgW0xvY2FsZV0oX2xvY2FsaXphdGlvbl8ubG9jYWxlLmh0bWwpIGFuZCB0aGVcclxuICAgICAqICAgaW5zdGFuY2UsIGZvciB0aGlzIHNwZWNpZmljIGBjb3VudGRvd25gLiBJdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG9iamVjdCBpbiBhbnkgd2F5IHdoYXRzb2V2ZXIuXHJcbiAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICogICBBY2NlcHRzIGFueSBudW1iZXIgb2YgdGltZSB1bml0cyBvciBhcnJheSBvZiB0aW1lIHVuaXRzIChpZiByZXBldGl0aW9ucyBhcmUgZ2l2ZW4sIHRoZXkgd2lsbCBiZSBzaW5nbGVkIG91dCkuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUgdGhyb3VnaCB0aGUgdXNlIG9mIG11bHRpcGxlIHVuaXRzIG9mIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb3VudGRvd24odGltZTogVGltZSwgb3B0aW9ucz86IFRpbWVXcml0ZXJTZXR0aW5ncyB8IFRpbWVVbml0U291cmNlLFxyXG4gICAgICAgIC4uLiBhcmdzOiBBcnJheTxzdHJpbmcgfCBUaW1lVW5pdCB8IHN0cmluZ1tdPik6IHN0cmluZztcclxuXHJcbiAgICAvLyBBY3R1YWwgYGNvdW50ZG93bmAgaW1wbGVtZW50YXRpb25cclxuICAgIHB1YmxpYyBjb3VudGRvd24odGltZTogVGltZSxcclxuICAgICAgICBvcHRpb25zOiBUaW1lV3JpdGVyU2V0dGluZ3MgfCBUaW1lVW5pdFNvdXJjZSB8IFRpbWVVbml0U291cmNlW10gfCBzdHJpbmcgfCBzdHJpbmdbXSA9IHt9LFxyXG4gICAgICAgIC4uLiBhcmdzOiBBcnJheTxUaW1lVW5pdFNvdXJjZSB8IFRpbWVVbml0U291cmNlW10gfCBzdHJpbmcgfCBzdHJpbmdbXT4pIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGltZVVuaXROYW1lczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCB0aW1lVW5pdE9iamVjdHM6IE5hbWVkVGltZVVuaXRbXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnMpID09PSBcInN0cmluZ1wiIHx8IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJmYWN0b3JcIikpIHtcclxuICAgICAgICAgICAgYXJncyA9IFtvcHRpb25zIGFzIFRpbWVVbml0U291cmNlXS5jb25jYXQoYXJncyBhcyBUaW1lVW5pdFNvdXJjZVtdKTtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBhcmdzID0gKG9wdGlvbnMgYXMgYW55KS5jb25jYXQoYXJncyk7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIG5vIHRpbWUgdW5pdHMgd2VyZSBnaXZlbiwgdXNlIHRoZSBcImNvbW1vblwiIGNvbnN0YW50XHJcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGFyZ3MgPSBUaW1lU2VnbWVudHMuY29tbW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2VsZWN0cyBhbGwgYXJyYXlzIHBhc3NlZCBhcyBhcmd1bWVudFxyXG4gICAgICAgIGNvbnN0IGFycmF5QXJncyA9IGFyZ3MuZmlsdGVyKGUgPT4gZSBpbnN0YW5jZW9mIEFycmF5KTtcclxuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGFyZ3MuZmlsdGVyKGUgPT4gIShlIGluc3RhbmNlb2YgQXJyYXkpKTtcclxuXHJcbiAgICAgICAgLy8gUmVwbGFjZXMgYXJyYXlzIGJ5IHRoZWlyIGVsZW1lbnRzIG9uIGFyZ3NcclxuICAgICAgICBhcnJheUFyZ3MuZm9yRWFjaChhcnJheSA9PiB7IGZpbHRlcmVkLnB1c2guYXBwbHkoZmlsdGVyZWQsIGFycmF5KTsgfSk7XHJcbiAgICAgICAgYXJncyA9IGZpbHRlcmVkO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGFyZ3VtZW50IG9mIGFyZ3MpIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZVVuaXQgPSB0aW1lVW5pdEZyb21Tb3VyY2UoYXJndW1lbnQgYXMgVGltZVVuaXRTb3VyY2UpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2tpcHBpbmcgcmVwZWF0ZWQgdW5pdHNcclxuICAgICAgICAgICAgaWYgKHRpbWVVbml0TmFtZXMuaW5kZXhPZih0aW1lVW5pdC5uYW1lKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGltZVVuaXROYW1lcy5wdXNoKHRpbWVVbml0Lm5hbWUpO1xyXG4gICAgICAgICAgICB0aW1lVW5pdE9iamVjdHMucHVzaCh0aW1lVW5pdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvcHRpb25zID0gdGhpcy5fY29tYmluZU9wdGlvbnMob3B0aW9ucyBhcyBUaW1lV3JpdGVyU2V0dGluZ3MpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb3VudGRvd25UaW1lKHRpbWUsIHRpbWVVbml0T2JqZWN0cywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFdyaXRlIE1ldGhvZFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSB2YWx1ZSB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSwgY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgb3ZlcnJpZGVcclxuICAgICAqIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZSBpbnN0YW5jZSwgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgd2lsbCB1c2UgdGhlIFtkZWZhdWx0IHRpbWUgdW5pdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV3cml0ZXJzZXR0aW5ncy5odG1sI2RlZmF1bHR0aW1ldW5pdCkgKHdoaWNoIGZhbGxzXHJcbiAgICAgKiBiYWNrIHRvIFwibmFub3NlY29uZHNcIikgYXMgYm90aCBpbnB1dCAod2hlbiB0aW1lIGlzIG51bWVyaWMpIGFuZCBvdXRwdXQgdGltZSB1bml0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lXHJcbiAgICAgKiAgIEEgbnVtZXJpYyByZXByZXNlbnRhdGlvbiBvZiBhIHRpbWUgdmFsdWUgLW9yLSBhbiBlbmNhcHN1bGF0ZWQgbmFub3NlY29uZC1iYXNlZCB0aW1lLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgd3JpdGVgLiBJdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG9iamVjdCBpbiBhbnkgd2F5IHdoYXRzb2V2ZXIuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB3cml0ZSh0aW1lOiBUaW1lVmFsdWVTb3VyY2UgfCBUaW1lLCBvcHRpb25zPzogVGltZVdyaXRlclNldHRpbmdzKTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSB2YWx1ZSB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSwgYSB0aW1lIHVuaXQgdG8gdHJhbnNmb3JtIGl0IGFuZFxyXG4gICAgICogY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgb3ZlcnJpZGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlIGluc3RhbmNlLCBmb3IgdGhlXHJcbiAgICAgKiBkdXJhdGlvbiBvZiB0aGUgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lXHJcbiAgICAgKiAgIEFuIGVuY2Fwc3VsYXRlZCBuYW5vc2Vjb25kLWJhc2VkIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gdG9UaW1lVW5pdFxyXG4gICAgICogICBUaW1lIHVuaXQgdG8gd2hpY2ggdGhlIGdpdmVuIHRpbWUgd2lsbCBiZSBjb252ZXJ0ZWQuIElmIHRoaXMgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQsIGl0IGZhbGxiYWNrcyB0byB0aGVcclxuICAgICAqICAgW2RlZmF1bHQgdGltZSB1bml0XSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXdyaXRlcnNldHRpbmdzLmh0bWwjZGVmYXVsdHRpbWV1bml0KSBhbmQgdWx0aW1hdGVseSB0b1xyXG4gICAgICogICBcIm5hbm9zZWNvbmRzXCIuXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICogICBXaGVuIGdpdmVuLCB0aGVzZSBjb25maWd1cmF0aW9ucyB3aWxsIG92ZXJyaWRlIHRoZSB0aG9zZSBvZiB0aGUgW0xvY2FsZV0oX2xvY2FsaXphdGlvbl8ubG9jYWxlLmh0bWwpIGFuZCB0aGVcclxuICAgICAqICAgaW5zdGFuY2UsIGZvciB0aGlzIHNwZWNpZmljIGB3cml0ZWAuIEl0IGRvZXMgbm90IGNoYW5nZSB0aGUgb2JqZWN0IGluIGFueSB3YXkgd2hhdHNvZXZlci5cclxuICAgICAqIEByZXR1cm5cclxuICAgICAqICAgQSBzdHJpbmcgY29udGFpbmluZyBhIHN5bnRoZXRpYyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gdGltZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHdyaXRlKHRpbWU6IFRpbWUsIHRvVGltZVVuaXQ/OiBUaW1lVW5pdFNvdXJjZSwgb3B0aW9ucz86IFRpbWVXcml0ZXJTZXR0aW5ncyk6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyaXRlcyBhIHRpbWUgdmFsdWUgdXNpbmcgYSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCBhbmQsIG9wdGlvbmFsbHksIGEgdGltZSB1bml0IHRvIHRyYW5zZm9ybSBpdCBhbmRcclxuICAgICAqIGNvbmZpZ3VyYXRpb25zIHRoYXQgbWF5IG92ZXJyaWRlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZSBpbnN0YW5jZSwgZm9yIHRoZVxyXG4gICAgICogZHVyYXRpb24gb2YgdGhlIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGltZVxyXG4gICAgICogICBBbiBlbmNhcHN1bGF0ZWQgbmFub3NlY29uZC1iYXNlZCB0aW1lLlxyXG4gICAgICogQHBhcmFtIHRvVGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHRvIHdoaWNoIHRoZSBnaXZlbiB0aW1lIHdpbGwgYmUgY29udmVydGVkLiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCBpdCBmYWxsYmFja3MgdG8gdGhlXHJcbiAgICAgKiAgIFtkZWZhdWx0IHRpbWUgdW5pdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV3cml0ZXJzZXR0aW5ncy5odG1sI2RlZmF1bHR0aW1ldW5pdCkgYW5kIHVsdGltYXRlbHkgdG9cclxuICAgICAqICAgXCJuYW5vc2Vjb25kc1wiLiBBY2NlcHRzIHBsdXJhbHMgYW5kIGNhc2UgdmFyaWF0aW9ucy5cclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKiAgIFdoZW4gZ2l2ZW4sIHRoZXNlIGNvbmZpZ3VyYXRpb25zIHdpbGwgb3ZlcnJpZGUgdGhlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZVxyXG4gICAgICogICBpbnN0YW5jZSwgZm9yIHRoaXMgc3BlY2lmaWMgYHdyaXRlYC4gSXQgZG9lcyBub3QgY2hhbmdlIHRoZSBvYmplY3QgaW4gYW55IHdheSB3aGF0c29ldmVyLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIHN0cmluZyBjb250YWluaW5nIGEgc3ludGhldGljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd3JpdGUodGltZTogVGltZSwgdG9UaW1lVW5pdD86IHN0cmluZyB8IFRpbWVVbml0LCBvcHRpb25zPzogVGltZVdyaXRlclNldHRpbmdzKTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSB2YWx1ZSB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSwgYSB0aW1lIHVuaXQgdG8gdHJhbnNmb3JtIGl0IGFuZFxyXG4gICAgICogY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgb3ZlcnJpZGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlIGluc3RhbmNlLCBmb3IgdGhlXHJcbiAgICAgKiBkdXJhdGlvbiB0aGUgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lVmFsdWVcclxuICAgICAqICAgQSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIGEgdGltZSB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSB0aW1lVW5pdFxyXG4gICAgICogICBUaW1lIHVuaXQgZnJvbSB3aGljaCB0aGUgZ2l2ZW4gdGltZSB2YWx1ZSB3aWxsIGJlIGNvbnZlcnRlZC4gSWYgdGhpcyBwYXJhbWV0ZXIgaXMgbm90IHBhc3NlZCwgaXQgZmFsbGJhY2tzIHRvXHJcbiAgICAgKiAgIHRoZSBbZGVmYXVsdCB0aW1lIHVuaXRdKC4uL2ludGVyZmFjZXMvX2luZGV4Xy50aW1ld3JpdGVyc2V0dGluZ3MuaHRtbCNkZWZhdWx0dGltZXVuaXQpIGFuZCB1bHRpbWF0ZWx5IHRvXHJcbiAgICAgKiAgIFwibmFub3NlY29uZHNcIi5cclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKiAgIFdoZW4gZ2l2ZW4sIHRoZXNlIGNvbmZpZ3VyYXRpb25zIHdpbGwgb3ZlcnJpZGUgdGhlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZVxyXG4gICAgICogICBpbnN0YW5jZSwgZm9yIHRoaXMgc3BlY2lmaWMgYHdyaXRlYC4gSXQgZG9lcyBub3QgY2hhbmdlIHRoZSBvYmplY3QgaW4gYW55IHdheSB3aGF0c29ldmVyLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIHN0cmluZyBjb250YWluaW5nIGEgc3ludGhldGljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd3JpdGUodGltZVZhbHVlOiBUaW1lVmFsdWVTb3VyY2UsIHRpbWVVbml0PzogVGltZVVuaXRTb3VyY2UsIG9wdGlvbnM/OiBUaW1lV3JpdGVyU2V0dGluZ3MpOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXcml0ZXMgYSB0aW1lIHZhbHVlIHVzaW5nIGEgW1RpbWVdKF9pbmRleF8udGltZS5odG1sKSBvYmplY3QgYW5kLCBvcHRpb25hbGx5LCBhIHRpbWUgdW5pdCB0byB0cmFuc2Zvcm0gaXQgYW5kXHJcbiAgICAgKiBjb25maWd1cmF0aW9ucyB0aGF0IG1heSBvdmVycmlkZSB0aG9zZSBvZiB0aGUgW0xvY2FsZV0oX2xvY2FsaXphdGlvbl8ubG9jYWxlLmh0bWwpIGFuZCB0aGUgaW5zdGFuY2UsIGZvciB0aGVcclxuICAgICAqIGR1cmF0aW9uIHRoZSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRpbWVWYWx1ZVxyXG4gICAgICogICBBIG51bWVyaWMgcmVwcmVzZW50YXRpb24gb2YgYSB0aW1lIHZhbHVlLlxyXG4gICAgICogQHBhcmFtIHRpbWVVbml0XHJcbiAgICAgKiAgIFRpbWUgdW5pdCBmcm9tIHdoaWNoIHRoZSBnaXZlbiB0aW1lIHZhbHVlIHdpbGwgYmUgY29udmVydGVkLiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCBpdCBmYWxsYmFja3MgdG9cclxuICAgICAqICAgdGhlIFtkZWZhdWx0IHRpbWUgdW5pdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV3cml0ZXJzZXR0aW5ncy5odG1sI2RlZmF1bHR0aW1ldW5pdCkgYW5kIHVsdGltYXRlbHkgdG9cclxuICAgICAqICAgXCJuYW5vc2Vjb25kc1wiLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgd3JpdGVgLiBJdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG9iamVjdCBpbiBhbnkgd2F5IHdoYXRzb2V2ZXIuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB3cml0ZSh0aW1lVmFsdWU6IFRpbWVWYWx1ZVNvdXJjZSwgdGltZVVuaXQ/OiBzdHJpbmcgfCBUaW1lVW5pdCwgb3B0aW9ucz86IFRpbWVXcml0ZXJTZXR0aW5ncyk6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyaXRlcyBhIHRpbWUgdmFsdWUgdXNpbmcgYSBbVGltZV0oX2luZGV4Xy50aW1lLmh0bWwpIG9iamVjdCBhbmQsIG9wdGlvbmFsbHksIGEgdGltZSB1bml0IHRvIHRyYW5zZm9ybSBpdCBhbmRcclxuICAgICAqIGNvbmZpZ3VyYXRpb25zIHRoYXQgbWF5IG92ZXJyaWRlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZSBpbnN0YW5jZSwgZm9yIHRoZVxyXG4gICAgICogZHVyYXRpb24gdGhlIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGltZVZhbHVlXHJcbiAgICAgKiAgIEEgbnVtZXJpYyByZXByZXNlbnRhdGlvbiBvZiBhIHRpbWUgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gZnJvbVRpbWVVbml0XHJcbiAgICAgKiAgIFRpbWUgdW5pdCBmcm9tIHdoaWNoIHRoZSBnaXZlbiB0aW1lIHZhbHVlIHdpbGwgYmUgY29udmVydGVkLiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCBpdCBmYWxsYmFja3MgdG9cclxuICAgICAqICAgdGhlIFtkZWZhdWx0IHRpbWUgdW5pdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV3cml0ZXJzZXR0aW5ncy5odG1sI2RlZmF1bHR0aW1ldW5pdCkgYW5kIHVsdGltYXRlbHkgdG9cclxuICAgICAqICAgXCJuYW5vc2Vjb25kc1wiLlxyXG4gICAgICogQHBhcmFtIHRvVGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHRvIHdoaWNoIHRoZSBnaXZlbiB0aW1lIHdpbGwgYmUgY29udmVydGVkLiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCBpdCBmYWxsYmFja3MgdG8gdGhlXHJcbiAgICAgKiAgIFtkZWZhdWx0IHRpbWUgdW5pdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV3cml0ZXJzZXR0aW5ncy5odG1sI2RlZmF1bHR0aW1ldW5pdCkgYW5kIHVsdGltYXRlbHkgdG9cclxuICAgICAqICAgXCJuYW5vc2Vjb25kc1wiLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgd3JpdGVgLiBJdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG9iamVjdCBpbiBhbnkgd2F5IHdoYXRzb2V2ZXIuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB3cml0ZSh0aW1lVmFsdWU6IFRpbWVWYWx1ZVNvdXJjZSwgZnJvbVRpbWVVbml0PzogVGltZVVuaXRTb3VyY2UsIHRvVGltZVVuaXQ/OiBUaW1lVW5pdFNvdXJjZSxcclxuICAgICAgICBvcHRpb25zPzogVGltZVdyaXRlclNldHRpbmdzKTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSB2YWx1ZSB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSwgYSB0aW1lIHVuaXQgdG8gdHJhbnNmb3JtIGl0IGFuZFxyXG4gICAgICogY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgb3ZlcnJpZGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlIGluc3RhbmNlLCBmb3IgdGhlXHJcbiAgICAgKiBkdXJhdGlvbiB0aGUgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lVmFsdWVcclxuICAgICAqICAgQSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIGEgdGltZSB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSBmcm9tVGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IGZyb20gd2hpY2ggdGhlIGdpdmVuIHRpbWUgdmFsdWUgd2lsbCBiZSBjb252ZXJ0ZWQuIElmIHRoaXMgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQsIGl0IGZhbGxiYWNrcyB0b1xyXG4gICAgICogICB0aGUgW2RlZmF1bHQgdGltZSB1bml0XSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXdyaXRlcnNldHRpbmdzLmh0bWwjZGVmYXVsdHRpbWV1bml0KSBhbmQgdWx0aW1hdGVseSB0b1xyXG4gICAgICogICBcIm5hbm9zZWNvbmRzXCIuIEFjY2VwdHMgcGx1cmFscyBhbmQgY2FzZSB2YXJpYXRpb25zLlxyXG4gICAgICogQHBhcmFtIHRvVGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHRvIHdoaWNoIHRoZSBnaXZlbiB0aW1lIHdpbGwgYmUgY29udmVydGVkLiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCBpdCBmYWxsYmFja3MgdG8gdGhlXHJcbiAgICAgKiAgIFtkZWZhdWx0IHRpbWUgdW5pdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV3cml0ZXJzZXR0aW5ncy5odG1sI2RlZmF1bHR0aW1ldW5pdCkgYW5kIHVsdGltYXRlbHkgdG9cclxuICAgICAqICAgXCJuYW5vc2Vjb25kc1wiLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgd3JpdGVgLiBJdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG9iamVjdCBpbiBhbnkgd2F5IHdoYXRzb2V2ZXIuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB3cml0ZSh0aW1lVmFsdWU6IFRpbWVWYWx1ZVNvdXJjZSwgZnJvbVRpbWVVbml0Pzogc3RyaW5nIHwgVGltZVVuaXQsIHRvVGltZVVuaXQ/OiBUaW1lVW5pdFNvdXJjZSxcclxuICAgICAgICBvcHRpb25zPzogVGltZVdyaXRlclNldHRpbmdzKTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSB2YWx1ZSB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSwgYSB0aW1lIHVuaXQgdG8gdHJhbnNmb3JtIGl0IGFuZFxyXG4gICAgICogY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgb3ZlcnJpZGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlIGluc3RhbmNlLCBmb3IgdGhlXHJcbiAgICAgKiBkdXJhdGlvbiB0aGUgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lVmFsdWVcclxuICAgICAqICAgQSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIGEgdGltZSB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSBmcm9tVGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IGZyb20gd2hpY2ggdGhlIGdpdmVuIHRpbWUgdmFsdWUgd2lsbCBiZSBjb252ZXJ0ZWQuIElmIHRoaXMgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQsIGl0IGZhbGxiYWNrcyB0b1xyXG4gICAgICogICB0aGUgW2RlZmF1bHQgdGltZSB1bml0XSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXdyaXRlcnNldHRpbmdzLmh0bWwjZGVmYXVsdHRpbWV1bml0KSBhbmQgdWx0aW1hdGVseSB0b1xyXG4gICAgICogICBcIm5hbm9zZWNvbmRzXCIuXHJcbiAgICAgKiBAcGFyYW0gdG9UaW1lVW5pdFxyXG4gICAgICogICBUaW1lIHVuaXQgdG8gd2hpY2ggdGhlIGdpdmVuIHRpbWUgd2lsbCBiZSBjb252ZXJ0ZWQuIElmIHRoaXMgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQsIGl0IGZhbGxiYWNrcyB0byB0aGVcclxuICAgICAqICAgW2RlZmF1bHQgdGltZSB1bml0XSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXdyaXRlcnNldHRpbmdzLmh0bWwjZGVmYXVsdHRpbWV1bml0KSBhbmQgdWx0aW1hdGVseSB0b1xyXG4gICAgICogICBcIm5hbm9zZWNvbmRzXCIuIEFjY2VwdHMgcGx1cmFscyBhbmQgY2FzZSB2YXJpYXRpb25zLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqICAgV2hlbiBnaXZlbiwgdGhlc2UgY29uZmlndXJhdGlvbnMgd2lsbCBvdmVycmlkZSB0aGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlXHJcbiAgICAgKiAgIGluc3RhbmNlLCBmb3IgdGhpcyBzcGVjaWZpYyBgd3JpdGVgLiBJdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG9iamVjdCBpbiBhbnkgd2F5IHdoYXRzb2V2ZXIuXHJcbiAgICAgKiBAcmV0dXJuXHJcbiAgICAgKiAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBzeW50aGV0aWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB3cml0ZSh0aW1lVmFsdWU6IFRpbWVWYWx1ZVNvdXJjZSwgZnJvbVRpbWVVbml0PzogVGltZVVuaXRTb3VyY2UsIHRvVGltZVVuaXQ/OiBzdHJpbmcgfCBUaW1lVW5pdCxcclxuICAgICAgICBvcHRpb25zPzogVGltZVdyaXRlclNldHRpbmdzKTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdGltZSB2YWx1ZSB1c2luZyBhIFtUaW1lXShfaW5kZXhfLnRpbWUuaHRtbCkgb2JqZWN0IGFuZCwgb3B0aW9uYWxseSwgYSB0aW1lIHVuaXQgdG8gdHJhbnNmb3JtIGl0IGFuZFxyXG4gICAgICogY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgb3ZlcnJpZGUgdGhvc2Ugb2YgdGhlIFtMb2NhbGVdKF9sb2NhbGl6YXRpb25fLmxvY2FsZS5odG1sKSBhbmQgdGhlIGluc3RhbmNlLCBmb3IgdGhlXHJcbiAgICAgKiBkdXJhdGlvbiB0aGUgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lVmFsdWVcclxuICAgICAqICAgQSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIGEgdGltZSB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSBmcm9tVGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IGZyb20gd2hpY2ggdGhlIGdpdmVuIHRpbWUgdmFsdWUgd2lsbCBiZSBjb252ZXJ0ZWQuIElmIHRoaXMgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQsIGl0IGZhbGxiYWNrcyB0b1xyXG4gICAgICogICB0aGUgW2RlZmF1bHQgdGltZSB1bml0XSguLi9pbnRlcmZhY2VzL19pbmRleF8udGltZXdyaXRlcnNldHRpbmdzLmh0bWwjZGVmYXVsdHRpbWV1bml0KSBhbmQgdWx0aW1hdGVseSB0b1xyXG4gICAgICogICBcIm5hbm9zZWNvbmRzXCIuIEFjY2VwdHMgcGx1cmFscyBhbmQgY2FzZSB2YXJpYXRpb25zLlxyXG4gICAgICogQHBhcmFtIHRvVGltZVVuaXRcclxuICAgICAqICAgVGltZSB1bml0IHRvIHdoaWNoIHRoZSBnaXZlbiB0aW1lIHdpbGwgYmUgY29udmVydGVkLiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCBpdCBmYWxsYmFja3MgdG8gdGhlXHJcbiAgICAgKiAgIFtkZWZhdWx0IHRpbWUgdW5pdF0oLi4vaW50ZXJmYWNlcy9faW5kZXhfLnRpbWV3cml0ZXJzZXR0aW5ncy5odG1sI2RlZmF1bHR0aW1ldW5pdCkgYW5kIHVsdGltYXRlbHkgdG9cclxuICAgICAqICAgXCJuYW5vc2Vjb25kc1wiLiBBY2NlcHRzIHBsdXJhbHMgYW5kIGNhc2UgdmFyaWF0aW9ucy5cclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKiAgIFdoZW4gZ2l2ZW4sIHRoZXNlIGNvbmZpZ3VyYXRpb25zIHdpbGwgb3ZlcnJpZGUgdGhlIHRob3NlIG9mIHRoZSBbTG9jYWxlXShfbG9jYWxpemF0aW9uXy5sb2NhbGUuaHRtbCkgYW5kIHRoZVxyXG4gICAgICogICBpbnN0YW5jZSwgZm9yIHRoaXMgc3BlY2lmaWMgYHdyaXRlYC4gSXQgZG9lcyBub3QgY2hhbmdlIHRoZSBvYmplY3QgaW4gYW55IHdheSB3aGF0c29ldmVyLlxyXG4gICAgICogQHJldHVyblxyXG4gICAgICogICBBIHN0cmluZyBjb250YWluaW5nIGEgc3ludGhldGljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd3JpdGUodGltZVZhbHVlOiBUaW1lVmFsdWVTb3VyY2UsIGZyb21UaW1lVW5pdD86IHN0cmluZyB8IFRpbWVVbml0LCB0b1RpbWVVbml0Pzogc3RyaW5nIHwgVGltZVVuaXQsXHJcbiAgICAgICAgb3B0aW9ucz86IFRpbWVXcml0ZXJTZXR0aW5ncyk6IHN0cmluZztcclxuXHJcbiAgICAvLyBBY3R1YWwgYHdyaXRlYCBpbXBsZW1lbnRhdGlvblxyXG4gICAgcHVibGljIHdyaXRlKHRpbWU6IFRpbWVWYWx1ZVNvdXJjZSB8IFRpbWUsIGZyb21UaW1lVW5pdD86IFRpbWVVbml0U291cmNlIHwgVGltZVdyaXRlclNldHRpbmdzIHwgc3RyaW5nLFxyXG4gICAgICAgIHRvVGltZVVuaXQ/OiBUaW1lVW5pdFNvdXJjZSB8IFRpbWVXcml0ZXJTZXR0aW5ncyB8IHN0cmluZywgb3B0aW9ucz86IFRpbWVXcml0ZXJTZXR0aW5ncykge1xyXG5cclxuICAgICAgICBjb25zdCBpc09wdGlvbnMgPSAob2JqZWN0OiBhbnkpID0+IHR5cGVvZihvYmplY3QpID09PSBcIm9iamVjdFwiICYmICFvYmplY3QuaGFzT3duUHJvcGVydHkoXCJmYWN0b3JcIik7XHJcblxyXG4gICAgICAgIGlmICghb3B0aW9ucyAmJiBpc09wdGlvbnMoZnJvbVRpbWVVbml0KSkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0gZnJvbVRpbWVVbml0IGFzIFRpbWVXcml0ZXJTZXR0aW5ncztcclxuICAgICAgICAgICAgZnJvbVRpbWVVbml0ID0gdG9UaW1lVW5pdDtcclxuICAgICAgICAgICAgdG9UaW1lVW5pdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghb3B0aW9ucyAmJiBpc09wdGlvbnModG9UaW1lVW5pdCkpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHRvVGltZVVuaXQgYXMgVGltZVdyaXRlclNldHRpbmdzO1xyXG4gICAgICAgICAgICB0b1RpbWVVbml0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IHRoaXMuX2NvbWJpbmVPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICBmcm9tVGltZVVuaXQgPSAoZnJvbVRpbWVVbml0IHx8IG9wdGlvbnMuZGVmYXVsdFRpbWVVbml0IHx8IFwibmFub3NlY29uZFwiKSBhcyBUaW1lVW5pdFNvdXJjZTtcclxuICAgICAgICB0b1RpbWVVbml0ID0gKHRvVGltZVVuaXQgfHwgZnJvbVRpbWVVbml0KSBhcyBUaW1lVW5pdFNvdXJjZTtcclxuXHJcbiAgICAgICAgaWYgKCEodGltZSBpbnN0YW5jZW9mIFRpbWUpKSB7XHJcbiAgICAgICAgICAgIHRpbWUgPSBUaW1lLmZyb20odGltZSwgZnJvbVRpbWVVbml0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl93cml0ZVRpbWUodGltZSwgb3B0aW9ucywgdG9UaW1lVW5pdCk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBvcHRpb25zIG92ZXJyaWRlbiBpbiB0aGUgY29ycmVjdCBvcmRlclxyXG4gICAgcHJpdmF0ZSBfY29tYmluZU9wdGlvbnMob3B0aW9uczogVGltZVdyaXRlclNldHRpbmdzIHwgdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBtZXJnZShkZWZhdWx0U2V0dGluZ3MsIExvY2FsZS5zZXR0aW5ncy53cml0ZXJPcHRpb25zLCB0aGlzLnNldHRpbmdzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gRGVwcmVjYXRlZCBwcm9wZXJ0aWVzIHdpbGwgYmUgcmVtb3ZlZCBvbiBuZXh0IG1ham9yIHJlbGVhc2UsIGJ1dCBmb3Igbm93LCBwYXJzZSB0aGVtXHJcblxyXG4gICAgICAgIG9wdGlvbnMuZGVjaW1hbFBsYWNlcyA9IHR5cGVvZihvcHRpb25zLmRlY2ltYWxQbGFjZXMpID09PSBcIm51bWJlclwiXHJcbiAgICAgICAgICAgID8gb3B0aW9ucy5kZWNpbWFsUGxhY2VzXHJcbiAgICAgICAgICAgIDogb3B0aW9ucy5mcmFjdGlvbkRpZ2l0cztcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMudGltZVVuaXRTZXBhcmF0b3IgPT09IGRlZmF1bHRTZXR0aW5ncy50aW1lVW5pdFNlcGFyYXRvciAmJiBvcHRpb25zLnNwYWNlVGltZVVuaXQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMudGltZVVuaXRTZXBhcmF0b3IgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMudGVybXMpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy50ZXJtQXBwcm94aW1hdGVseSA9IG9wdGlvbnMudGVybUFwcHJveGltYXRlbHkgfHwgb3B0aW9ucy50ZXJtcy5hcHByb3hpbWF0ZWx5O1xyXG4gICAgICAgICAgICBvcHRpb25zLnRlcm1JbmZpbml0ZSA9IG9wdGlvbnMudGVybUluZmluaXRlIHx8IG9wdGlvbnMudGVybXMuaW5maW5pdGU7XHJcbiAgICAgICAgICAgIG9wdGlvbnMudGVybU5hTiA9IG9wdGlvbnMudGVybU5hTiB8fCBvcHRpb25zLnRlcm1zLm5hbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvdW50IGFuZCB3cml0ZXMgdGltZXMgdW5pdC1ieS11bml0XHJcbiAgICBwcml2YXRlIF9jb3VudGRvd25UaW1lKHRpbWU6IFRpbWUsIHRpbWVVbml0TGlzdDogTmFtZWRUaW1lVW5pdFtdLCBvcHRpb25zOiBUaW1lV3JpdGVyU2V0dGluZ3MpIHtcclxuXHJcbiAgICAgICAgbGV0IHZhbHVlOiBEZWNpbWFsID0gbmV3IERlY2ltYWwoMCk7XHJcbiAgICAgICAgbGV0IGludGVnZXI6IERlY2ltYWwgPSBuZXcgRGVjaW1hbCgwKTtcclxuICAgICAgICBsZXQgZnJhY3Rpb246IERlY2ltYWwgPSBuZXcgRGVjaW1hbCgwKTtcclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlID0gKHRvdGFsOiBEZWNpbWFsKSA9PiB7IHZhbHVlID0gdG90YWwsIGludGVnZXIgPSB2YWx1ZS50cnVuYygpLCBmcmFjdGlvbiA9IHZhbHVlLm1pbnVzKGludGVnZXIpOyB9O1xyXG5cclxuICAgICAgICAvLyBTb3J0cyB0aGUgdGltZSB1bml0cyBmcm9tIGxhcmdlc3QgZmFjdG9yIHRvIHNtYWxsZXN0XHJcbiAgICAgICAgdGltZVVuaXRMaXN0LnNvcnQoKGEsIGIpID0+IGIuZmFjdG9yLmNvbXBhcmVkVG8oYS5mYWN0b3IpKTtcclxuXHJcbiAgICAgICAgLy8gU2V0cyB0aGUgdmFsdWUgdG8gdGhlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaXJzdCB0aW1lIHVuaXRcclxuICAgICAgICB1cGRhdGUodGltZS50b0JpZyh0aW1lVW5pdExpc3RbMF0pKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRpbWVVbml0TGlzdC5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c1RpbWVVbml0ID0gdGltZVVuaXRMaXN0W2kgLSAxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoaW50ZWdlci5jb21wYXJlZFRvKDApICE9PSAwIHx8IG9wdGlvbnMuaGlkZVplcm9TZWdtZW50cyA9PT0gZmFsc2UpICYmXHJcbiAgICAgICAgICAgICAgICAoIWludGVnZXIuaXNOYU4oKSB8fCByZXN1bHQubGVuZ3RoID09PSAwKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFRpbWUgPSB0aW1lLmlzQXBwcm94aW1hdGVkIHx8IHByZXZpb3VzVGltZVVuaXQuYXBwcm94aW1hdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgPyBUaW1lLmZyb20oaW50ZWdlciwgcHJldmlvdXNUaW1lVW5pdCkuYXBwcm94aW1hdGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogVGltZS5mcm9tKGludGVnZXIsIHByZXZpb3VzVGltZVVuaXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFkZGluZyB0aGUgY3VycmVudCBzZWdtZW50XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLndyaXRlKHBhcnNlZFRpbWUsIHByZXZpb3VzVGltZVVuaXQsIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50aW5nIGB3cml0ZWAgZnJvbSB3cml0dGluZyB0aGUgYXBwcm94aW1hdGlvbiBzeW1ib2wgLyBuYW1lXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkVGltZS5pc0FwcHJveGltYXRlZCB8fCBwcmV2aW91c1RpbWVVbml0LmFwcHJveGltYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Nob3VsZEFwcHJveGltYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHVwZGF0ZShUaW1lLmZyb20oZnJhY3Rpb24sIHByZXZpb3VzVGltZVVuaXQpLnRvQmlnKHRpbWVVbml0TGlzdFtpXSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGltZVVuaXQgPSB0aW1lVW5pdExpc3RbdGltZVVuaXRMaXN0Lmxlbmd0aCAtIDFdO1xyXG5cclxuICAgICAgICBpZiAoKHZhbHVlLmNvbXBhcmVkVG8oMCkgIT09IDAgfHwgb3B0aW9ucy5oaWRlWmVyb1NlZ21lbnRzID09PSBmYWxzZSkgJiZcclxuICAgICAgICAgICAgKCF2YWx1ZS5pc05hTigpIHx8IHJlc3VsdC5sZW5ndGggPT09IDApKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGltZVVuaXQuZmFjdG9yLmVxdWFscyhcIjUuMzkwNTZlLTM1XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQbGFuY2sgdGltZSBpcyB0ZW9yZXRpY2FsbHkgaW5kaXZpc2libGVcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMud3JpdGUodmFsdWUucm91bmQoKSwgdGltZVVuaXQsIG9wdGlvbnMpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZHMgdGhlIGxhc3Qgc2VnbWVudCBpbiBpdHMgZW50aXJldHkgKG5vIGludGVnZXItb25seSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMud3JpdGUodmFsdWUsIHRpbWVVbml0LCBvcHRpb25zKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFwcHJveGltYXRlID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4ob3B0aW9ucy5zZWdtZW50U2VwYXJhdG9yIHx8IFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBhcnNlcyBudW1lcmljIG9wdGlvbnMgYW5kIHJldHVybnMgdGhlIG51bWVyaWMgc3RyaW5nXHJcbiAgICBwcml2YXRlIF93cml0ZU51bWJlcih2YWx1ZTogRGVjaW1hbCwgb3B0aW9uczogVGltZVdyaXRlclNldHRpbmdzKSB7XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZS5pc05hTigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAob3B0aW9ucy52ZXJib3NlID8gb3B0aW9ucy50ZXJtTmFOIDogb3B0aW9ucy5zeW1ib2xOYU4pIHx8IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXZhbHVlLmlzRmluaXRlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChvcHRpb25zLnZlcmJvc2UgPyBvcHRpb25zLnRlcm1JbmZpbml0ZSA6IG9wdGlvbnMuc3ltYm9sSW5maW5pdGUpIHx8IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob3B0aW9ucy5udW1lcmljTm90YXRpb24gPT09IFwicm9tYW5cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVSb21hbih2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob3B0aW9ucy5udW1lcmljTm90YXRpb24gPT09IFwicm9tYW4tZnJhY3Rpb25zXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlUm9tYW4odmFsdWUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IFtvcHRpb25zLmRlY2ltYWxQbGFjZXMsIG9wdGlvbnMucm91bmRpbmdNb2RlXTtcclxuICAgICAgICBsZXQgc3RyaW5nVmFsdWU6IHN0cmluZztcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMuc2lnbmlmaWNhbnREaWdpdHMpIHtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdmFsdWUudHJ1bmMoKS5wcmVjaXNpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TaWduaWZpY2FudERpZ2l0cyhvcHRpb25zLnNpZ25pZmljYW50RGlnaXRzICsgb2Zmc2V0LCBvcHRpb25zLnJvdW5kaW5nTW9kZSBhcyBhbnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMubnVtZXJpY05vdGF0aW9uID09PSBcInNjaWVudGlmaWNcIikge1xyXG4gICAgICAgICAgICBzdHJpbmdWYWx1ZSA9IHZhbHVlLnRvRXhwb25lbnRpYWwuYXBwbHkodmFsdWUsIHBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0cmluZ1ZhbHVlID0gdmFsdWUudG9GaXhlZC5hcHBseSh2YWx1ZSwgcGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQYXJzaW5nIHRoZSB0aG91c2FuZHMgc2VwYXJhdG9yIG9ubHkgZm9yIGRlY2ltYWxzIGFuZCB2YWx1ZXMgPj0gMTAwMFxyXG4gICAgICAgIGlmIChvcHRpb25zLm51bWVyaWNOb3RhdGlvbiA9PT0gXCJkZWNpbWFsXCIgJiYgb3B0aW9ucy50aG91c2FuZHNTZXBhcmF0b3IgJiYgdmFsdWUuY29tcGFyZWRUbygxMDAwKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gc3RyaW5nVmFsdWUuc3BsaXQobG9jYWxlRGVjaW1hbFNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIHBhcnRzWzBdID0gcGFydHNbMF0ucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgb3B0aW9ucy50aG91c2FuZHNTZXBhcmF0b3IpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWUgPSBwYXJ0cy5qb2luKGxvY2FsZURlY2ltYWxTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWUgPSBwYXJ0c1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLmRlY2ltYWxTZXBhcmF0b3IpID09PSBcInN0cmluZ1wiICYmIG9wdGlvbnMuZGVjaW1hbFNlcGFyYXRvciAhPT0gbG9jYWxlRGVjaW1hbFNlcGFyYXRvcikge1xyXG4gICAgICAgICAgICBzdHJpbmdWYWx1ZSA9IHJlcGxhY2VMYXN0KHN0cmluZ1ZhbHVlLCBsb2NhbGVEZWNpbWFsU2VwYXJhdG9yLCBvcHRpb25zLmRlY2ltYWxTZXBhcmF0b3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0cmluZ1ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBhcnNlcyB0aW1lLXJlbGF0ZWQgb3B0aW9ucyBhbmQgcmV0dXJuIHRoZSB0aW1lIHN0cmluZ1xyXG4gICAgcHJpdmF0ZSBfd3JpdGVUaW1lKHRpbWU6IFRpbWUsIG9wdGlvbnM6IFRpbWVXcml0ZXJTZXR0aW5ncywgdGFyZ2V0VGltZVVuaXQ6IHN0cmluZyB8IFRpbWVVbml0KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5hbWVkVGltZVVuaXQgPSB0aW1lVW5pdEZyb21Tb3VyY2UodGFyZ2V0VGltZVVuaXQgfHwgb3B0aW9ucy5kZWZhdWx0VGltZVVuaXQgfHwgXCJuYW5vc2Vjb25kXCIpO1xyXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gTG9jYWxlLnNldHRpbmdzLnRpbWVVbml0cyA/IExvY2FsZS5zZXR0aW5ncy50aW1lVW5pdHNbbmFtZWRUaW1lVW5pdC5uYW1lXSA6IHt9O1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGltZS50b0JpZyh0YXJnZXRUaW1lVW5pdCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpbWVVbml0ID0gbWVyZ2UobmFtZWRUaW1lVW5pdCwgdHJhbnNsYXRpb24pIGFzIE5hbWVkVGltZVVuaXQ7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICAvLyBQYXJ0IDE6IGFwcHJveGltYXRpb24gdGVybS9zeW1ib2xcclxuICAgICAgICBpZiAodGhpcy5fc2hvdWxkQXBwcm94aW1hdGUgJiYgKHRpbWUuaXNBcHByb3hpbWF0ZWQgfHwgbmFtZWRUaW1lVW5pdC5hcHByb3hpbWF0ZWQpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwcHJveGltYXRlbHkgPSAhIW9wdGlvbnMudmVyYm9zZVxyXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnRlcm1BcHByb3hpbWF0ZWx5ID8gb3B0aW9ucy50ZXJtQXBwcm94aW1hdGVseSArIFwiIFwiIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgOiBvcHRpb25zLnN5bWJvbEFwcHJveGltYXRlbHk7XHJcblxyXG4gICAgICAgICAgICByZXN1bHQucHVzaChhcHByb3hpbWF0ZWx5IHx8IFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGFydCAyOiBudW1iZXJcclxuICAgICAgICBpZiAoIW9wdGlvbnMubnVtZXJpY1dyaXRlcikge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLl93cml0ZU51bWJlcih2YWx1ZSwgb3B0aW9ucykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9wdGlvbnMubnVtZXJpY1dyaXRlcih2YWx1ZS50b051bWJlcigpLCB2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGFydCAzOiBzZXBhcmF0b3JcclxuICAgICAgICBpZiAoIW9wdGlvbnMuaGlkZVRpbWVVbml0KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9wdGlvbnMudGltZVVuaXRTZXBhcmF0b3IgfHwgXCJcIik7XHJcblxyXG4gICAgICAgIC8vIFBhcnQgNDogdGltZSB1bml0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlckVtcHR5KHJlc3VsdCkuam9pbihcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBsdXJhbGl6ZSA9IHRpbWVVbml0LnBsdXJhbGl6ZSAhPT0gZmFsc2UgJiYgKCF2YWx1ZS5pc0Zpbml0ZSgpIHx8IHZhbHVlLmNvbXBhcmVkVG8oMSkgPiAwKTtcclxuICAgICAgICByZXN1bHQucHVzaCh0aGlzLl93cml0ZVRpbWVVbml0KHZhbHVlLCB0aW1lVW5pdCwgb3B0aW9ucywgcGx1cmFsaXplKSk7XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlckVtcHR5KHJlc3VsdCkuam9pbihcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQYXJzZXMgdGltZSB1bml0LXJlbGF0ZWQgb3B0aW9ucyBhbmQgcmV0dXJucyB0aGUgdGltZSB1bml0IHN0cmluZ1xyXG4gICAgcHJpdmF0ZSBfd3JpdGVUaW1lVW5pdCh2YWx1ZTogRGVjaW1hbCwgdGltZVVuaXQ6IE5hbWVkVGltZVVuaXQsIG9wdGlvbnM6IFRpbWVXcml0ZXJTZXR0aW5ncywgcGx1cmFsOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoIW9wdGlvbnMudmVyYm9zZSAmJiB0aW1lVW5pdC5zeW1ib2wpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godGltZVVuaXQuc3ltYm9sKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlckVtcHR5KHJlc3VsdCkuam9pbihcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0aW1lVW5pdE5hbWUgPSB0aW1lVW5pdC5yZWFkYWJsZU5hbWU7XHJcblxyXG4gICAgICAgIGlmIChwbHVyYWwgJiYgdHlwZW9mKHRpbWVVbml0LmN1c3RvbVBsdXJhbCkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICB0aW1lVW5pdE5hbWUgPSB0aW1lVW5pdC5jdXN0b21QbHVyYWwodmFsdWUudG9OdW1iZXIoKSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBsdXJhbCAmJiB0eXBlb2YodGltZVVuaXQuY3VzdG9tUGx1cmFsKSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB0aW1lVW5pdE5hbWUgPSB0aW1lVW5pdC5jdXN0b21QbHVyYWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mKHRpbWVVbml0TmFtZSkgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdGltZVVuaXROYW1lID0gdGltZVVuaXQubmFtZS5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGx1cmFsICYmICF0aW1lVW5pdC5jdXN0b21QbHVyYWwpIHtcclxuICAgICAgICAgICAgdGltZVVuaXROYW1lICs9IFwic1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzdWx0LnB1c2godGltZVVuaXROYW1lKTtcclxuICAgICAgICByZXR1cm4gZmlsdGVyRW1wdHkocmVzdWx0KS5qb2luKFwiXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogT2JqZWN0cyBvZiB0aGlzIHR5cGUgYXJlIHVzZWQgdG8gY29uZmlndXJlIHRoZSBiZWhhdmlvciBvZiBbdGltZSB3cml0ZXJzXSguLi9jbGFzc2VzL19pbmRleF8udGltZXdyaXRlci5odG1sKS5cclxuICpcclxuICogVXNpbmcgdGhlc2Ugb2JqZWN0cyBpdCBpcyBwb3NzaWJsZSB0byBjaGFuZ2UgdGhlIGxleGljYWwgYW5kIG51bWVyaWNhbCBvdXRwdXQgdG8gZml0IG1hbnkgZGlmZmVyZW50IHNjZW5hcmlvcy4gU2VlXHJcbiAqIHRoZSBkb2N1bWVudGF0aW9uIGZvciBlYWNoIHByb3BlcnR5IGZvciBtb3JlIGluZm9ybWF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lV3JpdGVyU2V0dGluZ3Mge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTnVtZXIgb2YgZGVjaW1hbCBwbGFjZXMgcmVzdWx0aW5nIGZyb20gdGltZSBjb252ZXJzaW9ucy4gVXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIFtyb3VuZGluZ01vZGVdIHRvIHdyaXRlIG51bWVyaWNcclxuICAgICAqIHZhbHVlc1xyXG4gICAgICpcclxuICAgICAqIERlZmF1bHQ6IGB1bmRlZmluZWRgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtbaW5jbHVkZTpleGFtcGxlcy90aW1ld3JpdGVyc2V0dGluZ3MvZGVjaW1hbFBsYWNlcy5tZF1dXHJcbiAgICAgKi9cclxuICAgIGRlY2ltYWxQbGFjZXM/OiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdHJpbmcgdXNlZCBhcyBkZWNpbWFsIHNlcGFyYXRvciwgc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIHRyYW5zbGF0aW5nIHRvIGxhbmd1YWdlcyBhbmQgcmVnaW9ucyB3aGVyZSB0aGUgXCJkb3RcIlxyXG4gICAgICogbm90YXRpb24gaXMgbm90IHN0YW5kYXJkLlxyXG4gICAgICpcclxuICAgICAqIElmIG5vdCBzZXQsIHRpbWUgd3JpdGVycyB3aWxsIGZpcnN0IHRyeSB0byBwYXJzZSB0aGUgZGVjaW1hbCBzZXBhcmF0b3IgZm9yIHRoZSBsb2NhbGUgb2YgdGhlIG1hY2hpbmUgd2hlcmUgdGhlXHJcbiAgICAgKiBzY3JpcHQgaXMgcnVubmluZyBhbmQgd2lsbCB1bHRpbWF0ZWx5IGZhbGxiYWNrIHRvIGBcIi5cImAuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW1tpbmNsdWRlOmV4YW1wbGVzL3RpbWV3cml0ZXJzZXR0aW5ncy9kZWNpbWFsU2VwYXJhdG9yLm1kXV1cclxuICAgICAqL1xyXG4gICAgZGVjaW1hbFNlcGFyYXRvcj86IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyB0aGUgZGVmYXVsdCB1bml0IHRvIGNvbnZlcnQgdG8gd2hlbiB3cml0aW5nIHRpbWUgdmFsdWVzLlxyXG4gICAgICpcclxuICAgICAqIERlZmF1bHQgaXMgW25hbm9zZWNvbmRdKF9pbmRleF8udGltZXVuaXRkYXRhYmFzZS5odG1sI25hbm9zZWNvbmQpLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtbaW5jbHVkZTpleGFtcGxlcy90aW1ld3JpdGVyc2V0dGluZ3MvZGVmYXVsdFRpbWVVbml0Lm1kXV1cclxuICAgICAqL1xyXG4gICAgZGVmYXVsdFRpbWVVbml0PzogVGltZVVuaXRTb3VyY2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAqKlRoaXMgcHJvcGVydHkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCEqKiBXaGVuIGdpdmVuLCB0aGlzIHdpbGwgYmUgdXNlZCBhcyB0aGUgZml4ZWQgbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxyXG4gICAgICpcclxuICAgICAqIEBkZXByZWNhdGVkIFNpbmNlIHYxLjEuMCAtIEluIGZhdm9yIG9mIGBzaWduaWZpY2FudERpZ2l0c2AgKHdpbGwgYmUgcmVtb3ZlZCBpbiB2MikuXHJcbiAgICAgKi9cclxuICAgIGZyYWN0aW9uRGlnaXRzPzogbnVtYmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB0aGlzIHByb3BlcnR5IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIHByZXZlbnQgdGhlIHRpbWUgd3JpdGVyIGZyb20gd3JpdHRpbmcgYW55IGZvcm0gb2YgdGltZSB1bml0LCBiZSBpdFxyXG4gICAgICogcGx1cmFsLCBzeW1ib2wgb3IgdmVyYm9zZS4gSXQgd2lsbCBhbHNvIHByZXZlbnQgdGhlIG91dHB1dCBvZiB0aGUgW3RpbWUgdW5pdCBzZXBhcmF0b3JdKCN0aW1ldW5pdHNlcGFyYXRvcikuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdCBpcyBgZmFsc2VgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtbaW5jbHVkZTpleGFtcGxlcy90aW1ld3JpdGVyc2V0dGluZ3MvaGlkZVRpbWVVbml0Lm1kXV1cclxuICAgICAqL1xyXG4gICAgaGlkZVRpbWVVbml0PzogYm9vbGVhbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdG8gaGlkZSBbY291bnRkb3duXSguLi9jbGFzc2VzL19pbmRleC50aW1ld3JpdGVyLmh0bWwjY291bnRkb3duKSBzZWdtZW50cyB3aXRoIGEgdmFsdWUgb2YgMCAoemVybykuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdCBpcyBgdHJ1ZWAuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW1tpbmNsdWRlOmV4YW1wbGVzL3RpbWV3cml0ZXJzZXR0aW5ncy9oaWRlWmVyb1NlZ21lbnRzLm1kXV1cclxuICAgICAqL1xyXG4gICAgaGlkZVplcm9TZWdtZW50cz86IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOdW1lcmljIG5vdGF0aW9uIHVzZWQgdG8gd3JpdGUgdGltZSB2YWx1ZXMuIEFjY2VwdGVkIHZhbHVlcyBhcmU6XHJcbiAgICAgKiAtICoqXCJkZWNpbWFsXCI6Kiogc3RhbmRhcmQgX0hpbmR14oCTQXJhYmljIG51bWVyYWwgc3lzdGVtXyB1c2luZyBiYXNlIHRlbjtcclxuICAgICAqIC0gKipcInJvbWFuXCI6KiogX0FuY2llbnQgUm9tZV8gbnVtZXJhbCBzeXN0ZW0sIGlnbm9yaW5nIGZyYWN0aW9ucztcclxuICAgICAqIC0gKipcInJvbWFuLWZyYWN0aW9uc1wiOioqIF9BbmNpZW50IFJvbWVfIG51bWVyYWwgc3lzdGVtLCB1c2luZ1xyXG4gICAgICogICBbY29tbW9uIGZyYWN0aW9uc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUm9tYW5fbnVtZXJhbHMjRnJhY3Rpb25zKTtcclxuICAgICAqIC0gKipcInNjaWVudGlmaWNcIjoqKiBFeHBvbmVudCBub3RhdGlvbjsgd3JpdGVzIHZlcnkgc21hbGwgYW5kIHZlcnkgbGFyZ2UgbnVtYmVycyB1c2luZyBwb3dlcnMgb2YgMTAuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdCBpcyBgXCJkZWNpbWFsXCJgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtbaW5jbHVkZTpleGFtcGxlcy90aW1ld3JpdGVyc2V0dGluZ3MvbnVtZXJpY05vdGF0aW9uLm1kXV1cclxuICAgICAqL1xyXG4gICAgbnVtZXJpY05vdGF0aW9uPzogTnVtZXJpY05vdGF0aW9uO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBjYW4gYmUgc2V0IHRvIGEgZnVuY3Rpb24gdGhhdCB3aWxsIHJlcGxhY2UgYWxsIG90aGVyIGZvcm1zIG9mIG51bWVyaWMgd3JpdHRpbmcsIGlnbm9yaW5nIHRoZVxyXG4gICAgICogW251bWVyaWMgbm90YXRpb25dKCNudW1lcmljbm90YXRpb24pIGFuZCBvdGhlciBtYXRoZW1hdGljYWwgcHJvcGVydGllcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIG1heSByZWNlaXZlIHR3byBwYXJhbWV0ZXJzOiBhIG51bWJlciBhbmQgYW4gb3B0aW9uYWxcclxuICAgICAqIFtiaWcgZGVjaW1hbF0oaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZGVjaW1hbC5qcykuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdCBpcyBgdW5kZWZpbmVkYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL251bWVyaWNXcml0ZXIubWRdXVxyXG4gICAgICovXHJcbiAgICBudW1lcmljV3JpdGVyPzogTnVtZXJpY1dyaXRlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE51bWVyaWMgW3JvdW5kaW5nIG1vZGVdKC4uL2VudW1zL19pbmRleF8ucm91bmRpbmdtb2RlLmh0bWwpIHVzZWQgYnkgdGhlIHdyaXRlci5cclxuICAgICAqXHJcbiAgICAgKiBEZWZhdWx0IGlzIGBSb3VuZGluZ01vZGUuUm91bmRIYWxmVXBgIG9yIGA0YC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL3JvdW5kaW5nTW9kZS5tZF1dXHJcbiAgICAgKi9cclxuICAgIHJvdW5kaW5nTW9kZT86IFJvdW5kaW5nTW9kZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgc3RyaW5nIHVzZWQgdG8gc2VwYXJhdGUgW2NvdW50ZG93bl0oLi4vY2xhc3Nlcy9faW5kZXgudGltZXdyaXRlci5odG1sI2NvdW50ZG93bikgc2VnbWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdCBpcyBgXCIsIFwiYCAoY29tbWEgYW5kIHNwYWNlKS5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL3NlZ21lbnRTZXBhcmF0b3IubWRdXVxyXG4gICAgICovXHJcbiAgICBzZWdtZW50U2VwYXJhdG9yPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogKipUaGlzIHByb3BlcnR5IGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQhKiogV2hldGhlciB0byBzZXBhcmF0ZSB0aGUgbnVtZXJpYyB2YWx1ZSBmcm9tIHRoZSB0aW1lIHVuaXQuXHJcbiAgICAgKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgU2luY2UgdjEuMS4wIC0gSW4gZmF2b3Igb2YgYHRpbWVVbml0U2VwYXJhdG9yYCAod2lsbCBiZSByZW1vdmVkIGluIHYyKS5cclxuICAgICAqL1xyXG4gICAgc3BhY2VUaW1lVW5pdD86IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOdW1iZXIgb2Ygc2lnbmlmaWNhbnQgZGlnaXRzIG9mIHRoZSBkZWNpbWFsIHBhcnQgb2YgbnVtZXJpYyB2YWx1ZXMsIGludGVuZGVkIHRvIG1pbmltaXplIHRoZSBxdWFudGl0eSBvZiB3cml0dGVuXHJcbiAgICAgKiBudW1iZXJzIGZvciB2ZXJ5IGxhcmdlIGNvbnZlcnNpb25zLlxyXG4gICAgICpcclxuICAgICAqIEl0IHdpbGwgZW5mb3JjZSBhIHByZWNpc2lvbiBvZiB0aGUgc3BlY2lmaWVkIG1hZ25pdHVkZSwgYnV0IG9ubHkgZm9yIHRoZSBkZWNpbWFsIHBhcnQgb2YgdGhlIG51bWJlciwgdW5saWtlXHJcbiAgICAgKiBbZGVjaW1hbC5qcyBwcmVjaXNpb25dKGh0dHBzOi8vbWlrZW1jbC5naXRodWIuaW8vZGVjaW1hbC5qcy8jc2QpLiBJdCBkb2Vzbid0IGFwcGx5IHRvIGxlYWRpbmcgemVyb3MuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdDogYDEwYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL3NpZ25pZmljYW50RGlnaXRzLm1kXV1cclxuICAgICAqL1xyXG4gICAgc2lnbmlmaWNhbnREaWdpdHM/OiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHdyaXR0aW5nIHRpbWUgdmFsdWVzIG9yIHVuaXRzIHdoaWNoIGJhc2VkIG9uIGFwcHJveGltYXRpb25zLCB0aGlzIHN5bWJvbCB3aWxsIGJlIGFkZGVkIGJlZm9yZSB0aGUgbnVtYmVyIHRvXHJcbiAgICAgKiBkZW1vbnN0cmF0ZSB0aGUgYXBwcm94aW1hdGlvbiwgd2hlbiBbdmVyYm9zZV0oI3ZlcmJvc2UpIGlzIGRpc2FibGVkLiBPdGhlcndpc2UsIGl0cyBbdGVybV0oI3Rlcm1hcHByb3hpbWF0ZWx5KSBpc1xyXG4gICAgICogdXNlZCBpbnN0ZWFkLlxyXG4gICAgICpcclxuICAgICAqIERlZmF1bHQ6IGBcIuKJiFwiYCAoX2FsbW9zdCBlcXVhbCB0b18gc3ltYm9sKS5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL3N5bWJvbEFwcHJveGltYXRlbHkubWRdXVxyXG4gICAgICovXHJcbiAgICBzeW1ib2xBcHByb3hpbWF0ZWx5Pzogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB3cml0dGluZyB0aW1lIHZhbHVlcyB0aGF0IHJlcHJlc2VudCBhbiBfSW5maW5pdHlfLCB0aGlzIHN5bWJvbCB3aWxsIGJlIHVzZWQgdG8gZXhwcmVzcyBpdCwgd2hlblxyXG4gICAgICogW3ZlcmJvc2VdKCN2ZXJib3NlKSBpcyBkaXNhYmxlZC4gT3RoZXJ3aXNlLCBpdHMgW3Rlcm1dKCN0ZXJtaW5maW5pdGUpIGlzIHVzZWQgaW5zdGVhZC5cclxuICAgICAqXHJcbiAgICAgKiBEZWZhdWx0OiBgXCLiiJ5cImAuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW1tpbmNsdWRlOmV4YW1wbGVzL3RpbWV3cml0ZXJzZXR0aW5ncy9zeW1ib2xJbmZpbml0ZS5tZF1dXHJcbiAgICAgKi9cclxuICAgIHN5bWJvbEluZmluaXRlPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB3cml0dGluZyB0aW1lIHZhbHVlcyB0aGF0IHJlcHJlc2VudCBhIF9OYU5fIChub3QgYSBudW1iZXIpLCB0aGlzIHN5bWJvbCB3aWxsIGJlIHVzZWQgdG8gZXhwcmVzcyBpdCwgd2hlblxyXG4gICAgICogW3ZlcmJvc2VdKCN2ZXJib3NlKSBpcyBkaXNhYmxlZC4gT3RoZXJ3aXNlLCBpdHMgW3Rlcm1dKCN0ZXJtbmFuKSBpcyB1c2VkIGluc3RlYWQuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdDogYFwiTmFOXCJgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtbaW5jbHVkZTpleGFtcGxlcy90aW1ld3JpdGVyc2V0dGluZ3Mvc3ltYm9sTmFOLm1kXV1cclxuICAgICAqL1xyXG4gICAgc3ltYm9sTmFOPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB3cml0dGluZyB0aW1lIHZhbHVlcyBvciB1bml0cyB3aGljaCBiYXNlZCBvbiBhcHByb3hpbWF0aW9ucywgdGhpcyBzdHJpbmcgd2lsbCBiZSBhZGRlZCBiZWZvcmUgdGhlIG51bWJlciB0b1xyXG4gICAgICogZGVtb25zdHJhdGUgdGhlIGFwcHJveGltYXRpb24sIHdoZW4gW3ZlcmJvc2VdKCN2ZXJib3NlKSBpcyBlbmFibGVkLiBPdGhlcndpc2UsIGl0cyBbc3ltYm9sXSgjc3ltYm9sYXBwcm94aW1hdGVseSlcclxuICAgICAqIGlzIHVzZWQgaW5zdGVhZC5cclxuICAgICAqXHJcbiAgICAgKiBEZWZhdWx0IGZvciBFbmdsaXNoIChVUyk6IGBcImFwcHJveGltYXRlbHlcImAuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW1tpbmNsdWRlOmV4YW1wbGVzL3RpbWV3cml0ZXJzZXR0aW5ncy90ZXJtQXBwcm94aW1hdGVseS5tZF1dXHJcbiAgICAgKi9cclxuICAgIHRlcm1BcHByb3hpbWF0ZWx5Pzogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB3cml0dGluZyB0aW1lIHZhbHVlcyB0aGF0IHJlcHJlc2VudCBhbiBfSW5maW5pdHlfLCB0aGlzIHN0cmluZyB3aWxsIGJlIHVzZWQgdG8gZXhwcmVzcyBpdCwgd2hlblxyXG4gICAgICogW3ZlcmJvc2VdKCN2ZXJib3NlKSBpcyBlbmFibGVkLiBPdGhlcndpc2UsIGl0cyBbc3ltYm9sXSgjc3ltYm9saW5maW5pdGUpIGlzIHVzZWQgaW5zdGVhZC5cclxuICAgICAqXHJcbiAgICAgKiBEZWZhdWx0IGZvciBFbmdsaXNoIChVUyk6IGBcImluZmluaXRlXCJgLlxyXG4gICAgICpcclxuICAgICAqIC0tLVxyXG4gICAgICpcclxuICAgICAqIFtbaW5jbHVkZTpleGFtcGxlcy90aW1ld3JpdGVyc2V0dGluZ3MvdGVybUluZmluaXRlLm1kXV1cclxuICAgICAqL1xyXG4gICAgdGVybUluZmluaXRlPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB3cml0dGluZyB0aW1lIHZhbHVlcyB0aGF0IHJlcHJlc2VudCBhIF9OYU5fIChub3QgYSBudW1iZXIpLCB0aGlzIHN0cmluZyB3aWxsIGJlIHVzZWQgdG8gZXhwcmVzcyBpdCwgd2hlblxyXG4gICAgICogW3ZlcmJvc2VdKCN2ZXJib3NlKSBpcyBlbmFibGVkLiBPdGhlcndpc2UsIGl0cyBbc3ltYm9sXSgjc3ltYm9sbmFuKSBpcyB1c2VkIGluc3RlYWQuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogW1tpbmNsdWRlOmV4YW1wbGVzL3RpbWV3cml0ZXJzZXR0aW5ncy90ZXJtTmFOLm1kXV1cclxuICAgICAqL1xyXG4gICAgdGVybU5hTj86IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqICoqVGhpcyBwcm9wZXJ0eSBpcyBubyBsb25nZXIgc3VwcG9ydGVkISoqIFRoaXMgd2FzIHVzZWQgdG8gZGVmaW5lIGEgZmV3IHNwZWNpYWwgbnVtZXJpYyB0ZXJtcy5cclxuICAgICAqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBTaW5jZSB2MS4xLjAgLSBJbiBmYXZvciBvZiBgdmVyYm9zZWAgKHdpbGwgYmUgcmVtb3ZlZCBpbiB2MikuXHJcbiAgICAgKi9cclxuICAgIHRlcm1zPzoge1xyXG4gICAgICAgIGFwcHJveGltYXRlbHk/OiBzdHJpbmc7XHJcbiAgICAgICAgaW5maW5pdGU/OiBzdHJpbmc7XHJcbiAgICAgICAgbmFuPzogc3RyaW5nO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgc3RyaW5nIHVzZWQgYXMgdGhlIHRob3VzYW5kcyBzZXBhcmF0b3Igd2hlbiB1c2luZyBkZWNpbWFsIFtudW1lcmljIG5vdGF0aW9uc10oI251bWVyaWNub3RhdGlvbikuXHJcbiAgICAgKlxyXG4gICAgICogRGVmYXVsdCBpcyBgdW5kZWZpbmVkYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL3Rob3VzYW5kc1NlcGFyYXRvci5tZF1dXHJcbiAgICAgKi9cclxuICAgIHRob3VzYW5kc1NlcGFyYXRvcj86IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgc3RyaW5nIHRoYXQgc2VwYXJhdGVzIHRoZSBudW1lcmljIHZhbHVlIGZyb20gdGhlIHRpbWUgdW5pdC5cclxuICAgICAqXHJcbiAgICAgKiBEZWZhdWx0IGlzIGBcIiBcImAgKHNwYWNlKS5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL3RpbWVVbml0U2VwYXJhdG9yLm1kXV1cclxuICAgICAqL1xyXG4gICAgdGltZVVuaXRTZXBhcmF0b3I/OiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRvIHdyaXRlIG1vcmUgc2VudGVuY2VzIHRvIGRlc2NyaWJlIGEgdGltZSB2YWx1ZSBpbnN0ZWFkIG9mIHVzaW5nIHN5bWJvbHMuIFNldHRpbmcgdGhpcyB0byB0cnVlIGVuZm9yY2VcclxuICAgICAqIGRlc2NyaXB0aXZlIHRleHQgZm9yIHRpbWUgdW5pdHNcclxuICAgICAqXHJcbiAgICAgKiBBbGwgdGltZSB1bml0cyB3aXRob3V0IGEgc3ltYm9sIGFyZSBhbHJlYWR5IHdyaXR0ZW4gaW4gdmVyYm9zZSBtb2RlLlxyXG4gICAgICpcclxuICAgICAqIERlZmF1bHQgaXMgYGZhbHNlYC5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBbW2luY2x1ZGU6ZXhhbXBsZXMvdGltZXdyaXRlcnNldHRpbmdzL3ZlcmJvc2UubWRdXVxyXG4gICAgICovXHJcbiAgICB2ZXJib3NlPzogYm9vbGVhbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqICoqVGhpcyBwcm9wZXJ0eSBpcyBubyBsb25nZXIgc3VwcG9ydGVkISoqIFdoZXRoZXIgb3Igbm90IHRvIHdyaXRlIGRvd24gdGhlIGZ1bGwgdW5pdCByZWFkYWJsZSBuYW1lLCBpbnN0ZWFkIG9mXHJcbiAgICAgKiBpdHMgc3ltYm9sLlxyXG4gICAgICpcclxuICAgICAqIEBkZXByZWNhdGVkIFNpbmNlIHYxLjEuMCAtIEluIGZhdm9yIG9mIGB2ZXJib3NlYCAod2lsbCBiZSByZW1vdmVkIGluIHYyKS5cclxuICAgICAqL1xyXG4gICAgdmVyYm9zZVRpbWVVbml0PzogYm9vbGVhbjtcclxufVxyXG5cclxuLy8jZW5kcmVnaW9uXHJcbiJdfQ==
